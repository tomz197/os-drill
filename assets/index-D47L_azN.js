function Fd(e,n){for(var t=0;t<n.length;t++){const o=n[t];if(typeof o!="string"&&!Array.isArray(o)){for(const r in o)if(r!=="default"&&!(r in e)){const a=Object.getOwnPropertyDescriptor(o,r);a&&Object.defineProperty(e,r,a.get?a:{enumerable:!0,get:()=>o[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function $d(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Vd={exports:{}},ai={},Ud={exports:{}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lr=Symbol.for("react.element"),Bk=Symbol.for("react.portal"),Wk=Symbol.for("react.fragment"),Kk=Symbol.for("react.strict_mode"),Hk=Symbol.for("react.profiler"),Zk=Symbol.for("react.provider"),Jk=Symbol.for("react.context"),Qk=Symbol.for("react.forward_ref"),Gk=Symbol.for("react.suspense"),Xk=Symbol.for("react.memo"),Yk=Symbol.for("react.lazy"),Fu=Symbol.iterator;function qk(e){return e===null||typeof e!="object"?null:(e=Fu&&e[Fu]||e["@@iterator"],typeof e=="function"?e:null)}var Bd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wd=Object.assign,Kd={};function Ro(e,n,t){this.props=e,this.context=n,this.refs=Kd,this.updater=t||Bd}Ro.prototype.isReactComponent={};Ro.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};Ro.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Hd(){}Hd.prototype=Ro.prototype;function zl(e,n,t){this.props=e,this.context=n,this.refs=Kd,this.updater=t||Bd}var jl=zl.prototype=new Hd;jl.constructor=zl;Wd(jl,Ro.prototype);jl.isPureReactComponent=!0;var $u=Array.isArray,Zd=Object.prototype.hasOwnProperty,bl={current:null},Jd={key:!0,ref:!0,__self:!0,__source:!0};function Qd(e,n,t){var o,r={},a=null,i=null;if(n!=null)for(o in n.ref!==void 0&&(i=n.ref),n.key!==void 0&&(a=""+n.key),n)Zd.call(n,o)&&!Jd.hasOwnProperty(o)&&(r[o]=n[o]);var s=arguments.length-2;if(s===1)r.children=t;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(o in s=e.defaultProps,s)r[o]===void 0&&(r[o]=s[o]);return{$$typeof:Lr,type:e,key:a,ref:i,props:r,_owner:bl.current}}function ef(e,n){return{$$typeof:Lr,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function gl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Lr}function nf(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(t){return n[t]})}var Vu=/\/+/g;function Ni(e,n){return typeof e=="object"&&e!==null&&e.key!=null?nf(""+e.key):n.toString(36)}function ya(e,n,t,o,r){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Lr:case Bk:i=!0}}if(i)return i=e,r=r(i),e=o===""?"."+Ni(i,0):o,$u(r)?(t="",e!=null&&(t=e.replace(Vu,"$&/")+"/"),ya(r,n,t,"",function(u){return u})):r!=null&&(gl(r)&&(r=ef(r,t+(!r.key||i&&i.key===r.key?"":(""+r.key).replace(Vu,"$&/")+"/")+e)),n.push(r)),1;if(i=0,o=o===""?".":o+":",$u(e))for(var s=0;s<e.length;s++){a=e[s];var l=o+Ni(a,s);i+=ya(a,n,t,l,r)}else if(l=qk(e),typeof l=="function")for(e=l.call(e),s=0;!(a=e.next()).done;)a=a.value,l=o+Ni(a,s++),i+=ya(a,n,t,l,r);else if(a==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return i}function Qr(e,n,t){if(e==null)return e;var o=[],r=0;return ya(e,o,"","",function(a){return n.call(t,a,r++)}),o}function tf(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var Ae={current:null},za={transition:null},of={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:za,ReactCurrentOwner:bl};function Gd(){throw Error("act(...) is not supported in production builds of React.")}G.Children={map:Qr,forEach:function(e,n,t){Qr(e,function(){n.apply(this,arguments)},t)},count:function(e){var n=0;return Qr(e,function(){n++}),n},toArray:function(e){return Qr(e,function(n){return n})||[]},only:function(e){if(!gl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};G.Component=Ro;G.Fragment=Wk;G.Profiler=Hk;G.PureComponent=zl;G.StrictMode=Kk;G.Suspense=Gk;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=of;G.act=Gd;G.cloneElement=function(e,n,t){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=Wd({},e.props),r=e.key,a=e.ref,i=e._owner;if(n!=null){if(n.ref!==void 0&&(a=n.ref,i=bl.current),n.key!==void 0&&(r=""+n.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in n)Zd.call(n,l)&&!Jd.hasOwnProperty(l)&&(o[l]=n[l]===void 0&&s!==void 0?s[l]:n[l])}var l=arguments.length-2;if(l===1)o.children=t;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];o.children=s}return{$$typeof:Lr,type:e.type,key:r,ref:a,props:o,_owner:i}};G.createContext=function(e){return e={$$typeof:Jk,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Zk,_context:e},e.Consumer=e};G.createElement=Qd;G.createFactory=function(e){var n=Qd.bind(null,e);return n.type=e,n};G.createRef=function(){return{current:null}};G.forwardRef=function(e){return{$$typeof:Qk,render:e}};G.isValidElement=gl;G.lazy=function(e){return{$$typeof:Yk,_payload:{_status:-1,_result:e},_init:tf}};G.memo=function(e,n){return{$$typeof:Xk,type:e,compare:n===void 0?null:n}};G.startTransition=function(e){var n=za.transition;za.transition={};try{e()}finally{za.transition=n}};G.unstable_act=Gd;G.useCallback=function(e,n){return Ae.current.useCallback(e,n)};G.useContext=function(e){return Ae.current.useContext(e)};G.useDebugValue=function(){};G.useDeferredValue=function(e){return Ae.current.useDeferredValue(e)};G.useEffect=function(e,n){return Ae.current.useEffect(e,n)};G.useId=function(){return Ae.current.useId()};G.useImperativeHandle=function(e,n,t){return Ae.current.useImperativeHandle(e,n,t)};G.useInsertionEffect=function(e,n){return Ae.current.useInsertionEffect(e,n)};G.useLayoutEffect=function(e,n){return Ae.current.useLayoutEffect(e,n)};G.useMemo=function(e,n){return Ae.current.useMemo(e,n)};G.useReducer=function(e,n,t){return Ae.current.useReducer(e,n,t)};G.useRef=function(e){return Ae.current.useRef(e)};G.useState=function(e){return Ae.current.useState(e)};G.useSyncExternalStore=function(e,n,t){return Ae.current.useSyncExternalStore(e,n,t)};G.useTransition=function(){return Ae.current.useTransition()};G.version="18.3.1";Ud.exports=G;var c=Ud.exports;const Xd=$d(c),Yd=Fd({__proto__:null,default:Xd},[c]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rf=c,af=Symbol.for("react.element"),sf=Symbol.for("react.fragment"),lf=Object.prototype.hasOwnProperty,uf=rf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cf={key:!0,ref:!0,__self:!0,__source:!0};function qd(e,n,t){var o,r={},a=null,i=null;t!==void 0&&(a=""+t),n.key!==void 0&&(a=""+n.key),n.ref!==void 0&&(i=n.ref);for(o in n)lf.call(n,o)&&!cf.hasOwnProperty(o)&&(r[o]=n[o]);if(e&&e.defaultProps)for(o in n=e.defaultProps,n)r[o]===void 0&&(r[o]=n[o]);return{$$typeof:af,type:e,key:a,ref:i,props:r,_owner:uf.current}}ai.Fragment=sf;ai.jsx=qd;ai.jsxs=qd;Vd.exports=ai;var z=Vd.exports,ks={},ep={exports:{}},qe={},np={exports:{}},tp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(N,I){var $=N.length;N.push(I);e:for(;0<$;){var J=$-1>>>1,ee=N[J];if(0<r(ee,I))N[J]=I,N[$]=ee,$=J;else break e}}function t(N){return N.length===0?null:N[0]}function o(N){if(N.length===0)return null;var I=N[0],$=N.pop();if($!==I){N[0]=$;e:for(var J=0,ee=N.length,vn=ee>>>1;J<vn;){var He=2*(J+1)-1,Ze=N[He],_e=He+1,nn=N[_e];if(0>r(Ze,$))_e<ee&&0>r(nn,Ze)?(N[J]=nn,N[_e]=$,J=_e):(N[J]=Ze,N[He]=$,J=He);else if(_e<ee&&0>r(nn,$))N[J]=nn,N[_e]=$,J=_e;else break e}}return I}function r(N,I){var $=N.sortIndex-I.sortIndex;return $!==0?$:N.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,s=i.now();e.unstable_now=function(){return i.now()-s}}var l=[],u=[],d=1,p=null,v=3,j=!1,b=!1,f=!1,w=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(N){for(var I=t(u);I!==null;){if(I.callback===null)o(u);else if(I.startTime<=N)o(u),I.sortIndex=I.expirationTime,n(l,I);else break;I=t(u)}}function x(N){if(f=!1,h(N),!b)if(t(l)!==null)b=!0,Ke(P);else{var I=t(u);I!==null&&pn(x,I.startTime-N)}}function P(N,I){b=!1,f&&(f=!1,k(R),R=-1),j=!0;var $=v;try{for(h(I),p=t(l);p!==null&&(!(p.expirationTime>I)||N&&!Z());){var J=p.callback;if(typeof J=="function"){p.callback=null,v=p.priorityLevel;var ee=J(p.expirationTime<=I);I=e.unstable_now(),typeof ee=="function"?p.callback=ee:p===t(l)&&o(l),h(I)}else o(l);p=t(l)}if(p!==null)var vn=!0;else{var He=t(u);He!==null&&pn(x,He.startTime-I),vn=!1}return vn}finally{p=null,v=$,j=!1}}var M=!1,y=null,R=-1,L=5,_=-1;function Z(){return!(e.unstable_now()-_<L)}function V(){if(y!==null){var N=e.unstable_now();_=N;var I=!0;try{I=y(!0,N)}finally{I?ne():(M=!1,y=null)}}else M=!1}var ne;if(typeof m=="function")ne=function(){m(V)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,Fe=ve.port2;ve.port1.onmessage=V,ne=function(){Fe.postMessage(null)}}else ne=function(){w(V,0)};function Ke(N){y=N,M||(M=!0,ne())}function pn(N,I){R=w(function(){N(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){b||j||(b=!0,Ke(P))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return t(l)},e.unstable_next=function(N){switch(v){case 1:case 2:case 3:var I=3;break;default:I=v}var $=v;v=I;try{return N()}finally{v=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,I){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var $=v;v=N;try{return I()}finally{v=$}},e.unstable_scheduleCallback=function(N,I,$){var J=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?J+$:J):$=J,N){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=$+ee,N={id:d++,callback:I,priorityLevel:N,startTime:$,expirationTime:ee,sortIndex:-1},$>J?(N.sortIndex=$,n(u,N),t(l)===null&&N===t(u)&&(f?(k(R),R=-1):f=!0,pn(x,$-J))):(N.sortIndex=ee,n(l,N),b||j||(b=!0,Ke(P))),N},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function(N){var I=v;return function(){var $=v;v=I;try{return N.apply(this,arguments)}finally{v=$}}}})(tp);np.exports=tp;var df=np.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pf=c,Ye=df;function C(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var op=new Set,fr={};function $t(e,n){go(e,n),go(e+"Capture",n)}function go(e,n){for(fr[e]=n,e=0;e<n.length;e++)op.add(n[e])}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fs=Object.prototype.hasOwnProperty,vf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Uu={},Bu={};function mf(e){return fs.call(Bu,e)?!0:fs.call(Uu,e)?!1:vf.test(e)?Bu[e]=!0:(Uu[e]=!0,!1)}function kf(e,n,t,o){if(t!==null&&t.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return o?!1:t!==null?!t.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ff(e,n,t,o){if(n===null||typeof n>"u"||kf(e,n,t,o))return!0;if(o)return!1;if(t!==null)switch(t.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function Ie(e,n,t,o,r,a,i){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=o,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=e,this.type=n,this.sanitizeURL=a,this.removeEmptyString=i}var Ce={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ce[e]=new Ie(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];Ce[n]=new Ie(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ce[e]=new Ie(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ce[e]=new Ie(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ce[e]=new Ie(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ce[e]=new Ie(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ce[e]=new Ie(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ce[e]=new Ie(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ce[e]=new Ie(e,5,!1,e.toLowerCase(),null,!1,!1)});var wl=/[\-:]([a-z])/g;function xl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(wl,xl);Ce[n]=new Ie(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(wl,xl);Ce[n]=new Ie(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(wl,xl);Ce[n]=new Ie(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ce[e]=new Ie(e,1,!1,e.toLowerCase(),null,!1,!1)});Ce.xlinkHref=new Ie("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ce[e]=new Ie(e,1,!1,e.toLowerCase(),null,!0,!0)});function Sl(e,n,t,o){var r=Ce.hasOwnProperty(n)?Ce[n]:null;(r!==null?r.type!==0:o||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(ff(n,t,r,o)&&(t=null),o||r===null?mf(n)&&(t===null?e.removeAttribute(n):e.setAttribute(n,""+t)):r.mustUseProperty?e[r.propertyName]=t===null?r.type===3?!1:"":t:(n=r.attributeName,o=r.attributeNamespace,t===null?e.removeAttribute(n):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,o?e.setAttributeNS(o,n,t):e.setAttribute(n,t))))}var Bn=pf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gr=Symbol.for("react.element"),Yt=Symbol.for("react.portal"),qt=Symbol.for("react.fragment"),El=Symbol.for("react.strict_mode"),hs=Symbol.for("react.profiler"),rp=Symbol.for("react.provider"),ap=Symbol.for("react.context"),Pl=Symbol.for("react.forward_ref"),ys=Symbol.for("react.suspense"),zs=Symbol.for("react.suspense_list"),Cl=Symbol.for("react.memo"),et=Symbol.for("react.lazy"),ip=Symbol.for("react.offscreen"),Wu=Symbol.iterator;function Vo(e){return e===null||typeof e!="object"?null:(e=Wu&&e[Wu]||e["@@iterator"],typeof e=="function"?e:null)}var pe=Object.assign,Ti;function er(e){if(Ti===void 0)try{throw Error()}catch(t){var n=t.stack.trim().match(/\n( *(at )?)/);Ti=n&&n[1]||""}return`
`+Ti+e}var Mi=!1;function _i(e,n){if(!e||Mi)return"";Mi=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(u){var o=u}Reflect.construct(e,[],n)}else{try{n.call()}catch(u){o=u}e.call(n.prototype)}else{try{throw Error()}catch(u){o=u}e()}}catch(u){if(u&&o&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),a=o.stack.split(`
`),i=r.length-1,s=a.length-1;1<=i&&0<=s&&r[i]!==a[s];)s--;for(;1<=i&&0<=s;i--,s--)if(r[i]!==a[s]){if(i!==1||s!==1)do if(i--,s--,0>s||r[i]!==a[s]){var l=`
`+r[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=i&&0<=s);break}}}finally{Mi=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?er(e):""}function hf(e){switch(e.tag){case 5:return er(e.type);case 16:return er("Lazy");case 13:return er("Suspense");case 19:return er("SuspenseList");case 0:case 2:case 15:return e=_i(e.type,!1),e;case 11:return e=_i(e.type.render,!1),e;case 1:return e=_i(e.type,!0),e;default:return""}}function js(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qt:return"Fragment";case Yt:return"Portal";case hs:return"Profiler";case El:return"StrictMode";case ys:return"Suspense";case zs:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ap:return(e.displayName||"Context")+".Consumer";case rp:return(e._context.displayName||"Context")+".Provider";case Pl:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Cl:return n=e.displayName||null,n!==null?n:js(e.type)||"Memo";case et:n=e._payload,e=e._init;try{return js(e(n))}catch{}}return null}function yf(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return js(n);case 8:return n===El?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function kt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sp(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function zf(e){var n=sp(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),o=""+e[n];if(!e.hasOwnProperty(n)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,a=t.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return r.call(this)},set:function(i){o=""+i,a.call(this,i)}}),Object.defineProperty(e,n,{enumerable:t.enumerable}),{getValue:function(){return o},setValue:function(i){o=""+i},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Xr(e){e._valueTracker||(e._valueTracker=zf(e))}function lp(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var t=n.getValue(),o="";return e&&(o=sp(e)?e.checked?"true":"false":e.value),e=o,e!==t?(n.setValue(e),!0):!1}function Ma(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function bs(e,n){var t=n.checked;return pe({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??e._wrapperState.initialChecked})}function Ku(e,n){var t=n.defaultValue==null?"":n.defaultValue,o=n.checked!=null?n.checked:n.defaultChecked;t=kt(n.value!=null?n.value:t),e._wrapperState={initialChecked:o,initialValue:t,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function up(e,n){n=n.checked,n!=null&&Sl(e,"checked",n,!1)}function gs(e,n){up(e,n);var t=kt(n.value),o=n.type;if(t!=null)o==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?ws(e,n.type,t):n.hasOwnProperty("defaultValue")&&ws(e,n.type,kt(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function Hu(e,n,t){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var o=n.type;if(!(o!=="submit"&&o!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,t||n===e.value||(e.value=n),e.defaultValue=n}t=e.name,t!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,t!==""&&(e.name=t)}function ws(e,n,t){(n!=="number"||Ma(e.ownerDocument)!==e)&&(t==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var nr=Array.isArray;function vo(e,n,t,o){if(e=e.options,n){n={};for(var r=0;r<t.length;r++)n["$"+t[r]]=!0;for(t=0;t<e.length;t++)r=n.hasOwnProperty("$"+e[t].value),e[t].selected!==r&&(e[t].selected=r),r&&o&&(e[t].defaultSelected=!0)}else{for(t=""+kt(t),n=null,r=0;r<e.length;r++){if(e[r].value===t){e[r].selected=!0,o&&(e[r].defaultSelected=!0);return}n!==null||e[r].disabled||(n=e[r])}n!==null&&(n.selected=!0)}}function xs(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(C(91));return pe({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zu(e,n){var t=n.value;if(t==null){if(t=n.children,n=n.defaultValue,t!=null){if(n!=null)throw Error(C(92));if(nr(t)){if(1<t.length)throw Error(C(93));t=t[0]}n=t}n==null&&(n=""),t=n}e._wrapperState={initialValue:kt(t)}}function cp(e,n){var t=kt(n.value),o=kt(n.defaultValue);t!=null&&(t=""+t,t!==e.value&&(e.value=t),n.defaultValue==null&&e.defaultValue!==t&&(e.defaultValue=t)),o!=null&&(e.defaultValue=""+o)}function Ju(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function dp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ss(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?dp(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yr,pp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,t,o,r){MSApp.execUnsafeLocalFunction(function(){return e(n,t,o,r)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Yr=Yr||document.createElement("div"),Yr.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Yr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function hr(e,n){if(n){var t=e.firstChild;if(t&&t===e.lastChild&&t.nodeType===3){t.nodeValue=n;return}}e.textContent=n}var rr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jf=["Webkit","ms","Moz","O"];Object.keys(rr).forEach(function(e){jf.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),rr[n]=rr[e]})});function vp(e,n,t){return n==null||typeof n=="boolean"||n===""?"":t||typeof n!="number"||n===0||rr.hasOwnProperty(e)&&rr[e]?(""+n).trim():n+"px"}function mp(e,n){e=e.style;for(var t in n)if(n.hasOwnProperty(t)){var o=t.indexOf("--")===0,r=vp(t,n[t],o);t==="float"&&(t="cssFloat"),o?e.setProperty(t,r):e[t]=r}}var bf=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Es(e,n){if(n){if(bf[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(C(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(C(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(C(61))}if(n.style!=null&&typeof n.style!="object")throw Error(C(62))}}function Ps(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cs=null;function Rl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Rs=null,mo=null,ko=null;function Qu(e){if(e=Fr(e)){if(typeof Rs!="function")throw Error(C(280));var n=e.stateNode;n&&(n=ci(n),Rs(e.stateNode,e.type,n))}}function kp(e){mo?ko?ko.push(e):ko=[e]:mo=e}function fp(){if(mo){var e=mo,n=ko;if(ko=mo=null,Qu(e),n)for(e=0;e<n.length;e++)Qu(n[e])}}function hp(e,n){return e(n)}function yp(){}var Oi=!1;function zp(e,n,t){if(Oi)return e(n,t);Oi=!0;try{return hp(e,n,t)}finally{Oi=!1,(mo!==null||ko!==null)&&(yp(),fp())}}function yr(e,n){var t=e.stateNode;if(t===null)return null;var o=ci(t);if(o===null)return null;t=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(t&&typeof t!="function")throw Error(C(231,n,typeof t));return t}var Ns=!1;if(Fn)try{var Uo={};Object.defineProperty(Uo,"passive",{get:function(){Ns=!0}}),window.addEventListener("test",Uo,Uo),window.removeEventListener("test",Uo,Uo)}catch{Ns=!1}function gf(e,n,t,o,r,a,i,s,l){var u=Array.prototype.slice.call(arguments,3);try{n.apply(t,u)}catch(d){this.onError(d)}}var ar=!1,_a=null,Oa=!1,Ts=null,wf={onError:function(e){ar=!0,_a=e}};function xf(e,n,t,o,r,a,i,s,l){ar=!1,_a=null,gf.apply(wf,arguments)}function Sf(e,n,t,o,r,a,i,s,l){if(xf.apply(this,arguments),ar){if(ar){var u=_a;ar=!1,_a=null}else throw Error(C(198));Oa||(Oa=!0,Ts=u)}}function Vt(e){var n=e,t=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(t=n.return),e=n.return;while(e)}return n.tag===3?t:null}function jp(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Gu(e){if(Vt(e)!==e)throw Error(C(188))}function Ef(e){var n=e.alternate;if(!n){if(n=Vt(e),n===null)throw Error(C(188));return n!==e?null:e}for(var t=e,o=n;;){var r=t.return;if(r===null)break;var a=r.alternate;if(a===null){if(o=r.return,o!==null){t=o;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===t)return Gu(r),e;if(a===o)return Gu(r),n;a=a.sibling}throw Error(C(188))}if(t.return!==o.return)t=r,o=a;else{for(var i=!1,s=r.child;s;){if(s===t){i=!0,t=r,o=a;break}if(s===o){i=!0,o=r,t=a;break}s=s.sibling}if(!i){for(s=a.child;s;){if(s===t){i=!0,t=a,o=r;break}if(s===o){i=!0,o=a,t=r;break}s=s.sibling}if(!i)throw Error(C(189))}}if(t.alternate!==o)throw Error(C(190))}if(t.tag!==3)throw Error(C(188));return t.stateNode.current===t?e:n}function bp(e){return e=Ef(e),e!==null?gp(e):null}function gp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=gp(e);if(n!==null)return n;e=e.sibling}return null}var wp=Ye.unstable_scheduleCallback,Xu=Ye.unstable_cancelCallback,Pf=Ye.unstable_shouldYield,Cf=Ye.unstable_requestPaint,ke=Ye.unstable_now,Rf=Ye.unstable_getCurrentPriorityLevel,Nl=Ye.unstable_ImmediatePriority,xp=Ye.unstable_UserBlockingPriority,Da=Ye.unstable_NormalPriority,Nf=Ye.unstable_LowPriority,Sp=Ye.unstable_IdlePriority,ii=null,Rn=null;function Tf(e){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(ii,e,void 0,(e.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:Of,Mf=Math.log,_f=Math.LN2;function Of(e){return e>>>=0,e===0?32:31-(Mf(e)/_f|0)|0}var qr=64,ea=4194304;function tr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function La(e,n){var t=e.pendingLanes;if(t===0)return 0;var o=0,r=e.suspendedLanes,a=e.pingedLanes,i=t&268435455;if(i!==0){var s=i&~r;s!==0?o=tr(s):(a&=i,a!==0&&(o=tr(a)))}else i=t&~r,i!==0?o=tr(i):a!==0&&(o=tr(a));if(o===0)return 0;if(n!==0&&n!==o&&!(n&r)&&(r=o&-o,a=n&-n,r>=a||r===16&&(a&4194240)!==0))return n;if(o&4&&(o|=t&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=o;0<n;)t=31-zn(n),r=1<<t,o|=e[t],n&=~r;return o}function Df(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lf(e,n){for(var t=e.suspendedLanes,o=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-zn(a),s=1<<i,l=r[i];l===-1?(!(s&t)||s&o)&&(r[i]=Df(s,n)):l<=n&&(e.expiredLanes|=s),a&=~s}}function Ms(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ep(){var e=qr;return qr<<=1,!(qr&4194240)&&(qr=64),e}function Di(e){for(var n=[],t=0;31>t;t++)n.push(e);return n}function Ar(e,n,t){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-zn(n),e[n]=t}function Af(e,n){var t=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<t;){var r=31-zn(t),a=1<<r;n[r]=0,o[r]=-1,e[r]=-1,t&=~a}}function Tl(e,n){var t=e.entangledLanes|=n;for(e=e.entanglements;t;){var o=31-zn(t),r=1<<o;r&n|e[o]&n&&(e[o]|=n),t&=~r}}var q=0;function Pp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Cp,Ml,Rp,Np,Tp,_s=!1,na=[],st=null,lt=null,ut=null,zr=new Map,jr=new Map,tt=[],If="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yu(e,n){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":lt=null;break;case"mouseover":case"mouseout":ut=null;break;case"pointerover":case"pointerout":zr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":jr.delete(n.pointerId)}}function Bo(e,n,t,o,r,a){return e===null||e.nativeEvent!==a?(e={blockedOn:n,domEventName:t,eventSystemFlags:o,nativeEvent:a,targetContainers:[r]},n!==null&&(n=Fr(n),n!==null&&Ml(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,r!==null&&n.indexOf(r)===-1&&n.push(r),e)}function Ff(e,n,t,o,r){switch(n){case"focusin":return st=Bo(st,e,n,t,o,r),!0;case"dragenter":return lt=Bo(lt,e,n,t,o,r),!0;case"mouseover":return ut=Bo(ut,e,n,t,o,r),!0;case"pointerover":var a=r.pointerId;return zr.set(a,Bo(zr.get(a)||null,e,n,t,o,r)),!0;case"gotpointercapture":return a=r.pointerId,jr.set(a,Bo(jr.get(a)||null,e,n,t,o,r)),!0}return!1}function Mp(e){var n=xt(e.target);if(n!==null){var t=Vt(n);if(t!==null){if(n=t.tag,n===13){if(n=jp(t),n!==null){e.blockedOn=n,Tp(e.priority,function(){Rp(t)});return}}else if(n===3&&t.stateNode.current.memoizedState.isDehydrated){e.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ja(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var t=Os(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(t===null){t=e.nativeEvent;var o=new t.constructor(t.type,t);Cs=o,t.target.dispatchEvent(o),Cs=null}else return n=Fr(t),n!==null&&Ml(n),e.blockedOn=t,!1;n.shift()}return!0}function qu(e,n,t){ja(e)&&t.delete(n)}function $f(){_s=!1,st!==null&&ja(st)&&(st=null),lt!==null&&ja(lt)&&(lt=null),ut!==null&&ja(ut)&&(ut=null),zr.forEach(qu),jr.forEach(qu)}function Wo(e,n){e.blockedOn===n&&(e.blockedOn=null,_s||(_s=!0,Ye.unstable_scheduleCallback(Ye.unstable_NormalPriority,$f)))}function br(e){function n(r){return Wo(r,e)}if(0<na.length){Wo(na[0],e);for(var t=1;t<na.length;t++){var o=na[t];o.blockedOn===e&&(o.blockedOn=null)}}for(st!==null&&Wo(st,e),lt!==null&&Wo(lt,e),ut!==null&&Wo(ut,e),zr.forEach(n),jr.forEach(n),t=0;t<tt.length;t++)o=tt[t],o.blockedOn===e&&(o.blockedOn=null);for(;0<tt.length&&(t=tt[0],t.blockedOn===null);)Mp(t),t.blockedOn===null&&tt.shift()}var fo=Bn.ReactCurrentBatchConfig,Aa=!0;function Vf(e,n,t,o){var r=q,a=fo.transition;fo.transition=null;try{q=1,_l(e,n,t,o)}finally{q=r,fo.transition=a}}function Uf(e,n,t,o){var r=q,a=fo.transition;fo.transition=null;try{q=4,_l(e,n,t,o)}finally{q=r,fo.transition=a}}function _l(e,n,t,o){if(Aa){var r=Os(e,n,t,o);if(r===null)Ki(e,n,o,Ia,t),Yu(e,o);else if(Ff(r,e,n,t,o))o.stopPropagation();else if(Yu(e,o),n&4&&-1<If.indexOf(e)){for(;r!==null;){var a=Fr(r);if(a!==null&&Cp(a),a=Os(e,n,t,o),a===null&&Ki(e,n,o,Ia,t),a===r)break;r=a}r!==null&&o.stopPropagation()}else Ki(e,n,o,null,t)}}var Ia=null;function Os(e,n,t,o){if(Ia=null,e=Rl(o),e=xt(e),e!==null)if(n=Vt(e),n===null)e=null;else if(t=n.tag,t===13){if(e=jp(n),e!==null)return e;e=null}else if(t===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Ia=e,null}function _p(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rf()){case Nl:return 1;case xp:return 4;case Da:case Nf:return 16;case Sp:return 536870912;default:return 16}default:return 16}}var rt=null,Ol=null,ba=null;function Op(){if(ba)return ba;var e,n=Ol,t=n.length,o,r="value"in rt?rt.value:rt.textContent,a=r.length;for(e=0;e<t&&n[e]===r[e];e++);var i=t-e;for(o=1;o<=i&&n[t-o]===r[a-o];o++);return ba=r.slice(e,1<o?1-o:void 0)}function ga(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ta(){return!0}function ec(){return!1}function en(e){function n(t,o,r,a,i){this._reactName=t,this._targetInst=r,this.type=o,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ta:ec,this.isPropagationStopped=ec,this}return pe(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=ta)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=ta)},persist:function(){},isPersistent:ta}),n}var No={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dl=en(No),Ir=pe({},No,{view:0,detail:0}),Bf=en(Ir),Li,Ai,Ko,si=pe({},Ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ll,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ko&&(Ko&&e.type==="mousemove"?(Li=e.screenX-Ko.screenX,Ai=e.screenY-Ko.screenY):Ai=Li=0,Ko=e),Li)},movementY:function(e){return"movementY"in e?e.movementY:Ai}}),nc=en(si),Wf=pe({},si,{dataTransfer:0}),Kf=en(Wf),Hf=pe({},Ir,{relatedTarget:0}),Ii=en(Hf),Zf=pe({},No,{animationName:0,elapsedTime:0,pseudoElement:0}),Jf=en(Zf),Qf=pe({},No,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Gf=en(Qf),Xf=pe({},No,{data:0}),tc=en(Xf),Yf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nh(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=eh[e])?!!n[e]:!1}function Ll(){return nh}var th=pe({},Ir,{key:function(e){if(e.key){var n=Yf[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ga(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ll,charCode:function(e){return e.type==="keypress"?ga(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ga(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oh=en(th),rh=pe({},si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oc=en(rh),ah=pe({},Ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ll}),ih=en(ah),sh=pe({},No,{propertyName:0,elapsedTime:0,pseudoElement:0}),lh=en(sh),uh=pe({},si,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ch=en(uh),dh=[9,13,27,32],Al=Fn&&"CompositionEvent"in window,ir=null;Fn&&"documentMode"in document&&(ir=document.documentMode);var ph=Fn&&"TextEvent"in window&&!ir,Dp=Fn&&(!Al||ir&&8<ir&&11>=ir),rc=" ",ac=!1;function Lp(e,n){switch(e){case"keyup":return dh.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ap(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var eo=!1;function vh(e,n){switch(e){case"compositionend":return Ap(n);case"keypress":return n.which!==32?null:(ac=!0,rc);case"textInput":return e=n.data,e===rc&&ac?null:e;default:return null}}function mh(e,n){if(eo)return e==="compositionend"||!Al&&Lp(e,n)?(e=Op(),ba=Ol=rt=null,eo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Dp&&n.locale!=="ko"?null:n.data;default:return null}}var kh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ic(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!kh[e.type]:n==="textarea"}function Ip(e,n,t,o){kp(o),n=Fa(n,"onChange"),0<n.length&&(t=new Dl("onChange","change",null,t,o),e.push({event:t,listeners:n}))}var sr=null,gr=null;function fh(e){Qp(e,0)}function li(e){var n=oo(e);if(lp(n))return e}function hh(e,n){if(e==="change")return n}var Fp=!1;if(Fn){var Fi;if(Fn){var $i="oninput"in document;if(!$i){var sc=document.createElement("div");sc.setAttribute("oninput","return;"),$i=typeof sc.oninput=="function"}Fi=$i}else Fi=!1;Fp=Fi&&(!document.documentMode||9<document.documentMode)}function lc(){sr&&(sr.detachEvent("onpropertychange",$p),gr=sr=null)}function $p(e){if(e.propertyName==="value"&&li(gr)){var n=[];Ip(n,gr,e,Rl(e)),zp(fh,n)}}function yh(e,n,t){e==="focusin"?(lc(),sr=n,gr=t,sr.attachEvent("onpropertychange",$p)):e==="focusout"&&lc()}function zh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return li(gr)}function jh(e,n){if(e==="click")return li(n)}function bh(e,n){if(e==="input"||e==="change")return li(n)}function gh(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var bn=typeof Object.is=="function"?Object.is:gh;function wr(e,n){if(bn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var t=Object.keys(e),o=Object.keys(n);if(t.length!==o.length)return!1;for(o=0;o<t.length;o++){var r=t[o];if(!fs.call(n,r)||!bn(e[r],n[r]))return!1}return!0}function uc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cc(e,n){var t=uc(e);e=0;for(var o;t;){if(t.nodeType===3){if(o=e+t.textContent.length,e<=n&&o>=n)return{node:t,offset:n-e};e=o}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=uc(t)}}function Vp(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Vp(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Up(){for(var e=window,n=Ma();n instanceof e.HTMLIFrameElement;){try{var t=typeof n.contentWindow.location.href=="string"}catch{t=!1}if(t)e=n.contentWindow;else break;n=Ma(e.document)}return n}function Il(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function wh(e){var n=Up(),t=e.focusedElem,o=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&Vp(t.ownerDocument.documentElement,t)){if(o!==null&&Il(t)){if(n=o.start,e=o.end,e===void 0&&(e=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(e,t.value.length);else if(e=(n=t.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var r=t.textContent.length,a=Math.min(o.start,r);o=o.end===void 0?a:Math.min(o.end,r),!e.extend&&a>o&&(r=o,o=a,a=r),r=cc(t,a);var i=cc(t,o);r&&i&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(n=n.createRange(),n.setStart(r.node,r.offset),e.removeAllRanges(),a>o?(e.addRange(n),e.extend(i.node,i.offset)):(n.setEnd(i.node,i.offset),e.addRange(n)))}}for(n=[],e=t;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<n.length;t++)e=n[t],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var xh=Fn&&"documentMode"in document&&11>=document.documentMode,no=null,Ds=null,lr=null,Ls=!1;function dc(e,n,t){var o=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Ls||no==null||no!==Ma(o)||(o=no,"selectionStart"in o&&Il(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),lr&&wr(lr,o)||(lr=o,o=Fa(Ds,"onSelect"),0<o.length&&(n=new Dl("onSelect","select",null,n,t),e.push({event:n,listeners:o}),n.target=no)))}function oa(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit"+e]="webkit"+n,t["Moz"+e]="moz"+n,t}var to={animationend:oa("Animation","AnimationEnd"),animationiteration:oa("Animation","AnimationIteration"),animationstart:oa("Animation","AnimationStart"),transitionend:oa("Transition","TransitionEnd")},Vi={},Bp={};Fn&&(Bp=document.createElement("div").style,"AnimationEvent"in window||(delete to.animationend.animation,delete to.animationiteration.animation,delete to.animationstart.animation),"TransitionEvent"in window||delete to.transitionend.transition);function ui(e){if(Vi[e])return Vi[e];if(!to[e])return e;var n=to[e],t;for(t in n)if(n.hasOwnProperty(t)&&t in Bp)return Vi[e]=n[t];return e}var Wp=ui("animationend"),Kp=ui("animationiteration"),Hp=ui("animationstart"),Zp=ui("transitionend"),Jp=new Map,pc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yt(e,n){Jp.set(e,n),$t(n,[e])}for(var Ui=0;Ui<pc.length;Ui++){var Bi=pc[Ui],Sh=Bi.toLowerCase(),Eh=Bi[0].toUpperCase()+Bi.slice(1);yt(Sh,"on"+Eh)}yt(Wp,"onAnimationEnd");yt(Kp,"onAnimationIteration");yt(Hp,"onAnimationStart");yt("dblclick","onDoubleClick");yt("focusin","onFocus");yt("focusout","onBlur");yt(Zp,"onTransitionEnd");go("onMouseEnter",["mouseout","mouseover"]);go("onMouseLeave",["mouseout","mouseover"]);go("onPointerEnter",["pointerout","pointerover"]);go("onPointerLeave",["pointerout","pointerover"]);$t("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$t("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$t("onBeforeInput",["compositionend","keypress","textInput","paste"]);$t("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$t("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$t("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ph=new Set("cancel close invalid load scroll toggle".split(" ").concat(or));function vc(e,n,t){var o=e.type||"unknown-event";e.currentTarget=t,Sf(o,n,void 0,e),e.currentTarget=null}function Qp(e,n){n=(n&4)!==0;for(var t=0;t<e.length;t++){var o=e[t],r=o.event;o=o.listeners;e:{var a=void 0;if(n)for(var i=o.length-1;0<=i;i--){var s=o[i],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&r.isPropagationStopped())break e;vc(r,s,u),a=l}else for(i=0;i<o.length;i++){if(s=o[i],l=s.instance,u=s.currentTarget,s=s.listener,l!==a&&r.isPropagationStopped())break e;vc(r,s,u),a=l}}}if(Oa)throw e=Ts,Oa=!1,Ts=null,e}function re(e,n){var t=n[Vs];t===void 0&&(t=n[Vs]=new Set);var o=e+"__bubble";t.has(o)||(Gp(n,e,2,!1),t.add(o))}function Wi(e,n,t){var o=0;n&&(o|=4),Gp(t,e,o,n)}var ra="_reactListening"+Math.random().toString(36).slice(2);function xr(e){if(!e[ra]){e[ra]=!0,op.forEach(function(t){t!=="selectionchange"&&(Ph.has(t)||Wi(t,!1,e),Wi(t,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ra]||(n[ra]=!0,Wi("selectionchange",!1,n))}}function Gp(e,n,t,o){switch(_p(n)){case 1:var r=Vf;break;case 4:r=Uf;break;default:r=_l}t=r.bind(null,n,t,e),r=void 0,!Ns||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(r=!0),o?r!==void 0?e.addEventListener(n,t,{capture:!0,passive:r}):e.addEventListener(n,t,!0):r!==void 0?e.addEventListener(n,t,{passive:r}):e.addEventListener(n,t,!1)}function Ki(e,n,t,o,r){var a=o;if(!(n&1)&&!(n&2)&&o!==null)e:for(;;){if(o===null)return;var i=o.tag;if(i===3||i===4){var s=o.stateNode.containerInfo;if(s===r||s.nodeType===8&&s.parentNode===r)break;if(i===4)for(i=o.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;i=i.return}for(;s!==null;){if(i=xt(s),i===null)return;if(l=i.tag,l===5||l===6){o=a=i;continue e}s=s.parentNode}}o=o.return}zp(function(){var u=a,d=Rl(t),p=[];e:{var v=Jp.get(e);if(v!==void 0){var j=Dl,b=e;switch(e){case"keypress":if(ga(t)===0)break e;case"keydown":case"keyup":j=oh;break;case"focusin":b="focus",j=Ii;break;case"focusout":b="blur",j=Ii;break;case"beforeblur":case"afterblur":j=Ii;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=nc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Kf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=ih;break;case Wp:case Kp:case Hp:j=Jf;break;case Zp:j=lh;break;case"scroll":j=Bf;break;case"wheel":j=ch;break;case"copy":case"cut":case"paste":j=Gf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=oc}var f=(n&4)!==0,w=!f&&e==="scroll",k=f?v!==null?v+"Capture":null:v;f=[];for(var m=u,h;m!==null;){h=m;var x=h.stateNode;if(h.tag===5&&x!==null&&(h=x,k!==null&&(x=yr(m,k),x!=null&&f.push(Sr(m,x,h)))),w)break;m=m.return}0<f.length&&(v=new j(v,b,null,t,d),p.push({event:v,listeners:f}))}}if(!(n&7)){e:{if(v=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",v&&t!==Cs&&(b=t.relatedTarget||t.fromElement)&&(xt(b)||b[$n]))break e;if((j||v)&&(v=d.window===d?d:(v=d.ownerDocument)?v.defaultView||v.parentWindow:window,j?(b=t.relatedTarget||t.toElement,j=u,b=b?xt(b):null,b!==null&&(w=Vt(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(j=null,b=u),j!==b)){if(f=nc,x="onMouseLeave",k="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(f=oc,x="onPointerLeave",k="onPointerEnter",m="pointer"),w=j==null?v:oo(j),h=b==null?v:oo(b),v=new f(x,m+"leave",j,t,d),v.target=w,v.relatedTarget=h,x=null,xt(d)===u&&(f=new f(k,m+"enter",b,t,d),f.target=h,f.relatedTarget=w,x=f),w=x,j&&b)n:{for(f=j,k=b,m=0,h=f;h;h=Zt(h))m++;for(h=0,x=k;x;x=Zt(x))h++;for(;0<m-h;)f=Zt(f),m--;for(;0<h-m;)k=Zt(k),h--;for(;m--;){if(f===k||k!==null&&f===k.alternate)break n;f=Zt(f),k=Zt(k)}f=null}else f=null;j!==null&&mc(p,v,j,f,!1),b!==null&&w!==null&&mc(p,w,b,f,!0)}}e:{if(v=u?oo(u):window,j=v.nodeName&&v.nodeName.toLowerCase(),j==="select"||j==="input"&&v.type==="file")var P=hh;else if(ic(v))if(Fp)P=bh;else{P=zh;var M=yh}else(j=v.nodeName)&&j.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(P=jh);if(P&&(P=P(e,u))){Ip(p,P,t,d);break e}M&&M(e,v,u),e==="focusout"&&(M=v._wrapperState)&&M.controlled&&v.type==="number"&&ws(v,"number",v.value)}switch(M=u?oo(u):window,e){case"focusin":(ic(M)||M.contentEditable==="true")&&(no=M,Ds=u,lr=null);break;case"focusout":lr=Ds=no=null;break;case"mousedown":Ls=!0;break;case"contextmenu":case"mouseup":case"dragend":Ls=!1,dc(p,t,d);break;case"selectionchange":if(xh)break;case"keydown":case"keyup":dc(p,t,d)}var y;if(Al)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else eo?Lp(e,t)&&(R="onCompositionEnd"):e==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(Dp&&t.locale!=="ko"&&(eo||R!=="onCompositionStart"?R==="onCompositionEnd"&&eo&&(y=Op()):(rt=d,Ol="value"in rt?rt.value:rt.textContent,eo=!0)),M=Fa(u,R),0<M.length&&(R=new tc(R,e,null,t,d),p.push({event:R,listeners:M}),y?R.data=y:(y=Ap(t),y!==null&&(R.data=y)))),(y=ph?vh(e,t):mh(e,t))&&(u=Fa(u,"onBeforeInput"),0<u.length&&(d=new tc("onBeforeInput","beforeinput",null,t,d),p.push({event:d,listeners:u}),d.data=y))}Qp(p,n)})}function Sr(e,n,t){return{instance:e,listener:n,currentTarget:t}}function Fa(e,n){for(var t=n+"Capture",o=[];e!==null;){var r=e,a=r.stateNode;r.tag===5&&a!==null&&(r=a,a=yr(e,t),a!=null&&o.unshift(Sr(e,a,r)),a=yr(e,n),a!=null&&o.push(Sr(e,a,r))),e=e.return}return o}function Zt(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function mc(e,n,t,o,r){for(var a=n._reactName,i=[];t!==null&&t!==o;){var s=t,l=s.alternate,u=s.stateNode;if(l!==null&&l===o)break;s.tag===5&&u!==null&&(s=u,r?(l=yr(t,a),l!=null&&i.unshift(Sr(t,l,s))):r||(l=yr(t,a),l!=null&&i.push(Sr(t,l,s)))),t=t.return}i.length!==0&&e.push({event:n,listeners:i})}var Ch=/\r\n?/g,Rh=/\u0000|\uFFFD/g;function kc(e){return(typeof e=="string"?e:""+e).replace(Ch,`
`).replace(Rh,"")}function aa(e,n,t){if(n=kc(n),kc(e)!==n&&t)throw Error(C(425))}function $a(){}var As=null,Is=null;function Fs(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var $s=typeof setTimeout=="function"?setTimeout:void 0,Nh=typeof clearTimeout=="function"?clearTimeout:void 0,fc=typeof Promise=="function"?Promise:void 0,Th=typeof queueMicrotask=="function"?queueMicrotask:typeof fc<"u"?function(e){return fc.resolve(null).then(e).catch(Mh)}:$s;function Mh(e){setTimeout(function(){throw e})}function Hi(e,n){var t=n,o=0;do{var r=t.nextSibling;if(e.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(o===0){e.removeChild(r),br(n);return}o--}else t!=="$"&&t!=="$?"&&t!=="$!"||o++;t=r}while(t);br(n)}function ct(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function hc(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var t=e.data;if(t==="$"||t==="$!"||t==="$?"){if(n===0)return e;n--}else t==="/$"&&n++}e=e.previousSibling}return null}var To=Math.random().toString(36).slice(2),En="__reactFiber$"+To,Er="__reactProps$"+To,$n="__reactContainer$"+To,Vs="__reactEvents$"+To,_h="__reactListeners$"+To,Oh="__reactHandles$"+To;function xt(e){var n=e[En];if(n)return n;for(var t=e.parentNode;t;){if(n=t[$n]||t[En]){if(t=n.alternate,n.child!==null||t!==null&&t.child!==null)for(e=hc(e);e!==null;){if(t=e[En])return t;e=hc(e)}return n}e=t,t=e.parentNode}return null}function Fr(e){return e=e[En]||e[$n],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function oo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(C(33))}function ci(e){return e[Er]||null}var Us=[],ro=-1;function zt(e){return{current:e}}function ae(e){0>ro||(e.current=Us[ro],Us[ro]=null,ro--)}function te(e,n){ro++,Us[ro]=e.current,e.current=n}var ft={},Me=zt(ft),Ue=zt(!1),Mt=ft;function wo(e,n){var t=e.type.contextTypes;if(!t)return ft;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===n)return o.__reactInternalMemoizedMaskedChildContext;var r={},a;for(a in t)r[a]=n[a];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=r),r}function Be(e){return e=e.childContextTypes,e!=null}function Va(){ae(Ue),ae(Me)}function yc(e,n,t){if(Me.current!==ft)throw Error(C(168));te(Me,n),te(Ue,t)}function Xp(e,n,t){var o=e.stateNode;if(n=n.childContextTypes,typeof o.getChildContext!="function")return t;o=o.getChildContext();for(var r in o)if(!(r in n))throw Error(C(108,yf(e)||"Unknown",r));return pe({},t,o)}function Ua(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ft,Mt=Me.current,te(Me,e),te(Ue,Ue.current),!0}function zc(e,n,t){var o=e.stateNode;if(!o)throw Error(C(169));t?(e=Xp(e,n,Mt),o.__reactInternalMemoizedMergedChildContext=e,ae(Ue),ae(Me),te(Me,e)):ae(Ue),te(Ue,t)}var On=null,di=!1,Zi=!1;function Yp(e){On===null?On=[e]:On.push(e)}function Dh(e){di=!0,Yp(e)}function jt(){if(!Zi&&On!==null){Zi=!0;var e=0,n=q;try{var t=On;for(q=1;e<t.length;e++){var o=t[e];do o=o(!0);while(o!==null)}On=null,di=!1}catch(r){throw On!==null&&(On=On.slice(e+1)),wp(Nl,jt),r}finally{q=n,Zi=!1}}return null}var ao=[],io=0,Ba=null,Wa=0,rn=[],an=0,_t=null,Dn=1,Ln="";function gt(e,n){ao[io++]=Wa,ao[io++]=Ba,Ba=e,Wa=n}function qp(e,n,t){rn[an++]=Dn,rn[an++]=Ln,rn[an++]=_t,_t=e;var o=Dn;e=Ln;var r=32-zn(o)-1;o&=~(1<<r),t+=1;var a=32-zn(n)+r;if(30<a){var i=r-r%5;a=(o&(1<<i)-1).toString(32),o>>=i,r-=i,Dn=1<<32-zn(n)+r|t<<r|o,Ln=a+e}else Dn=1<<a|t<<r|o,Ln=e}function Fl(e){e.return!==null&&(gt(e,1),qp(e,1,0))}function $l(e){for(;e===Ba;)Ba=ao[--io],ao[io]=null,Wa=ao[--io],ao[io]=null;for(;e===_t;)_t=rn[--an],rn[an]=null,Ln=rn[--an],rn[an]=null,Dn=rn[--an],rn[an]=null}var Xe=null,Ge=null,ue=!1,yn=null;function ev(e,n){var t=ln(5,null,null,0);t.elementType="DELETED",t.stateNode=n,t.return=e,n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)}function jc(e,n){switch(e.tag){case 5:var t=e.type;return n=n.nodeType!==1||t.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,Xe=e,Ge=ct(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,Xe=e,Ge=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(t=_t!==null?{id:Dn,overflow:Ln}:null,e.memoizedState={dehydrated:n,treeContext:t,retryLane:1073741824},t=ln(18,null,null,0),t.stateNode=n,t.return=e,e.child=t,Xe=e,Ge=null,!0):!1;default:return!1}}function Bs(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ws(e){if(ue){var n=Ge;if(n){var t=n;if(!jc(e,n)){if(Bs(e))throw Error(C(418));n=ct(t.nextSibling);var o=Xe;n&&jc(e,n)?ev(o,t):(e.flags=e.flags&-4097|2,ue=!1,Xe=e)}}else{if(Bs(e))throw Error(C(418));e.flags=e.flags&-4097|2,ue=!1,Xe=e}}}function bc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xe=e}function ia(e){if(e!==Xe)return!1;if(!ue)return bc(e),ue=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!Fs(e.type,e.memoizedProps)),n&&(n=Ge)){if(Bs(e))throw nv(),Error(C(418));for(;n;)ev(e,n),n=ct(n.nextSibling)}if(bc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(C(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var t=e.data;if(t==="/$"){if(n===0){Ge=ct(e.nextSibling);break e}n--}else t!=="$"&&t!=="$!"&&t!=="$?"||n++}e=e.nextSibling}Ge=null}}else Ge=Xe?ct(e.stateNode.nextSibling):null;return!0}function nv(){for(var e=Ge;e;)e=ct(e.nextSibling)}function xo(){Ge=Xe=null,ue=!1}function Vl(e){yn===null?yn=[e]:yn.push(e)}var Lh=Bn.ReactCurrentBatchConfig;function Ho(e,n,t){if(e=t.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(C(309));var o=t.stateNode}if(!o)throw Error(C(147,e));var r=o,a=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===a?n.ref:(n=function(i){var s=r.refs;i===null?delete s[a]:s[a]=i},n._stringRef=a,n)}if(typeof e!="string")throw Error(C(284));if(!t._owner)throw Error(C(290,e))}return e}function sa(e,n){throw e=Object.prototype.toString.call(n),Error(C(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function gc(e){var n=e._init;return n(e._payload)}function tv(e){function n(k,m){if(e){var h=k.deletions;h===null?(k.deletions=[m],k.flags|=16):h.push(m)}}function t(k,m){if(!e)return null;for(;m!==null;)n(k,m),m=m.sibling;return null}function o(k,m){for(k=new Map;m!==null;)m.key!==null?k.set(m.key,m):k.set(m.index,m),m=m.sibling;return k}function r(k,m){return k=mt(k,m),k.index=0,k.sibling=null,k}function a(k,m,h){return k.index=h,e?(h=k.alternate,h!==null?(h=h.index,h<m?(k.flags|=2,m):h):(k.flags|=2,m)):(k.flags|=1048576,m)}function i(k){return e&&k.alternate===null&&(k.flags|=2),k}function s(k,m,h,x){return m===null||m.tag!==6?(m=es(h,k.mode,x),m.return=k,m):(m=r(m,h),m.return=k,m)}function l(k,m,h,x){var P=h.type;return P===qt?d(k,m,h.props.children,x,h.key):m!==null&&(m.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===et&&gc(P)===m.type)?(x=r(m,h.props),x.ref=Ho(k,m,h),x.return=k,x):(x=Ra(h.type,h.key,h.props,null,k.mode,x),x.ref=Ho(k,m,h),x.return=k,x)}function u(k,m,h,x){return m===null||m.tag!==4||m.stateNode.containerInfo!==h.containerInfo||m.stateNode.implementation!==h.implementation?(m=ns(h,k.mode,x),m.return=k,m):(m=r(m,h.children||[]),m.return=k,m)}function d(k,m,h,x,P){return m===null||m.tag!==7?(m=Nt(h,k.mode,x,P),m.return=k,m):(m=r(m,h),m.return=k,m)}function p(k,m,h){if(typeof m=="string"&&m!==""||typeof m=="number")return m=es(""+m,k.mode,h),m.return=k,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Gr:return h=Ra(m.type,m.key,m.props,null,k.mode,h),h.ref=Ho(k,null,m),h.return=k,h;case Yt:return m=ns(m,k.mode,h),m.return=k,m;case et:var x=m._init;return p(k,x(m._payload),h)}if(nr(m)||Vo(m))return m=Nt(m,k.mode,h,null),m.return=k,m;sa(k,m)}return null}function v(k,m,h,x){var P=m!==null?m.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return P!==null?null:s(k,m,""+h,x);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Gr:return h.key===P?l(k,m,h,x):null;case Yt:return h.key===P?u(k,m,h,x):null;case et:return P=h._init,v(k,m,P(h._payload),x)}if(nr(h)||Vo(h))return P!==null?null:d(k,m,h,x,null);sa(k,h)}return null}function j(k,m,h,x,P){if(typeof x=="string"&&x!==""||typeof x=="number")return k=k.get(h)||null,s(m,k,""+x,P);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Gr:return k=k.get(x.key===null?h:x.key)||null,l(m,k,x,P);case Yt:return k=k.get(x.key===null?h:x.key)||null,u(m,k,x,P);case et:var M=x._init;return j(k,m,h,M(x._payload),P)}if(nr(x)||Vo(x))return k=k.get(h)||null,d(m,k,x,P,null);sa(m,x)}return null}function b(k,m,h,x){for(var P=null,M=null,y=m,R=m=0,L=null;y!==null&&R<h.length;R++){y.index>R?(L=y,y=null):L=y.sibling;var _=v(k,y,h[R],x);if(_===null){y===null&&(y=L);break}e&&y&&_.alternate===null&&n(k,y),m=a(_,m,R),M===null?P=_:M.sibling=_,M=_,y=L}if(R===h.length)return t(k,y),ue&&gt(k,R),P;if(y===null){for(;R<h.length;R++)y=p(k,h[R],x),y!==null&&(m=a(y,m,R),M===null?P=y:M.sibling=y,M=y);return ue&&gt(k,R),P}for(y=o(k,y);R<h.length;R++)L=j(y,k,R,h[R],x),L!==null&&(e&&L.alternate!==null&&y.delete(L.key===null?R:L.key),m=a(L,m,R),M===null?P=L:M.sibling=L,M=L);return e&&y.forEach(function(Z){return n(k,Z)}),ue&&gt(k,R),P}function f(k,m,h,x){var P=Vo(h);if(typeof P!="function")throw Error(C(150));if(h=P.call(h),h==null)throw Error(C(151));for(var M=P=null,y=m,R=m=0,L=null,_=h.next();y!==null&&!_.done;R++,_=h.next()){y.index>R?(L=y,y=null):L=y.sibling;var Z=v(k,y,_.value,x);if(Z===null){y===null&&(y=L);break}e&&y&&Z.alternate===null&&n(k,y),m=a(Z,m,R),M===null?P=Z:M.sibling=Z,M=Z,y=L}if(_.done)return t(k,y),ue&&gt(k,R),P;if(y===null){for(;!_.done;R++,_=h.next())_=p(k,_.value,x),_!==null&&(m=a(_,m,R),M===null?P=_:M.sibling=_,M=_);return ue&&gt(k,R),P}for(y=o(k,y);!_.done;R++,_=h.next())_=j(y,k,R,_.value,x),_!==null&&(e&&_.alternate!==null&&y.delete(_.key===null?R:_.key),m=a(_,m,R),M===null?P=_:M.sibling=_,M=_);return e&&y.forEach(function(V){return n(k,V)}),ue&&gt(k,R),P}function w(k,m,h,x){if(typeof h=="object"&&h!==null&&h.type===qt&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case Gr:e:{for(var P=h.key,M=m;M!==null;){if(M.key===P){if(P=h.type,P===qt){if(M.tag===7){t(k,M.sibling),m=r(M,h.props.children),m.return=k,k=m;break e}}else if(M.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===et&&gc(P)===M.type){t(k,M.sibling),m=r(M,h.props),m.ref=Ho(k,M,h),m.return=k,k=m;break e}t(k,M);break}else n(k,M);M=M.sibling}h.type===qt?(m=Nt(h.props.children,k.mode,x,h.key),m.return=k,k=m):(x=Ra(h.type,h.key,h.props,null,k.mode,x),x.ref=Ho(k,m,h),x.return=k,k=x)}return i(k);case Yt:e:{for(M=h.key;m!==null;){if(m.key===M)if(m.tag===4&&m.stateNode.containerInfo===h.containerInfo&&m.stateNode.implementation===h.implementation){t(k,m.sibling),m=r(m,h.children||[]),m.return=k,k=m;break e}else{t(k,m);break}else n(k,m);m=m.sibling}m=ns(h,k.mode,x),m.return=k,k=m}return i(k);case et:return M=h._init,w(k,m,M(h._payload),x)}if(nr(h))return b(k,m,h,x);if(Vo(h))return f(k,m,h,x);sa(k,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,m!==null&&m.tag===6?(t(k,m.sibling),m=r(m,h),m.return=k,k=m):(t(k,m),m=es(h,k.mode,x),m.return=k,k=m),i(k)):t(k,m)}return w}var So=tv(!0),ov=tv(!1),Ka=zt(null),Ha=null,so=null,Ul=null;function Bl(){Ul=so=Ha=null}function Wl(e){var n=Ka.current;ae(Ka),e._currentValue=n}function Ks(e,n,t){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===t)break;e=e.return}}function ho(e,n){Ha=e,Ul=so=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&(Ve=!0),e.firstContext=null)}function cn(e){var n=e._currentValue;if(Ul!==e)if(e={context:e,memoizedValue:n,next:null},so===null){if(Ha===null)throw Error(C(308));so=e,Ha.dependencies={lanes:0,firstContext:e}}else so=so.next=e;return n}var St=null;function Kl(e){St===null?St=[e]:St.push(e)}function rv(e,n,t,o){var r=n.interleaved;return r===null?(t.next=t,Kl(n)):(t.next=r.next,r.next=t),n.interleaved=t,Vn(e,o)}function Vn(e,n){e.lanes|=n;var t=e.alternate;for(t!==null&&(t.lanes|=n),t=e,e=e.return;e!==null;)e.childLanes|=n,t=e.alternate,t!==null&&(t.childLanes|=n),t=e,e=e.return;return t.tag===3?t.stateNode:null}var nt=!1;function Hl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function av(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function An(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function dt(e,n,t){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,Y&2){var r=o.pending;return r===null?n.next=n:(n.next=r.next,r.next=n),o.pending=n,Vn(e,t)}return r=o.interleaved,r===null?(n.next=n,Kl(o)):(n.next=r.next,r.next=n),o.interleaved=n,Vn(e,t)}function wa(e,n,t){if(n=n.updateQueue,n!==null&&(n=n.shared,(t&4194240)!==0)){var o=n.lanes;o&=e.pendingLanes,t|=o,n.lanes=t,Tl(e,t)}}function wc(e,n){var t=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,t===o)){var r=null,a=null;if(t=t.firstBaseUpdate,t!==null){do{var i={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};a===null?r=a=i:a=a.next=i,t=t.next}while(t!==null);a===null?r=a=n:a=a.next=n}else r=a=n;t={baseState:o.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:o.shared,effects:o.effects},e.updateQueue=t;return}e=t.lastBaseUpdate,e===null?t.firstBaseUpdate=n:e.next=n,t.lastBaseUpdate=n}function Za(e,n,t,o){var r=e.updateQueue;nt=!1;var a=r.firstBaseUpdate,i=r.lastBaseUpdate,s=r.shared.pending;if(s!==null){r.shared.pending=null;var l=s,u=l.next;l.next=null,i===null?a=u:i.next=u,i=l;var d=e.alternate;d!==null&&(d=d.updateQueue,s=d.lastBaseUpdate,s!==i&&(s===null?d.firstBaseUpdate=u:s.next=u,d.lastBaseUpdate=l))}if(a!==null){var p=r.baseState;i=0,d=u=l=null,s=a;do{var v=s.lane,j=s.eventTime;if((o&v)===v){d!==null&&(d=d.next={eventTime:j,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var b=e,f=s;switch(v=n,j=t,f.tag){case 1:if(b=f.payload,typeof b=="function"){p=b.call(j,p,v);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=f.payload,v=typeof b=="function"?b.call(j,p,v):b,v==null)break e;p=pe({},p,v);break e;case 2:nt=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,v=r.effects,v===null?r.effects=[s]:v.push(s))}else j={eventTime:j,lane:v,tag:s.tag,payload:s.payload,callback:s.callback,next:null},d===null?(u=d=j,l=p):d=d.next=j,i|=v;if(s=s.next,s===null){if(s=r.shared.pending,s===null)break;v=s,s=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(!0);if(d===null&&(l=p),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=d,n=r.shared.interleaved,n!==null){r=n;do i|=r.lane,r=r.next;while(r!==n)}else a===null&&(r.shared.lanes=0);Dt|=i,e.lanes=i,e.memoizedState=p}}function xc(e,n,t){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var o=e[n],r=o.callback;if(r!==null){if(o.callback=null,o=t,typeof r!="function")throw Error(C(191,r));r.call(o)}}}var $r={},Nn=zt($r),Pr=zt($r),Cr=zt($r);function Et(e){if(e===$r)throw Error(C(174));return e}function Zl(e,n){switch(te(Cr,n),te(Pr,e),te(Nn,$r),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Ss(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=Ss(n,e)}ae(Nn),te(Nn,n)}function Eo(){ae(Nn),ae(Pr),ae(Cr)}function iv(e){Et(Cr.current);var n=Et(Nn.current),t=Ss(n,e.type);n!==t&&(te(Pr,e),te(Nn,t))}function Jl(e){Pr.current===e&&(ae(Nn),ae(Pr))}var ce=zt(0);function Ja(e){for(var n=e;n!==null;){if(n.tag===13){var t=n.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ji=[];function Ql(){for(var e=0;e<Ji.length;e++)Ji[e]._workInProgressVersionPrimary=null;Ji.length=0}var xa=Bn.ReactCurrentDispatcher,Qi=Bn.ReactCurrentBatchConfig,Ot=0,de=null,ye=null,be=null,Qa=!1,ur=!1,Rr=0,Ah=0;function Re(){throw Error(C(321))}function Gl(e,n){if(n===null)return!1;for(var t=0;t<n.length&&t<e.length;t++)if(!bn(e[t],n[t]))return!1;return!0}function Xl(e,n,t,o,r,a){if(Ot=a,de=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,xa.current=e===null||e.memoizedState===null?Vh:Uh,e=t(o,r),ur){a=0;do{if(ur=!1,Rr=0,25<=a)throw Error(C(301));a+=1,be=ye=null,n.updateQueue=null,xa.current=Bh,e=t(o,r)}while(ur)}if(xa.current=Ga,n=ye!==null&&ye.next!==null,Ot=0,be=ye=de=null,Qa=!1,n)throw Error(C(300));return e}function Yl(){var e=Rr!==0;return Rr=0,e}function Sn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?de.memoizedState=be=e:be=be.next=e,be}function dn(){if(ye===null){var e=de.alternate;e=e!==null?e.memoizedState:null}else e=ye.next;var n=be===null?de.memoizedState:be.next;if(n!==null)be=n,ye=e;else{if(e===null)throw Error(C(310));ye=e,e={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},be===null?de.memoizedState=be=e:be=be.next=e}return be}function Nr(e,n){return typeof n=="function"?n(e):n}function Gi(e){var n=dn(),t=n.queue;if(t===null)throw Error(C(311));t.lastRenderedReducer=e;var o=ye,r=o.baseQueue,a=t.pending;if(a!==null){if(r!==null){var i=r.next;r.next=a.next,a.next=i}o.baseQueue=r=a,t.pending=null}if(r!==null){a=r.next,o=o.baseState;var s=i=null,l=null,u=a;do{var d=u.lane;if((Ot&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),o=u.hasEagerState?u.eagerState:e(o,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=p,i=o):l=l.next=p,de.lanes|=d,Dt|=d}u=u.next}while(u!==null&&u!==a);l===null?i=o:l.next=s,bn(o,n.memoizedState)||(Ve=!0),n.memoizedState=o,n.baseState=i,n.baseQueue=l,t.lastRenderedState=o}if(e=t.interleaved,e!==null){r=e;do a=r.lane,de.lanes|=a,Dt|=a,r=r.next;while(r!==e)}else r===null&&(t.lanes=0);return[n.memoizedState,t.dispatch]}function Xi(e){var n=dn(),t=n.queue;if(t===null)throw Error(C(311));t.lastRenderedReducer=e;var o=t.dispatch,r=t.pending,a=n.memoizedState;if(r!==null){t.pending=null;var i=r=r.next;do a=e(a,i.action),i=i.next;while(i!==r);bn(a,n.memoizedState)||(Ve=!0),n.memoizedState=a,n.baseQueue===null&&(n.baseState=a),t.lastRenderedState=a}return[a,o]}function sv(){}function lv(e,n){var t=de,o=dn(),r=n(),a=!bn(o.memoizedState,r);if(a&&(o.memoizedState=r,Ve=!0),o=o.queue,ql(dv.bind(null,t,o,e),[e]),o.getSnapshot!==n||a||be!==null&&be.memoizedState.tag&1){if(t.flags|=2048,Tr(9,cv.bind(null,t,o,r,n),void 0,null),ge===null)throw Error(C(349));Ot&30||uv(t,n,r)}return r}function uv(e,n,t){e.flags|=16384,e={getSnapshot:n,value:t},n=de.updateQueue,n===null?(n={lastEffect:null,stores:null},de.updateQueue=n,n.stores=[e]):(t=n.stores,t===null?n.stores=[e]:t.push(e))}function cv(e,n,t,o){n.value=t,n.getSnapshot=o,pv(n)&&vv(e)}function dv(e,n,t){return t(function(){pv(n)&&vv(e)})}function pv(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!bn(e,t)}catch{return!0}}function vv(e){var n=Vn(e,1);n!==null&&jn(n,e,1,-1)}function Sc(e){var n=Sn();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:e},n.queue=e,e=e.dispatch=$h.bind(null,de,e),[n.memoizedState,e]}function Tr(e,n,t,o){return e={tag:e,create:n,destroy:t,deps:o,next:null},n=de.updateQueue,n===null?(n={lastEffect:null,stores:null},de.updateQueue=n,n.lastEffect=e.next=e):(t=n.lastEffect,t===null?n.lastEffect=e.next=e:(o=t.next,t.next=e,e.next=o,n.lastEffect=e)),e}function mv(){return dn().memoizedState}function Sa(e,n,t,o){var r=Sn();de.flags|=e,r.memoizedState=Tr(1|n,t,void 0,o===void 0?null:o)}function pi(e,n,t,o){var r=dn();o=o===void 0?null:o;var a=void 0;if(ye!==null){var i=ye.memoizedState;if(a=i.destroy,o!==null&&Gl(o,i.deps)){r.memoizedState=Tr(n,t,a,o);return}}de.flags|=e,r.memoizedState=Tr(1|n,t,a,o)}function Ec(e,n){return Sa(8390656,8,e,n)}function ql(e,n){return pi(2048,8,e,n)}function kv(e,n){return pi(4,2,e,n)}function fv(e,n){return pi(4,4,e,n)}function hv(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function yv(e,n,t){return t=t!=null?t.concat([e]):null,pi(4,4,hv.bind(null,n,e),t)}function eu(){}function zv(e,n){var t=dn();n=n===void 0?null:n;var o=t.memoizedState;return o!==null&&n!==null&&Gl(n,o[1])?o[0]:(t.memoizedState=[e,n],e)}function jv(e,n){var t=dn();n=n===void 0?null:n;var o=t.memoizedState;return o!==null&&n!==null&&Gl(n,o[1])?o[0]:(e=e(),t.memoizedState=[e,n],e)}function bv(e,n,t){return Ot&21?(bn(t,n)||(t=Ep(),de.lanes|=t,Dt|=t,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,Ve=!0),e.memoizedState=t)}function Ih(e,n){var t=q;q=t!==0&&4>t?t:4,e(!0);var o=Qi.transition;Qi.transition={};try{e(!1),n()}finally{q=t,Qi.transition=o}}function gv(){return dn().memoizedState}function Fh(e,n,t){var o=vt(e);if(t={lane:o,action:t,hasEagerState:!1,eagerState:null,next:null},wv(e))xv(n,t);else if(t=rv(e,n,t,o),t!==null){var r=Le();jn(t,e,o,r),Sv(t,n,o)}}function $h(e,n,t){var o=vt(e),r={lane:o,action:t,hasEagerState:!1,eagerState:null,next:null};if(wv(e))xv(n,r);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=n.lastRenderedReducer,a!==null))try{var i=n.lastRenderedState,s=a(i,t);if(r.hasEagerState=!0,r.eagerState=s,bn(s,i)){var l=n.interleaved;l===null?(r.next=r,Kl(n)):(r.next=l.next,l.next=r),n.interleaved=r;return}}catch{}finally{}t=rv(e,n,r,o),t!==null&&(r=Le(),jn(t,e,o,r),Sv(t,n,o))}}function wv(e){var n=e.alternate;return e===de||n!==null&&n===de}function xv(e,n){ur=Qa=!0;var t=e.pending;t===null?n.next=n:(n.next=t.next,t.next=n),e.pending=n}function Sv(e,n,t){if(t&4194240){var o=n.lanes;o&=e.pendingLanes,t|=o,n.lanes=t,Tl(e,t)}}var Ga={readContext:cn,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useInsertionEffect:Re,useLayoutEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useMutableSource:Re,useSyncExternalStore:Re,useId:Re,unstable_isNewReconciler:!1},Vh={readContext:cn,useCallback:function(e,n){return Sn().memoizedState=[e,n===void 0?null:n],e},useContext:cn,useEffect:Ec,useImperativeHandle:function(e,n,t){return t=t!=null?t.concat([e]):null,Sa(4194308,4,hv.bind(null,n,e),t)},useLayoutEffect:function(e,n){return Sa(4194308,4,e,n)},useInsertionEffect:function(e,n){return Sa(4,2,e,n)},useMemo:function(e,n){var t=Sn();return n=n===void 0?null:n,e=e(),t.memoizedState=[e,n],e},useReducer:function(e,n,t){var o=Sn();return n=t!==void 0?t(n):n,o.memoizedState=o.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},o.queue=e,e=e.dispatch=Fh.bind(null,de,e),[o.memoizedState,e]},useRef:function(e){var n=Sn();return e={current:e},n.memoizedState=e},useState:Sc,useDebugValue:eu,useDeferredValue:function(e){return Sn().memoizedState=e},useTransition:function(){var e=Sc(!1),n=e[0];return e=Ih.bind(null,e[1]),Sn().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,t){var o=de,r=Sn();if(ue){if(t===void 0)throw Error(C(407));t=t()}else{if(t=n(),ge===null)throw Error(C(349));Ot&30||uv(o,n,t)}r.memoizedState=t;var a={value:t,getSnapshot:n};return r.queue=a,Ec(dv.bind(null,o,a,e),[e]),o.flags|=2048,Tr(9,cv.bind(null,o,a,t,n),void 0,null),t},useId:function(){var e=Sn(),n=ge.identifierPrefix;if(ue){var t=Ln,o=Dn;t=(o&~(1<<32-zn(o)-1)).toString(32)+t,n=":"+n+"R"+t,t=Rr++,0<t&&(n+="H"+t.toString(32)),n+=":"}else t=Ah++,n=":"+n+"r"+t.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},Uh={readContext:cn,useCallback:zv,useContext:cn,useEffect:ql,useImperativeHandle:yv,useInsertionEffect:kv,useLayoutEffect:fv,useMemo:jv,useReducer:Gi,useRef:mv,useState:function(){return Gi(Nr)},useDebugValue:eu,useDeferredValue:function(e){var n=dn();return bv(n,ye.memoizedState,e)},useTransition:function(){var e=Gi(Nr)[0],n=dn().memoizedState;return[e,n]},useMutableSource:sv,useSyncExternalStore:lv,useId:gv,unstable_isNewReconciler:!1},Bh={readContext:cn,useCallback:zv,useContext:cn,useEffect:ql,useImperativeHandle:yv,useInsertionEffect:kv,useLayoutEffect:fv,useMemo:jv,useReducer:Xi,useRef:mv,useState:function(){return Xi(Nr)},useDebugValue:eu,useDeferredValue:function(e){var n=dn();return ye===null?n.memoizedState=e:bv(n,ye.memoizedState,e)},useTransition:function(){var e=Xi(Nr)[0],n=dn().memoizedState;return[e,n]},useMutableSource:sv,useSyncExternalStore:lv,useId:gv,unstable_isNewReconciler:!1};function kn(e,n){if(e&&e.defaultProps){n=pe({},n),e=e.defaultProps;for(var t in e)n[t]===void 0&&(n[t]=e[t]);return n}return n}function Hs(e,n,t,o){n=e.memoizedState,t=t(o,n),t=t==null?n:pe({},n,t),e.memoizedState=t,e.lanes===0&&(e.updateQueue.baseState=t)}var vi={isMounted:function(e){return(e=e._reactInternals)?Vt(e)===e:!1},enqueueSetState:function(e,n,t){e=e._reactInternals;var o=Le(),r=vt(e),a=An(o,r);a.payload=n,t!=null&&(a.callback=t),n=dt(e,a,r),n!==null&&(jn(n,e,r,o),wa(n,e,r))},enqueueReplaceState:function(e,n,t){e=e._reactInternals;var o=Le(),r=vt(e),a=An(o,r);a.tag=1,a.payload=n,t!=null&&(a.callback=t),n=dt(e,a,r),n!==null&&(jn(n,e,r,o),wa(n,e,r))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var t=Le(),o=vt(e),r=An(t,o);r.tag=2,n!=null&&(r.callback=n),n=dt(e,r,o),n!==null&&(jn(n,e,o,t),wa(n,e,o))}};function Pc(e,n,t,o,r,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,a,i):n.prototype&&n.prototype.isPureReactComponent?!wr(t,o)||!wr(r,a):!0}function Ev(e,n,t){var o=!1,r=ft,a=n.contextType;return typeof a=="object"&&a!==null?a=cn(a):(r=Be(n)?Mt:Me.current,o=n.contextTypes,a=(o=o!=null)?wo(e,r):ft),n=new n(t,a),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=vi,e.stateNode=n,n._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),n}function Cc(e,n,t,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(t,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(t,o),n.state!==e&&vi.enqueueReplaceState(n,n.state,null)}function Zs(e,n,t,o){var r=e.stateNode;r.props=t,r.state=e.memoizedState,r.refs={},Hl(e);var a=n.contextType;typeof a=="object"&&a!==null?r.context=cn(a):(a=Be(n)?Mt:Me.current,r.context=wo(e,a)),r.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(Hs(e,n,a,t),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(n=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),n!==r.state&&vi.enqueueReplaceState(r,r.state,null),Za(e,t,r,o),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function Po(e,n){try{var t="",o=n;do t+=hf(o),o=o.return;while(o);var r=t}catch(a){r=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:n,stack:r,digest:null}}function Yi(e,n,t){return{value:e,source:null,stack:t??null,digest:n??null}}function Js(e,n){try{console.error(n.value)}catch(t){setTimeout(function(){throw t})}}var Wh=typeof WeakMap=="function"?WeakMap:Map;function Pv(e,n,t){t=An(-1,t),t.tag=3,t.payload={element:null};var o=n.value;return t.callback=function(){Ya||(Ya=!0,rl=o),Js(e,n)},t}function Cv(e,n,t){t=An(-1,t),t.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var r=n.value;t.payload=function(){return o(r)},t.callback=function(){Js(e,n)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){Js(e,n),typeof o!="function"&&(pt===null?pt=new Set([this]):pt.add(this));var i=n.stack;this.componentDidCatch(n.value,{componentStack:i!==null?i:""})}),t}function Rc(e,n,t){var o=e.pingCache;if(o===null){o=e.pingCache=new Wh;var r=new Set;o.set(n,r)}else r=o.get(n),r===void 0&&(r=new Set,o.set(n,r));r.has(t)||(r.add(t),e=ry.bind(null,e,n,t),n.then(e,e))}function Nc(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Tc(e,n,t,o,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===n?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(n=An(-1,1),n.tag=2,dt(t,n,1))),t.lanes|=1),e)}var Kh=Bn.ReactCurrentOwner,Ve=!1;function De(e,n,t,o){n.child=e===null?ov(n,null,t,o):So(n,e.child,t,o)}function Mc(e,n,t,o,r){t=t.render;var a=n.ref;return ho(n,r),o=Xl(e,n,t,o,a,r),t=Yl(),e!==null&&!Ve?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~r,Un(e,n,r)):(ue&&t&&Fl(n),n.flags|=1,De(e,n,o,r),n.child)}function _c(e,n,t,o,r){if(e===null){var a=t.type;return typeof a=="function"&&!lu(a)&&a.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(n.tag=15,n.type=a,Rv(e,n,a,o,r)):(e=Ra(t.type,null,o,n,n.mode,r),e.ref=n.ref,e.return=n,n.child=e)}if(a=e.child,!(e.lanes&r)){var i=a.memoizedProps;if(t=t.compare,t=t!==null?t:wr,t(i,o)&&e.ref===n.ref)return Un(e,n,r)}return n.flags|=1,e=mt(a,o),e.ref=n.ref,e.return=n,n.child=e}function Rv(e,n,t,o,r){if(e!==null){var a=e.memoizedProps;if(wr(a,o)&&e.ref===n.ref)if(Ve=!1,n.pendingProps=o=a,(e.lanes&r)!==0)e.flags&131072&&(Ve=!0);else return n.lanes=e.lanes,Un(e,n,r)}return Qs(e,n,t,o,r)}function Nv(e,n,t){var o=n.pendingProps,r=o.children,a=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},te(uo,Qe),Qe|=t;else{if(!(t&1073741824))return e=a!==null?a.baseLanes|t:t,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,te(uo,Qe),Qe|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=a!==null?a.baseLanes:t,te(uo,Qe),Qe|=o}else a!==null?(o=a.baseLanes|t,n.memoizedState=null):o=t,te(uo,Qe),Qe|=o;return De(e,n,r,t),n.child}function Tv(e,n){var t=n.ref;(e===null&&t!==null||e!==null&&e.ref!==t)&&(n.flags|=512,n.flags|=2097152)}function Qs(e,n,t,o,r){var a=Be(t)?Mt:Me.current;return a=wo(n,a),ho(n,r),t=Xl(e,n,t,o,a,r),o=Yl(),e!==null&&!Ve?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~r,Un(e,n,r)):(ue&&o&&Fl(n),n.flags|=1,De(e,n,t,r),n.child)}function Oc(e,n,t,o,r){if(Be(t)){var a=!0;Ua(n)}else a=!1;if(ho(n,r),n.stateNode===null)Ea(e,n),Ev(n,t,o),Zs(n,t,o,r),o=!0;else if(e===null){var i=n.stateNode,s=n.memoizedProps;i.props=s;var l=i.context,u=t.contextType;typeof u=="object"&&u!==null?u=cn(u):(u=Be(t)?Mt:Me.current,u=wo(n,u));var d=t.getDerivedStateFromProps,p=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";p||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==o||l!==u)&&Cc(n,i,o,u),nt=!1;var v=n.memoizedState;i.state=v,Za(n,o,i,r),l=n.memoizedState,s!==o||v!==l||Ue.current||nt?(typeof d=="function"&&(Hs(n,t,d,o),l=n.memoizedState),(s=nt||Pc(n,t,s,o,v,l,u))?(p||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(n.flags|=4194308)):(typeof i.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=l),i.props=o,i.state=l,i.context=u,o=s):(typeof i.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{i=n.stateNode,av(e,n),s=n.memoizedProps,u=n.type===n.elementType?s:kn(n.type,s),i.props=u,p=n.pendingProps,v=i.context,l=t.contextType,typeof l=="object"&&l!==null?l=cn(l):(l=Be(t)?Mt:Me.current,l=wo(n,l));var j=t.getDerivedStateFromProps;(d=typeof j=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==p||v!==l)&&Cc(n,i,o,l),nt=!1,v=n.memoizedState,i.state=v,Za(n,o,i,r);var b=n.memoizedState;s!==p||v!==b||Ue.current||nt?(typeof j=="function"&&(Hs(n,t,j,o),b=n.memoizedState),(u=nt||Pc(n,t,u,o,v,b,l)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(o,b,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(o,b,l)),typeof i.componentDidUpdate=="function"&&(n.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&v===e.memoizedState||(n.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&v===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=b),i.props=o,i.state=b,i.context=l,o=u):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&v===e.memoizedState||(n.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&v===e.memoizedState||(n.flags|=1024),o=!1)}return Gs(e,n,t,o,a,r)}function Gs(e,n,t,o,r,a){Tv(e,n);var i=(n.flags&128)!==0;if(!o&&!i)return r&&zc(n,t,!1),Un(e,n,a);o=n.stateNode,Kh.current=n;var s=i&&typeof t.getDerivedStateFromError!="function"?null:o.render();return n.flags|=1,e!==null&&i?(n.child=So(n,e.child,null,a),n.child=So(n,null,s,a)):De(e,n,s,a),n.memoizedState=o.state,r&&zc(n,t,!0),n.child}function Mv(e){var n=e.stateNode;n.pendingContext?yc(e,n.pendingContext,n.pendingContext!==n.context):n.context&&yc(e,n.context,!1),Zl(e,n.containerInfo)}function Dc(e,n,t,o,r){return xo(),Vl(r),n.flags|=256,De(e,n,t,o),n.child}var Xs={dehydrated:null,treeContext:null,retryLane:0};function Ys(e){return{baseLanes:e,cachePool:null,transitions:null}}function _v(e,n,t){var o=n.pendingProps,r=ce.current,a=!1,i=(n.flags&128)!==0,s;if((s=i)||(s=e!==null&&e.memoizedState===null?!1:(r&2)!==0),s?(a=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),te(ce,r&1),e===null)return Ws(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?e.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(i=o.children,e=o.fallback,a?(o=n.mode,a=n.child,i={mode:"hidden",children:i},!(o&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=fi(i,o,0,null),e=Nt(e,o,t,null),a.return=n,e.return=n,a.sibling=e,n.child=a,n.child.memoizedState=Ys(t),n.memoizedState=Xs,e):nu(n,i));if(r=e.memoizedState,r!==null&&(s=r.dehydrated,s!==null))return Hh(e,n,i,o,s,r,t);if(a){a=o.fallback,i=n.mode,r=e.child,s=r.sibling;var l={mode:"hidden",children:o.children};return!(i&1)&&n.child!==r?(o=n.child,o.childLanes=0,o.pendingProps=l,n.deletions=null):(o=mt(r,l),o.subtreeFlags=r.subtreeFlags&14680064),s!==null?a=mt(s,a):(a=Nt(a,i,t,null),a.flags|=2),a.return=n,o.return=n,o.sibling=a,n.child=o,o=a,a=n.child,i=e.child.memoizedState,i=i===null?Ys(t):{baseLanes:i.baseLanes|t,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~t,n.memoizedState=Xs,o}return a=e.child,e=a.sibling,o=mt(a,{mode:"visible",children:o.children}),!(n.mode&1)&&(o.lanes=t),o.return=n,o.sibling=null,e!==null&&(t=n.deletions,t===null?(n.deletions=[e],n.flags|=16):t.push(e)),n.child=o,n.memoizedState=null,o}function nu(e,n){return n=fi({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function la(e,n,t,o){return o!==null&&Vl(o),So(n,e.child,null,t),e=nu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Hh(e,n,t,o,r,a,i){if(t)return n.flags&256?(n.flags&=-257,o=Yi(Error(C(422))),la(e,n,i,o)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(a=o.fallback,r=n.mode,o=fi({mode:"visible",children:o.children},r,0,null),a=Nt(a,r,i,null),a.flags|=2,o.return=n,a.return=n,o.sibling=a,n.child=o,n.mode&1&&So(n,e.child,null,i),n.child.memoizedState=Ys(i),n.memoizedState=Xs,a);if(!(n.mode&1))return la(e,n,i,null);if(r.data==="$!"){if(o=r.nextSibling&&r.nextSibling.dataset,o)var s=o.dgst;return o=s,a=Error(C(419)),o=Yi(a,o,void 0),la(e,n,i,o)}if(s=(i&e.childLanes)!==0,Ve||s){if(o=ge,o!==null){switch(i&-i){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(o.suspendedLanes|i)?0:r,r!==0&&r!==a.retryLane&&(a.retryLane=r,Vn(e,r),jn(o,e,r,-1))}return su(),o=Yi(Error(C(421))),la(e,n,i,o)}return r.data==="$?"?(n.flags|=128,n.child=e.child,n=ay.bind(null,e),r._reactRetry=n,null):(e=a.treeContext,Ge=ct(r.nextSibling),Xe=n,ue=!0,yn=null,e!==null&&(rn[an++]=Dn,rn[an++]=Ln,rn[an++]=_t,Dn=e.id,Ln=e.overflow,_t=n),n=nu(n,o.children),n.flags|=4096,n)}function Lc(e,n,t){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),Ks(e.return,n,t)}function qi(e,n,t,o,r){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:t,tailMode:r}:(a.isBackwards=n,a.rendering=null,a.renderingStartTime=0,a.last=o,a.tail=t,a.tailMode=r)}function Ov(e,n,t){var o=n.pendingProps,r=o.revealOrder,a=o.tail;if(De(e,n,o.children,t),o=ce.current,o&2)o=o&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lc(e,t,n);else if(e.tag===19)Lc(e,t,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(te(ce,o),!(n.mode&1))n.memoizedState=null;else switch(r){case"forwards":for(t=n.child,r=null;t!==null;)e=t.alternate,e!==null&&Ja(e)===null&&(r=t),t=t.sibling;t=r,t===null?(r=n.child,n.child=null):(r=t.sibling,t.sibling=null),qi(n,!1,r,t,a);break;case"backwards":for(t=null,r=n.child,n.child=null;r!==null;){if(e=r.alternate,e!==null&&Ja(e)===null){n.child=r;break}e=r.sibling,r.sibling=t,t=r,r=e}qi(n,!0,t,null,a);break;case"together":qi(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Ea(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function Un(e,n,t){if(e!==null&&(n.dependencies=e.dependencies),Dt|=n.lanes,!(t&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error(C(153));if(n.child!==null){for(e=n.child,t=mt(e,e.pendingProps),n.child=t,t.return=n;e.sibling!==null;)e=e.sibling,t=t.sibling=mt(e,e.pendingProps),t.return=n;t.sibling=null}return n.child}function Zh(e,n,t){switch(n.tag){case 3:Mv(n),xo();break;case 5:iv(n);break;case 1:Be(n.type)&&Ua(n);break;case 4:Zl(n,n.stateNode.containerInfo);break;case 10:var o=n.type._context,r=n.memoizedProps.value;te(Ka,o._currentValue),o._currentValue=r;break;case 13:if(o=n.memoizedState,o!==null)return o.dehydrated!==null?(te(ce,ce.current&1),n.flags|=128,null):t&n.child.childLanes?_v(e,n,t):(te(ce,ce.current&1),e=Un(e,n,t),e!==null?e.sibling:null);te(ce,ce.current&1);break;case 19:if(o=(t&n.childLanes)!==0,e.flags&128){if(o)return Ov(e,n,t);n.flags|=128}if(r=n.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),te(ce,ce.current),o)break;return null;case 22:case 23:return n.lanes=0,Nv(e,n,t)}return Un(e,n,t)}var Dv,qs,Lv,Av;Dv=function(e,n){for(var t=n.child;t!==null;){if(t.tag===5||t.tag===6)e.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};qs=function(){};Lv=function(e,n,t,o){var r=e.memoizedProps;if(r!==o){e=n.stateNode,Et(Nn.current);var a=null;switch(t){case"input":r=bs(e,r),o=bs(e,o),a=[];break;case"select":r=pe({},r,{value:void 0}),o=pe({},o,{value:void 0}),a=[];break;case"textarea":r=xs(e,r),o=xs(e,o),a=[];break;default:typeof r.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=$a)}Es(t,o);var i;t=null;for(u in r)if(!o.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var s=r[u];for(i in s)s.hasOwnProperty(i)&&(t||(t={}),t[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(fr.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in o){var l=o[u];if(s=r!=null?r[u]:void 0,o.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(i in s)!s.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(t||(t={}),t[i]="");for(i in l)l.hasOwnProperty(i)&&s[i]!==l[i]&&(t||(t={}),t[i]=l[i])}else t||(a||(a=[]),a.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(fr.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&re("scroll",e),a||s===l||(a=[])):(a=a||[]).push(u,l))}t&&(a=a||[]).push("style",t);var u=a;(n.updateQueue=u)&&(n.flags|=4)}};Av=function(e,n,t,o){t!==o&&(n.flags|=4)};function Zo(e,n){if(!ue)switch(e.tailMode){case"hidden":n=e.tail;for(var t=null;n!==null;)n.alternate!==null&&(t=n),n=n.sibling;t===null?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Ne(e){var n=e.alternate!==null&&e.alternate.child===e.child,t=0,o=0;if(n)for(var r=e.child;r!==null;)t|=r.lanes|r.childLanes,o|=r.subtreeFlags&14680064,o|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)t|=r.lanes|r.childLanes,o|=r.subtreeFlags,o|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=o,e.childLanes=t,n}function Jh(e,n,t){var o=n.pendingProps;switch($l(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(n),null;case 1:return Be(n.type)&&Va(),Ne(n),null;case 3:return o=n.stateNode,Eo(),ae(Ue),ae(Me),Ql(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(ia(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,yn!==null&&(sl(yn),yn=null))),qs(e,n),Ne(n),null;case 5:Jl(n);var r=Et(Cr.current);if(t=n.type,e!==null&&n.stateNode!=null)Lv(e,n,t,o,r),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!o){if(n.stateNode===null)throw Error(C(166));return Ne(n),null}if(e=Et(Nn.current),ia(n)){o=n.stateNode,t=n.type;var a=n.memoizedProps;switch(o[En]=n,o[Er]=a,e=(n.mode&1)!==0,t){case"dialog":re("cancel",o),re("close",o);break;case"iframe":case"object":case"embed":re("load",o);break;case"video":case"audio":for(r=0;r<or.length;r++)re(or[r],o);break;case"source":re("error",o);break;case"img":case"image":case"link":re("error",o),re("load",o);break;case"details":re("toggle",o);break;case"input":Ku(o,a),re("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!a.multiple},re("invalid",o);break;case"textarea":Zu(o,a),re("invalid",o)}Es(t,a),r=null;for(var i in a)if(a.hasOwnProperty(i)){var s=a[i];i==="children"?typeof s=="string"?o.textContent!==s&&(a.suppressHydrationWarning!==!0&&aa(o.textContent,s,e),r=["children",s]):typeof s=="number"&&o.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&aa(o.textContent,s,e),r=["children",""+s]):fr.hasOwnProperty(i)&&s!=null&&i==="onScroll"&&re("scroll",o)}switch(t){case"input":Xr(o),Hu(o,a,!0);break;case"textarea":Xr(o),Ju(o);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(o.onclick=$a)}o=r,n.updateQueue=o,o!==null&&(n.flags|=4)}else{i=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dp(t)),e==="http://www.w3.org/1999/xhtml"?t==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=i.createElement(t,{is:o.is}):(e=i.createElement(t),t==="select"&&(i=e,o.multiple?i.multiple=!0:o.size&&(i.size=o.size))):e=i.createElementNS(e,t),e[En]=n,e[Er]=o,Dv(e,n,!1,!1),n.stateNode=e;e:{switch(i=Ps(t,o),t){case"dialog":re("cancel",e),re("close",e),r=o;break;case"iframe":case"object":case"embed":re("load",e),r=o;break;case"video":case"audio":for(r=0;r<or.length;r++)re(or[r],e);r=o;break;case"source":re("error",e),r=o;break;case"img":case"image":case"link":re("error",e),re("load",e),r=o;break;case"details":re("toggle",e),r=o;break;case"input":Ku(e,o),r=bs(e,o),re("invalid",e);break;case"option":r=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},r=pe({},o,{value:void 0}),re("invalid",e);break;case"textarea":Zu(e,o),r=xs(e,o),re("invalid",e);break;default:r=o}Es(t,r),s=r;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?mp(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&pp(e,l)):a==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&hr(e,l):typeof l=="number"&&hr(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(fr.hasOwnProperty(a)?l!=null&&a==="onScroll"&&re("scroll",e):l!=null&&Sl(e,a,l,i))}switch(t){case"input":Xr(e),Hu(e,o,!1);break;case"textarea":Xr(e),Ju(e);break;case"option":o.value!=null&&e.setAttribute("value",""+kt(o.value));break;case"select":e.multiple=!!o.multiple,a=o.value,a!=null?vo(e,!!o.multiple,a,!1):o.defaultValue!=null&&vo(e,!!o.multiple,o.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=$a)}switch(t){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Ne(n),null;case 6:if(e&&n.stateNode!=null)Av(e,n,e.memoizedProps,o);else{if(typeof o!="string"&&n.stateNode===null)throw Error(C(166));if(t=Et(Cr.current),Et(Nn.current),ia(n)){if(o=n.stateNode,t=n.memoizedProps,o[En]=n,(a=o.nodeValue!==t)&&(e=Xe,e!==null))switch(e.tag){case 3:aa(o.nodeValue,t,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&aa(o.nodeValue,t,(e.mode&1)!==0)}a&&(n.flags|=4)}else o=(t.nodeType===9?t:t.ownerDocument).createTextNode(o),o[En]=n,n.stateNode=o}return Ne(n),null;case 13:if(ae(ce),o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ue&&Ge!==null&&n.mode&1&&!(n.flags&128))nv(),xo(),n.flags|=98560,a=!1;else if(a=ia(n),o!==null&&o.dehydrated!==null){if(e===null){if(!a)throw Error(C(318));if(a=n.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(C(317));a[En]=n}else xo(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Ne(n),a=!1}else yn!==null&&(sl(yn),yn=null),a=!0;if(!a)return n.flags&65536?n:null}return n.flags&128?(n.lanes=t,n):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(n.child.flags|=8192,n.mode&1&&(e===null||ce.current&1?ze===0&&(ze=3):su())),n.updateQueue!==null&&(n.flags|=4),Ne(n),null);case 4:return Eo(),qs(e,n),e===null&&xr(n.stateNode.containerInfo),Ne(n),null;case 10:return Wl(n.type._context),Ne(n),null;case 17:return Be(n.type)&&Va(),Ne(n),null;case 19:if(ae(ce),a=n.memoizedState,a===null)return Ne(n),null;if(o=(n.flags&128)!==0,i=a.rendering,i===null)if(o)Zo(a,!1);else{if(ze!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(i=Ja(e),i!==null){for(n.flags|=128,Zo(a,!1),o=i.updateQueue,o!==null&&(n.updateQueue=o,n.flags|=4),n.subtreeFlags=0,o=t,t=n.child;t!==null;)a=t,e=o,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return te(ce,ce.current&1|2),n.child}e=e.sibling}a.tail!==null&&ke()>Co&&(n.flags|=128,o=!0,Zo(a,!1),n.lanes=4194304)}else{if(!o)if(e=Ja(i),e!==null){if(n.flags|=128,o=!0,t=e.updateQueue,t!==null&&(n.updateQueue=t,n.flags|=4),Zo(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!ue)return Ne(n),null}else 2*ke()-a.renderingStartTime>Co&&t!==1073741824&&(n.flags|=128,o=!0,Zo(a,!1),n.lanes=4194304);a.isBackwards?(i.sibling=n.child,n.child=i):(t=a.last,t!==null?t.sibling=i:n.child=i,a.last=i)}return a.tail!==null?(n=a.tail,a.rendering=n,a.tail=n.sibling,a.renderingStartTime=ke(),n.sibling=null,t=ce.current,te(ce,o?t&1|2:t&1),n):(Ne(n),null);case 22:case 23:return iu(),o=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(n.flags|=8192),o&&n.mode&1?Qe&1073741824&&(Ne(n),n.subtreeFlags&6&&(n.flags|=8192)):Ne(n),null;case 24:return null;case 25:return null}throw Error(C(156,n.tag))}function Qh(e,n){switch($l(n),n.tag){case 1:return Be(n.type)&&Va(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Eo(),ae(Ue),ae(Me),Ql(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return Jl(n),null;case 13:if(ae(ce),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(C(340));xo()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return ae(ce),null;case 4:return Eo(),null;case 10:return Wl(n.type._context),null;case 22:case 23:return iu(),null;case 24:return null;default:return null}}var ua=!1,Te=!1,Gh=typeof WeakSet=="function"?WeakSet:Set,O=null;function lo(e,n){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(o){me(e,n,o)}else t.current=null}function el(e,n,t){try{t()}catch(o){me(e,n,o)}}var Ac=!1;function Xh(e,n){if(As=Aa,e=Up(),Il(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{t=(t=e.ownerDocument)&&t.defaultView||window;var o=t.getSelection&&t.getSelection();if(o&&o.rangeCount!==0){t=o.anchorNode;var r=o.anchorOffset,a=o.focusNode;o=o.focusOffset;try{t.nodeType,a.nodeType}catch{t=null;break e}var i=0,s=-1,l=-1,u=0,d=0,p=e,v=null;n:for(;;){for(var j;p!==t||r!==0&&p.nodeType!==3||(s=i+r),p!==a||o!==0&&p.nodeType!==3||(l=i+o),p.nodeType===3&&(i+=p.nodeValue.length),(j=p.firstChild)!==null;)v=p,p=j;for(;;){if(p===e)break n;if(v===t&&++u===r&&(s=i),v===a&&++d===o&&(l=i),(j=p.nextSibling)!==null)break;p=v,v=p.parentNode}p=j}t=s===-1||l===-1?null:{start:s,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Is={focusedElem:e,selectionRange:t},Aa=!1,O=n;O!==null;)if(n=O,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,O=e;else for(;O!==null;){n=O;try{var b=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var f=b.memoizedProps,w=b.memoizedState,k=n.stateNode,m=k.getSnapshotBeforeUpdate(n.elementType===n.type?f:kn(n.type,f),w);k.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var h=n.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(C(163))}}catch(x){me(n,n.return,x)}if(e=n.sibling,e!==null){e.return=n.return,O=e;break}O=n.return}return b=Ac,Ac=!1,b}function cr(e,n,t){var o=n.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var r=o=o.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,a!==void 0&&el(n,t,a)}r=r.next}while(r!==o)}}function mi(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var t=n=n.next;do{if((t.tag&e)===e){var o=t.create;t.destroy=o()}t=t.next}while(t!==n)}}function nl(e){var n=e.ref;if(n!==null){var t=e.stateNode;switch(e.tag){case 5:e=t;break;default:e=t}typeof n=="function"?n(e):n.current=e}}function Iv(e){var n=e.alternate;n!==null&&(e.alternate=null,Iv(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[En],delete n[Er],delete n[Vs],delete n[_h],delete n[Oh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Fv(e){return e.tag===5||e.tag===3||e.tag===4}function Ic(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Fv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tl(e,n,t){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?t.nodeType===8?t.parentNode.insertBefore(e,n):t.insertBefore(e,n):(t.nodeType===8?(n=t.parentNode,n.insertBefore(e,t)):(n=t,n.appendChild(e)),t=t._reactRootContainer,t!=null||n.onclick!==null||(n.onclick=$a));else if(o!==4&&(e=e.child,e!==null))for(tl(e,n,t),e=e.sibling;e!==null;)tl(e,n,t),e=e.sibling}function ol(e,n,t){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?t.insertBefore(e,n):t.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(ol(e,n,t),e=e.sibling;e!==null;)ol(e,n,t),e=e.sibling}var Ee=null,fn=!1;function Qn(e,n,t){for(t=t.child;t!==null;)$v(e,n,t),t=t.sibling}function $v(e,n,t){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(ii,t)}catch{}switch(t.tag){case 5:Te||lo(t,n);case 6:var o=Ee,r=fn;Ee=null,Qn(e,n,t),Ee=o,fn=r,Ee!==null&&(fn?(e=Ee,t=t.stateNode,e.nodeType===8?e.parentNode.removeChild(t):e.removeChild(t)):Ee.removeChild(t.stateNode));break;case 18:Ee!==null&&(fn?(e=Ee,t=t.stateNode,e.nodeType===8?Hi(e.parentNode,t):e.nodeType===1&&Hi(e,t),br(e)):Hi(Ee,t.stateNode));break;case 4:o=Ee,r=fn,Ee=t.stateNode.containerInfo,fn=!0,Qn(e,n,t),Ee=o,fn=r;break;case 0:case 11:case 14:case 15:if(!Te&&(o=t.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){r=o=o.next;do{var a=r,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&el(t,n,i),r=r.next}while(r!==o)}Qn(e,n,t);break;case 1:if(!Te&&(lo(t,n),o=t.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=t.memoizedProps,o.state=t.memoizedState,o.componentWillUnmount()}catch(s){me(t,n,s)}Qn(e,n,t);break;case 21:Qn(e,n,t);break;case 22:t.mode&1?(Te=(o=Te)||t.memoizedState!==null,Qn(e,n,t),Te=o):Qn(e,n,t);break;default:Qn(e,n,t)}}function Fc(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var t=e.stateNode;t===null&&(t=e.stateNode=new Gh),n.forEach(function(o){var r=iy.bind(null,e,o);t.has(o)||(t.add(o),o.then(r,r))})}}function mn(e,n){var t=n.deletions;if(t!==null)for(var o=0;o<t.length;o++){var r=t[o];try{var a=e,i=n,s=i;e:for(;s!==null;){switch(s.tag){case 5:Ee=s.stateNode,fn=!1;break e;case 3:Ee=s.stateNode.containerInfo,fn=!0;break e;case 4:Ee=s.stateNode.containerInfo,fn=!0;break e}s=s.return}if(Ee===null)throw Error(C(160));$v(a,i,r),Ee=null,fn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){me(r,n,u)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Vv(n,e),n=n.sibling}function Vv(e,n){var t=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mn(n,e),xn(e),o&4){try{cr(3,e,e.return),mi(3,e)}catch(f){me(e,e.return,f)}try{cr(5,e,e.return)}catch(f){me(e,e.return,f)}}break;case 1:mn(n,e),xn(e),o&512&&t!==null&&lo(t,t.return);break;case 5:if(mn(n,e),xn(e),o&512&&t!==null&&lo(t,t.return),e.flags&32){var r=e.stateNode;try{hr(r,"")}catch(f){me(e,e.return,f)}}if(o&4&&(r=e.stateNode,r!=null)){var a=e.memoizedProps,i=t!==null?t.memoizedProps:a,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&up(r,a),Ps(s,i);var u=Ps(s,a);for(i=0;i<l.length;i+=2){var d=l[i],p=l[i+1];d==="style"?mp(r,p):d==="dangerouslySetInnerHTML"?pp(r,p):d==="children"?hr(r,p):Sl(r,d,p,u)}switch(s){case"input":gs(r,a);break;case"textarea":cp(r,a);break;case"select":var v=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var j=a.value;j!=null?vo(r,!!a.multiple,j,!1):v!==!!a.multiple&&(a.defaultValue!=null?vo(r,!!a.multiple,a.defaultValue,!0):vo(r,!!a.multiple,a.multiple?[]:"",!1))}r[Er]=a}catch(f){me(e,e.return,f)}}break;case 6:if(mn(n,e),xn(e),o&4){if(e.stateNode===null)throw Error(C(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(f){me(e,e.return,f)}}break;case 3:if(mn(n,e),xn(e),o&4&&t!==null&&t.memoizedState.isDehydrated)try{br(n.containerInfo)}catch(f){me(e,e.return,f)}break;case 4:mn(n,e),xn(e);break;case 13:mn(n,e),xn(e),r=e.child,r.flags&8192&&(a=r.memoizedState!==null,r.stateNode.isHidden=a,!a||r.alternate!==null&&r.alternate.memoizedState!==null||(ru=ke())),o&4&&Fc(e);break;case 22:if(d=t!==null&&t.memoizedState!==null,e.mode&1?(Te=(u=Te)||d,mn(n,e),Te=u):mn(n,e),xn(e),o&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(O=e,d=e.child;d!==null;){for(p=O=d;O!==null;){switch(v=O,j=v.child,v.tag){case 0:case 11:case 14:case 15:cr(4,v,v.return);break;case 1:lo(v,v.return);var b=v.stateNode;if(typeof b.componentWillUnmount=="function"){o=v,t=v.return;try{n=o,b.props=n.memoizedProps,b.state=n.memoizedState,b.componentWillUnmount()}catch(f){me(o,t,f)}}break;case 5:lo(v,v.return);break;case 22:if(v.memoizedState!==null){Vc(p);continue}}j!==null?(j.return=v,O=j):Vc(p)}d=d.sibling}e:for(d=null,p=e;;){if(p.tag===5){if(d===null){d=p;try{r=p.stateNode,u?(a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=p.stateNode,l=p.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=vp("display",i))}catch(f){me(e,e.return,f)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(f){me(e,e.return,f)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:mn(n,e),xn(e),o&4&&Fc(e);break;case 21:break;default:mn(n,e),xn(e)}}function xn(e){var n=e.flags;if(n&2){try{e:{for(var t=e.return;t!==null;){if(Fv(t)){var o=t;break e}t=t.return}throw Error(C(160))}switch(o.tag){case 5:var r=o.stateNode;o.flags&32&&(hr(r,""),o.flags&=-33);var a=Ic(e);ol(e,a,r);break;case 3:case 4:var i=o.stateNode.containerInfo,s=Ic(e);tl(e,s,i);break;default:throw Error(C(161))}}catch(l){me(e,e.return,l)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Yh(e,n,t){O=e,Uv(e)}function Uv(e,n,t){for(var o=(e.mode&1)!==0;O!==null;){var r=O,a=r.child;if(r.tag===22&&o){var i=r.memoizedState!==null||ua;if(!i){var s=r.alternate,l=s!==null&&s.memoizedState!==null||Te;s=ua;var u=Te;if(ua=i,(Te=l)&&!u)for(O=r;O!==null;)i=O,l=i.child,i.tag===22&&i.memoizedState!==null?Uc(r):l!==null?(l.return=i,O=l):Uc(r);for(;a!==null;)O=a,Uv(a),a=a.sibling;O=r,ua=s,Te=u}$c(e)}else r.subtreeFlags&8772&&a!==null?(a.return=r,O=a):$c(e)}}function $c(e){for(;O!==null;){var n=O;if(n.flags&8772){var t=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Te||mi(5,n);break;case 1:var o=n.stateNode;if(n.flags&4&&!Te)if(t===null)o.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:kn(n.type,t.memoizedProps);o.componentDidUpdate(r,t.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var a=n.updateQueue;a!==null&&xc(n,a,o);break;case 3:var i=n.updateQueue;if(i!==null){if(t=null,n.child!==null)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}xc(n,i,t)}break;case 5:var s=n.stateNode;if(t===null&&n.flags&4){t=s;var l=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var u=n.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&br(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(C(163))}Te||n.flags&512&&nl(n)}catch(v){me(n,n.return,v)}}if(n===e){O=null;break}if(t=n.sibling,t!==null){t.return=n.return,O=t;break}O=n.return}}function Vc(e){for(;O!==null;){var n=O;if(n===e){O=null;break}var t=n.sibling;if(t!==null){t.return=n.return,O=t;break}O=n.return}}function Uc(e){for(;O!==null;){var n=O;try{switch(n.tag){case 0:case 11:case 15:var t=n.return;try{mi(4,n)}catch(l){me(n,t,l)}break;case 1:var o=n.stateNode;if(typeof o.componentDidMount=="function"){var r=n.return;try{o.componentDidMount()}catch(l){me(n,r,l)}}var a=n.return;try{nl(n)}catch(l){me(n,a,l)}break;case 5:var i=n.return;try{nl(n)}catch(l){me(n,i,l)}}}catch(l){me(n,n.return,l)}if(n===e){O=null;break}var s=n.sibling;if(s!==null){s.return=n.return,O=s;break}O=n.return}}var qh=Math.ceil,Xa=Bn.ReactCurrentDispatcher,tu=Bn.ReactCurrentOwner,un=Bn.ReactCurrentBatchConfig,Y=0,ge=null,he=null,Pe=0,Qe=0,uo=zt(0),ze=0,Mr=null,Dt=0,ki=0,ou=0,dr=null,$e=null,ru=0,Co=1/0,_n=null,Ya=!1,rl=null,pt=null,ca=!1,at=null,qa=0,pr=0,al=null,Pa=-1,Ca=0;function Le(){return Y&6?ke():Pa!==-1?Pa:Pa=ke()}function vt(e){return e.mode&1?Y&2&&Pe!==0?Pe&-Pe:Lh.transition!==null?(Ca===0&&(Ca=Ep()),Ca):(e=q,e!==0||(e=window.event,e=e===void 0?16:_p(e.type)),e):1}function jn(e,n,t,o){if(50<pr)throw pr=0,al=null,Error(C(185));Ar(e,t,o),(!(Y&2)||e!==ge)&&(e===ge&&(!(Y&2)&&(ki|=t),ze===4&&ot(e,Pe)),We(e,o),t===1&&Y===0&&!(n.mode&1)&&(Co=ke()+500,di&&jt()))}function We(e,n){var t=e.callbackNode;Lf(e,n);var o=La(e,e===ge?Pe:0);if(o===0)t!==null&&Xu(t),e.callbackNode=null,e.callbackPriority=0;else if(n=o&-o,e.callbackPriority!==n){if(t!=null&&Xu(t),n===1)e.tag===0?Dh(Bc.bind(null,e)):Yp(Bc.bind(null,e)),Th(function(){!(Y&6)&&jt()}),t=null;else{switch(Pp(o)){case 1:t=Nl;break;case 4:t=xp;break;case 16:t=Da;break;case 536870912:t=Sp;break;default:t=Da}t=Gv(t,Bv.bind(null,e))}e.callbackPriority=n,e.callbackNode=t}}function Bv(e,n){if(Pa=-1,Ca=0,Y&6)throw Error(C(327));var t=e.callbackNode;if(yo()&&e.callbackNode!==t)return null;var o=La(e,e===ge?Pe:0);if(o===0)return null;if(o&30||o&e.expiredLanes||n)n=ei(e,o);else{n=o;var r=Y;Y|=2;var a=Kv();(ge!==e||Pe!==n)&&(_n=null,Co=ke()+500,Rt(e,n));do try{ty();break}catch(s){Wv(e,s)}while(!0);Bl(),Xa.current=a,Y=r,he!==null?n=0:(ge=null,Pe=0,n=ze)}if(n!==0){if(n===2&&(r=Ms(e),r!==0&&(o=r,n=il(e,r))),n===1)throw t=Mr,Rt(e,0),ot(e,o),We(e,ke()),t;if(n===6)ot(e,o);else{if(r=e.current.alternate,!(o&30)&&!ey(r)&&(n=ei(e,o),n===2&&(a=Ms(e),a!==0&&(o=a,n=il(e,a))),n===1))throw t=Mr,Rt(e,0),ot(e,o),We(e,ke()),t;switch(e.finishedWork=r,e.finishedLanes=o,n){case 0:case 1:throw Error(C(345));case 2:wt(e,$e,_n);break;case 3:if(ot(e,o),(o&130023424)===o&&(n=ru+500-ke(),10<n)){if(La(e,0)!==0)break;if(r=e.suspendedLanes,(r&o)!==o){Le(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=$s(wt.bind(null,e,$e,_n),n);break}wt(e,$e,_n);break;case 4:if(ot(e,o),(o&4194240)===o)break;for(n=e.eventTimes,r=-1;0<o;){var i=31-zn(o);a=1<<i,i=n[i],i>r&&(r=i),o&=~a}if(o=r,o=ke()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*qh(o/1960))-o,10<o){e.timeoutHandle=$s(wt.bind(null,e,$e,_n),o);break}wt(e,$e,_n);break;case 5:wt(e,$e,_n);break;default:throw Error(C(329))}}}return We(e,ke()),e.callbackNode===t?Bv.bind(null,e):null}function il(e,n){var t=dr;return e.current.memoizedState.isDehydrated&&(Rt(e,n).flags|=256),e=ei(e,n),e!==2&&(n=$e,$e=t,n!==null&&sl(n)),e}function sl(e){$e===null?$e=e:$e.push.apply($e,e)}function ey(e){for(var n=e;;){if(n.flags&16384){var t=n.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var o=0;o<t.length;o++){var r=t[o],a=r.getSnapshot;r=r.value;try{if(!bn(a(),r))return!1}catch{return!1}}}if(t=n.child,n.subtreeFlags&16384&&t!==null)t.return=n,n=t;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ot(e,n){for(n&=~ou,n&=~ki,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var t=31-zn(n),o=1<<t;e[t]=-1,n&=~o}}function Bc(e){if(Y&6)throw Error(C(327));yo();var n=La(e,0);if(!(n&1))return We(e,ke()),null;var t=ei(e,n);if(e.tag!==0&&t===2){var o=Ms(e);o!==0&&(n=o,t=il(e,o))}if(t===1)throw t=Mr,Rt(e,0),ot(e,n),We(e,ke()),t;if(t===6)throw Error(C(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,wt(e,$e,_n),We(e,ke()),null}function au(e,n){var t=Y;Y|=1;try{return e(n)}finally{Y=t,Y===0&&(Co=ke()+500,di&&jt())}}function Lt(e){at!==null&&at.tag===0&&!(Y&6)&&yo();var n=Y;Y|=1;var t=un.transition,o=q;try{if(un.transition=null,q=1,e)return e()}finally{q=o,un.transition=t,Y=n,!(Y&6)&&jt()}}function iu(){Qe=uo.current,ae(uo)}function Rt(e,n){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(t!==-1&&(e.timeoutHandle=-1,Nh(t)),he!==null)for(t=he.return;t!==null;){var o=t;switch($l(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Va();break;case 3:Eo(),ae(Ue),ae(Me),Ql();break;case 5:Jl(o);break;case 4:Eo();break;case 13:ae(ce);break;case 19:ae(ce);break;case 10:Wl(o.type._context);break;case 22:case 23:iu()}t=t.return}if(ge=e,he=e=mt(e.current,null),Pe=Qe=n,ze=0,Mr=null,ou=ki=Dt=0,$e=dr=null,St!==null){for(n=0;n<St.length;n++)if(t=St[n],o=t.interleaved,o!==null){t.interleaved=null;var r=o.next,a=t.pending;if(a!==null){var i=a.next;a.next=r,o.next=i}t.pending=o}St=null}return e}function Wv(e,n){do{var t=he;try{if(Bl(),xa.current=Ga,Qa){for(var o=de.memoizedState;o!==null;){var r=o.queue;r!==null&&(r.pending=null),o=o.next}Qa=!1}if(Ot=0,be=ye=de=null,ur=!1,Rr=0,tu.current=null,t===null||t.return===null){ze=1,Mr=n,he=null;break}e:{var a=e,i=t.return,s=t,l=n;if(n=Pe,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=s,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var v=d.alternate;v?(d.updateQueue=v.updateQueue,d.memoizedState=v.memoizedState,d.lanes=v.lanes):(d.updateQueue=null,d.memoizedState=null)}var j=Nc(i);if(j!==null){j.flags&=-257,Tc(j,i,s,a,n),j.mode&1&&Rc(a,u,n),n=j,l=u;var b=n.updateQueue;if(b===null){var f=new Set;f.add(l),n.updateQueue=f}else b.add(l);break e}else{if(!(n&1)){Rc(a,u,n),su();break e}l=Error(C(426))}}else if(ue&&s.mode&1){var w=Nc(i);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Tc(w,i,s,a,n),Vl(Po(l,s));break e}}a=l=Po(l,s),ze!==4&&(ze=2),dr===null?dr=[a]:dr.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,n&=-n,a.lanes|=n;var k=Pv(a,l,n);wc(a,k);break e;case 1:s=l;var m=a.type,h=a.stateNode;if(!(a.flags&128)&&(typeof m.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(pt===null||!pt.has(h)))){a.flags|=65536,n&=-n,a.lanes|=n;var x=Cv(a,s,n);wc(a,x);break e}}a=a.return}while(a!==null)}Zv(t)}catch(P){n=P,he===t&&t!==null&&(he=t=t.return);continue}break}while(!0)}function Kv(){var e=Xa.current;return Xa.current=Ga,e===null?Ga:e}function su(){(ze===0||ze===3||ze===2)&&(ze=4),ge===null||!(Dt&268435455)&&!(ki&268435455)||ot(ge,Pe)}function ei(e,n){var t=Y;Y|=2;var o=Kv();(ge!==e||Pe!==n)&&(_n=null,Rt(e,n));do try{ny();break}catch(r){Wv(e,r)}while(!0);if(Bl(),Y=t,Xa.current=o,he!==null)throw Error(C(261));return ge=null,Pe=0,ze}function ny(){for(;he!==null;)Hv(he)}function ty(){for(;he!==null&&!Pf();)Hv(he)}function Hv(e){var n=Qv(e.alternate,e,Qe);e.memoizedProps=e.pendingProps,n===null?Zv(e):he=n,tu.current=null}function Zv(e){var n=e;do{var t=n.alternate;if(e=n.return,n.flags&32768){if(t=Qh(t,n),t!==null){t.flags&=32767,he=t;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ze=6,he=null;return}}else if(t=Jh(t,n,Qe),t!==null){he=t;return}if(n=n.sibling,n!==null){he=n;return}he=n=e}while(n!==null);ze===0&&(ze=5)}function wt(e,n,t){var o=q,r=un.transition;try{un.transition=null,q=1,oy(e,n,t,o)}finally{un.transition=r,q=o}return null}function oy(e,n,t,o){do yo();while(at!==null);if(Y&6)throw Error(C(327));t=e.finishedWork;var r=e.finishedLanes;if(t===null)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(C(177));e.callbackNode=null,e.callbackPriority=0;var a=t.lanes|t.childLanes;if(Af(e,a),e===ge&&(he=ge=null,Pe=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||ca||(ca=!0,Gv(Da,function(){return yo(),null})),a=(t.flags&15990)!==0,t.subtreeFlags&15990||a){a=un.transition,un.transition=null;var i=q;q=1;var s=Y;Y|=4,tu.current=null,Xh(e,t),Vv(t,e),wh(Is),Aa=!!As,Is=As=null,e.current=t,Yh(t),Cf(),Y=s,q=i,un.transition=a}else e.current=t;if(ca&&(ca=!1,at=e,qa=r),a=e.pendingLanes,a===0&&(pt=null),Tf(t.stateNode),We(e,ke()),n!==null)for(o=e.onRecoverableError,t=0;t<n.length;t++)r=n[t],o(r.value,{componentStack:r.stack,digest:r.digest});if(Ya)throw Ya=!1,e=rl,rl=null,e;return qa&1&&e.tag!==0&&yo(),a=e.pendingLanes,a&1?e===al?pr++:(pr=0,al=e):pr=0,jt(),null}function yo(){if(at!==null){var e=Pp(qa),n=un.transition,t=q;try{if(un.transition=null,q=16>e?16:e,at===null)var o=!1;else{if(e=at,at=null,qa=0,Y&6)throw Error(C(331));var r=Y;for(Y|=4,O=e.current;O!==null;){var a=O,i=a.child;if(O.flags&16){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(O=u;O!==null;){var d=O;switch(d.tag){case 0:case 11:case 15:cr(8,d,a)}var p=d.child;if(p!==null)p.return=d,O=p;else for(;O!==null;){d=O;var v=d.sibling,j=d.return;if(Iv(d),d===u){O=null;break}if(v!==null){v.return=j,O=v;break}O=j}}}var b=a.alternate;if(b!==null){var f=b.child;if(f!==null){b.child=null;do{var w=f.sibling;f.sibling=null,f=w}while(f!==null)}}O=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,O=i;else e:for(;O!==null;){if(a=O,a.flags&2048)switch(a.tag){case 0:case 11:case 15:cr(9,a,a.return)}var k=a.sibling;if(k!==null){k.return=a.return,O=k;break e}O=a.return}}var m=e.current;for(O=m;O!==null;){i=O;var h=i.child;if(i.subtreeFlags&2064&&h!==null)h.return=i,O=h;else e:for(i=m;O!==null;){if(s=O,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:mi(9,s)}}catch(P){me(s,s.return,P)}if(s===i){O=null;break e}var x=s.sibling;if(x!==null){x.return=s.return,O=x;break e}O=s.return}}if(Y=r,jt(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(ii,e)}catch{}o=!0}return o}finally{q=t,un.transition=n}}return!1}function Wc(e,n,t){n=Po(t,n),n=Pv(e,n,1),e=dt(e,n,1),n=Le(),e!==null&&(Ar(e,1,n),We(e,n))}function me(e,n,t){if(e.tag===3)Wc(e,e,t);else for(;n!==null;){if(n.tag===3){Wc(n,e,t);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(pt===null||!pt.has(o))){e=Po(t,e),e=Cv(n,e,1),n=dt(n,e,1),e=Le(),n!==null&&(Ar(n,1,e),We(n,e));break}}n=n.return}}function ry(e,n,t){var o=e.pingCache;o!==null&&o.delete(n),n=Le(),e.pingedLanes|=e.suspendedLanes&t,ge===e&&(Pe&t)===t&&(ze===4||ze===3&&(Pe&130023424)===Pe&&500>ke()-ru?Rt(e,0):ou|=t),We(e,n)}function Jv(e,n){n===0&&(e.mode&1?(n=ea,ea<<=1,!(ea&130023424)&&(ea=4194304)):n=1);var t=Le();e=Vn(e,n),e!==null&&(Ar(e,n,t),We(e,t))}function ay(e){var n=e.memoizedState,t=0;n!==null&&(t=n.retryLane),Jv(e,t)}function iy(e,n){var t=0;switch(e.tag){case 13:var o=e.stateNode,r=e.memoizedState;r!==null&&(t=r.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(C(314))}o!==null&&o.delete(n),Jv(e,t)}var Qv;Qv=function(e,n,t){if(e!==null)if(e.memoizedProps!==n.pendingProps||Ue.current)Ve=!0;else{if(!(e.lanes&t)&&!(n.flags&128))return Ve=!1,Zh(e,n,t);Ve=!!(e.flags&131072)}else Ve=!1,ue&&n.flags&1048576&&qp(n,Wa,n.index);switch(n.lanes=0,n.tag){case 2:var o=n.type;Ea(e,n),e=n.pendingProps;var r=wo(n,Me.current);ho(n,t),r=Xl(null,n,o,e,r,t);var a=Yl();return n.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Be(o)?(a=!0,Ua(n)):a=!1,n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Hl(n),r.updater=vi,n.stateNode=r,r._reactInternals=n,Zs(n,o,e,t),n=Gs(null,n,o,!0,a,t)):(n.tag=0,ue&&a&&Fl(n),De(null,n,r,t),n=n.child),n;case 16:o=n.elementType;e:{switch(Ea(e,n),e=n.pendingProps,r=o._init,o=r(o._payload),n.type=o,r=n.tag=ly(o),e=kn(o,e),r){case 0:n=Qs(null,n,o,e,t);break e;case 1:n=Oc(null,n,o,e,t);break e;case 11:n=Mc(null,n,o,e,t);break e;case 14:n=_c(null,n,o,kn(o.type,e),t);break e}throw Error(C(306,o,""))}return n;case 0:return o=n.type,r=n.pendingProps,r=n.elementType===o?r:kn(o,r),Qs(e,n,o,r,t);case 1:return o=n.type,r=n.pendingProps,r=n.elementType===o?r:kn(o,r),Oc(e,n,o,r,t);case 3:e:{if(Mv(n),e===null)throw Error(C(387));o=n.pendingProps,a=n.memoizedState,r=a.element,av(e,n),Za(n,o,null,t);var i=n.memoizedState;if(o=i.element,a.isDehydrated)if(a={element:o,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},n.updateQueue.baseState=a,n.memoizedState=a,n.flags&256){r=Po(Error(C(423)),n),n=Dc(e,n,o,t,r);break e}else if(o!==r){r=Po(Error(C(424)),n),n=Dc(e,n,o,t,r);break e}else for(Ge=ct(n.stateNode.containerInfo.firstChild),Xe=n,ue=!0,yn=null,t=ov(n,null,o,t),n.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(xo(),o===r){n=Un(e,n,t);break e}De(e,n,o,t)}n=n.child}return n;case 5:return iv(n),e===null&&Ws(n),o=n.type,r=n.pendingProps,a=e!==null?e.memoizedProps:null,i=r.children,Fs(o,r)?i=null:a!==null&&Fs(o,a)&&(n.flags|=32),Tv(e,n),De(e,n,i,t),n.child;case 6:return e===null&&Ws(n),null;case 13:return _v(e,n,t);case 4:return Zl(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=So(n,null,o,t):De(e,n,o,t),n.child;case 11:return o=n.type,r=n.pendingProps,r=n.elementType===o?r:kn(o,r),Mc(e,n,o,r,t);case 7:return De(e,n,n.pendingProps,t),n.child;case 8:return De(e,n,n.pendingProps.children,t),n.child;case 12:return De(e,n,n.pendingProps.children,t),n.child;case 10:e:{if(o=n.type._context,r=n.pendingProps,a=n.memoizedProps,i=r.value,te(Ka,o._currentValue),o._currentValue=i,a!==null)if(bn(a.value,i)){if(a.children===r.children&&!Ue.current){n=Un(e,n,t);break e}}else for(a=n.child,a!==null&&(a.return=n);a!==null;){var s=a.dependencies;if(s!==null){i=a.child;for(var l=s.firstContext;l!==null;){if(l.context===o){if(a.tag===1){l=An(-1,t&-t),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}a.lanes|=t,l=a.alternate,l!==null&&(l.lanes|=t),Ks(a.return,t,n),s.lanes|=t;break}l=l.next}}else if(a.tag===10)i=a.type===n.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(C(341));i.lanes|=t,s=i.alternate,s!==null&&(s.lanes|=t),Ks(i,t,n),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===n){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}De(e,n,r.children,t),n=n.child}return n;case 9:return r=n.type,o=n.pendingProps.children,ho(n,t),r=cn(r),o=o(r),n.flags|=1,De(e,n,o,t),n.child;case 14:return o=n.type,r=kn(o,n.pendingProps),r=kn(o.type,r),_c(e,n,o,r,t);case 15:return Rv(e,n,n.type,n.pendingProps,t);case 17:return o=n.type,r=n.pendingProps,r=n.elementType===o?r:kn(o,r),Ea(e,n),n.tag=1,Be(o)?(e=!0,Ua(n)):e=!1,ho(n,t),Ev(n,o,r),Zs(n,o,r,t),Gs(null,n,o,!0,e,t);case 19:return Ov(e,n,t);case 22:return Nv(e,n,t)}throw Error(C(156,n.tag))};function Gv(e,n){return wp(e,n)}function sy(e,n,t,o){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(e,n,t,o){return new sy(e,n,t,o)}function lu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ly(e){if(typeof e=="function")return lu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Pl)return 11;if(e===Cl)return 14}return 2}function mt(e,n){var t=e.alternate;return t===null?(t=ln(e.tag,n,e.key,e.mode),t.elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=n,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=e.flags&14680064,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,n=e.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function Ra(e,n,t,o,r,a){var i=2;if(o=e,typeof e=="function")lu(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case qt:return Nt(t.children,r,a,n);case El:i=8,r|=8;break;case hs:return e=ln(12,t,n,r|2),e.elementType=hs,e.lanes=a,e;case ys:return e=ln(13,t,n,r),e.elementType=ys,e.lanes=a,e;case zs:return e=ln(19,t,n,r),e.elementType=zs,e.lanes=a,e;case ip:return fi(t,r,a,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case rp:i=10;break e;case ap:i=9;break e;case Pl:i=11;break e;case Cl:i=14;break e;case et:i=16,o=null;break e}throw Error(C(130,e==null?e:typeof e,""))}return n=ln(i,t,n,r),n.elementType=e,n.type=o,n.lanes=a,n}function Nt(e,n,t,o){return e=ln(7,e,o,n),e.lanes=t,e}function fi(e,n,t,o){return e=ln(22,e,o,n),e.elementType=ip,e.lanes=t,e.stateNode={isHidden:!1},e}function es(e,n,t){return e=ln(6,e,null,n),e.lanes=t,e}function ns(e,n,t){return n=ln(4,e.children!==null?e.children:[],e.key,n),n.lanes=t,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function uy(e,n,t,o,r){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Di(0),this.expirationTimes=Di(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Di(0),this.identifierPrefix=o,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function uu(e,n,t,o,r,a,i,s,l){return e=new uy(e,n,t,s,l),n===1?(n=1,a===!0&&(n|=8)):n=0,a=ln(3,null,null,n),e.current=a,a.stateNode=e,a.memoizedState={element:o,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hl(a),e}function cy(e,n,t){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yt,key:o==null?null:""+o,children:e,containerInfo:n,implementation:t}}function Xv(e){if(!e)return ft;e=e._reactInternals;e:{if(Vt(e)!==e||e.tag!==1)throw Error(C(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Be(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(C(171))}if(e.tag===1){var t=e.type;if(Be(t))return Xp(e,t,n)}return n}function Yv(e,n,t,o,r,a,i,s,l){return e=uu(t,o,!0,e,r,a,i,s,l),e.context=Xv(null),t=e.current,o=Le(),r=vt(t),a=An(o,r),a.callback=n??null,dt(t,a,r),e.current.lanes=r,Ar(e,r,o),We(e,o),e}function hi(e,n,t,o){var r=n.current,a=Le(),i=vt(r);return t=Xv(t),n.context===null?n.context=t:n.pendingContext=t,n=An(a,i),n.payload={element:e},o=o===void 0?null:o,o!==null&&(n.callback=o),e=dt(r,n,i),e!==null&&(jn(e,r,i,a),wa(e,r,i)),i}function ni(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Kc(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var t=e.retryLane;e.retryLane=t!==0&&t<n?t:n}}function cu(e,n){Kc(e,n),(e=e.alternate)&&Kc(e,n)}function dy(){return null}var qv=typeof reportError=="function"?reportError:function(e){console.error(e)};function du(e){this._internalRoot=e}yi.prototype.render=du.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(C(409));hi(e,n,null,null)};yi.prototype.unmount=du.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Lt(function(){hi(null,e,null,null)}),n[$n]=null}};function yi(e){this._internalRoot=e}yi.prototype.unstable_scheduleHydration=function(e){if(e){var n=Np();e={blockedOn:null,target:e,priority:n};for(var t=0;t<tt.length&&n!==0&&n<tt[t].priority;t++);tt.splice(t,0,e),t===0&&Mp(e)}};function pu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function zi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Hc(){}function py(e,n,t,o,r){if(r){if(typeof o=="function"){var a=o;o=function(){var u=ni(i);a.call(u)}}var i=Yv(n,o,e,0,null,!1,!1,"",Hc);return e._reactRootContainer=i,e[$n]=i.current,xr(e.nodeType===8?e.parentNode:e),Lt(),i}for(;r=e.lastChild;)e.removeChild(r);if(typeof o=="function"){var s=o;o=function(){var u=ni(l);s.call(u)}}var l=uu(e,0,!1,null,null,!1,!1,"",Hc);return e._reactRootContainer=l,e[$n]=l.current,xr(e.nodeType===8?e.parentNode:e),Lt(function(){hi(n,l,t,o)}),l}function ji(e,n,t,o,r){var a=t._reactRootContainer;if(a){var i=a;if(typeof r=="function"){var s=r;r=function(){var l=ni(i);s.call(l)}}hi(n,i,e,r)}else i=py(t,n,e,r,o);return ni(i)}Cp=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var t=tr(n.pendingLanes);t!==0&&(Tl(n,t|1),We(n,ke()),!(Y&6)&&(Co=ke()+500,jt()))}break;case 13:Lt(function(){var o=Vn(e,1);if(o!==null){var r=Le();jn(o,e,1,r)}}),cu(e,1)}};Ml=function(e){if(e.tag===13){var n=Vn(e,134217728);if(n!==null){var t=Le();jn(n,e,134217728,t)}cu(e,134217728)}};Rp=function(e){if(e.tag===13){var n=vt(e),t=Vn(e,n);if(t!==null){var o=Le();jn(t,e,n,o)}cu(e,n)}};Np=function(){return q};Tp=function(e,n){var t=q;try{return q=e,n()}finally{q=t}};Rs=function(e,n,t){switch(n){case"input":if(gs(e,t),n=t.name,t.type==="radio"&&n!=null){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<t.length;n++){var o=t[n];if(o!==e&&o.form===e.form){var r=ci(o);if(!r)throw Error(C(90));lp(o),gs(o,r)}}}break;case"textarea":cp(e,t);break;case"select":n=t.value,n!=null&&vo(e,!!t.multiple,n,!1)}};hp=au;yp=Lt;var vy={usingClientEntryPoint:!1,Events:[Fr,oo,ci,kp,fp,au]},Jo={findFiberByHostInstance:xt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},my={bundleType:Jo.bundleType,version:Jo.version,rendererPackageName:Jo.rendererPackageName,rendererConfig:Jo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=bp(e),e===null?null:e.stateNode},findFiberByHostInstance:Jo.findFiberByHostInstance||dy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var da=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!da.isDisabled&&da.supportsFiber)try{ii=da.inject(my),Rn=da}catch{}}qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vy;qe.createPortal=function(e,n){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pu(n))throw Error(C(200));return cy(e,n,null,t)};qe.createRoot=function(e,n){if(!pu(e))throw Error(C(299));var t=!1,o="",r=qv;return n!=null&&(n.unstable_strictMode===!0&&(t=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(r=n.onRecoverableError)),n=uu(e,1,!1,null,null,t,!1,o,r),e[$n]=n.current,xr(e.nodeType===8?e.parentNode:e),new du(n)};qe.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(C(188)):(e=Object.keys(e).join(","),Error(C(268,e)));return e=bp(n),e=e===null?null:e.stateNode,e};qe.flushSync=function(e){return Lt(e)};qe.hydrate=function(e,n,t){if(!zi(n))throw Error(C(200));return ji(null,e,n,!0,t)};qe.hydrateRoot=function(e,n,t){if(!pu(e))throw Error(C(405));var o=t!=null&&t.hydratedSources||null,r=!1,a="",i=qv;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),n=Yv(n,null,e,1,t??null,r,!1,a,i),e[$n]=n.current,xr(e),o)for(e=0;e<o.length;e++)t=o[e],r=t._getVersion,r=r(t._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[t,r]:n.mutableSourceEagerHydrationData.push(t,r);return new yi(n)};qe.render=function(e,n,t){if(!zi(n))throw Error(C(200));return ji(null,e,n,!1,t)};qe.unmountComponentAtNode=function(e){if(!zi(e))throw Error(C(40));return e._reactRootContainer?(Lt(function(){ji(null,null,e,!1,function(){e._reactRootContainer=null,e[$n]=null})}),!0):!1};qe.unstable_batchedUpdates=au;qe.unstable_renderSubtreeIntoContainer=function(e,n,t,o){if(!zi(t))throw Error(C(200));if(e==null||e._reactInternals===void 0)throw Error(C(38));return ji(e,n,t,!1,o)};qe.version="18.3.1-next-f1338f8080-20240426";function em(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(em)}catch(e){console.error(e)}}em(),ep.exports=qe;var Vr=ep.exports;const nm=$d(Vr),ky=Fd({__proto__:null,default:nm},[Vr]);var Zc=Vr;ks.createRoot=Zc.createRoot,ks.hydrateRoot=Zc.hydrateRoot;function Jc(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function fy(...e){return n=>{let t=!1;const o=e.map(r=>{const a=Jc(r,n);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let r=0;r<o.length;r++){const a=o[r];typeof a=="function"?a():Jc(e[r],null)}}}}var Ut=c.forwardRef((e,n)=>{const{children:t,...o}=e,r=c.Children.toArray(t),a=r.find(yy);if(a){const i=a.props.children,s=r.map(l=>l===a?c.Children.count(i)>1?c.Children.only(null):c.isValidElement(i)?i.props.children:null:l);return z.jsx(ll,{...o,ref:n,children:c.isValidElement(i)?c.cloneElement(i,void 0,s):null})}return z.jsx(ll,{...o,ref:n,children:t})});Ut.displayName="Slot";var ll=c.forwardRef((e,n)=>{const{children:t,...o}=e;if(c.isValidElement(t)){const r=jy(t),a=zy(o,t.props);return t.type!==c.Fragment&&(a.ref=n?fy(n,r):r),c.cloneElement(t,a)}return c.Children.count(t)>1?c.Children.only(null):null});ll.displayName="SlotClone";var hy=({children:e})=>z.jsx(z.Fragment,{children:e});function yy(e){return c.isValidElement(e)&&e.type===hy}function zy(e,n){const t={...n};for(const o in n){const r=e[o],a=n[o];/^on[A-Z]/.test(o)?r&&a?t[o]=(...s)=>{a(...s),r(...s)}:r&&(t[o]=r):o==="style"?t[o]={...r,...a}:o==="className"&&(t[o]=[r,a].filter(Boolean).join(" "))}return{...e,...t}}function jy(e){var o,r;let n=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,t=n&&"isReactWarning"in n&&n.isReactWarning;return t?e.ref:(n=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,t=n&&"isReactWarning"in n&&n.isReactWarning,t?e.props.ref:e.props.ref||e.ref)}function tm(e){var n,t,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(n=0;n<r;n++)e[n]&&(t=tm(e[n]))&&(o&&(o+=" "),o+=t)}else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}function om(){for(var e,n,t=0,o="",r=arguments.length;t<r;t++)(e=arguments[t])&&(n=tm(e))&&(o&&(o+=" "),o+=n);return o}const Qc=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Gc=om,by=(e,n)=>t=>{var o;if((n==null?void 0:n.variants)==null)return Gc(e,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:r,defaultVariants:a}=n,i=Object.keys(r).map(u=>{const d=t==null?void 0:t[u],p=a==null?void 0:a[u];if(d===null)return null;const v=Qc(d)||Qc(p);return r[u][v]}),s=t&&Object.entries(t).reduce((u,d)=>{let[p,v]=d;return v===void 0||(u[p]=v),u},{}),l=n==null||(o=n.compoundVariants)===null||o===void 0?void 0:o.reduce((u,d)=>{let{class:p,className:v,...j}=d;return Object.entries(j).every(b=>{let[f,w]=b;return Array.isArray(w)?w.includes({...a,...s}[f]):{...a,...s}[f]===w})?[...u,p,v]:u},[]);return Gc(e,i,l,t==null?void 0:t.class,t==null?void 0:t.className)},vu="-",gy=e=>{const n=xy(e),{conflictingClassGroups:t,conflictingClassGroupModifiers:o}=e;return{getClassGroupId:i=>{const s=i.split(vu);return s[0]===""&&s.length!==1&&s.shift(),rm(s,n)||wy(i)},getConflictingClassGroupIds:(i,s)=>{const l=t[i]||[];return s&&o[i]?[...l,...o[i]]:l}}},rm=(e,n)=>{var i;if(e.length===0)return n.classGroupId;const t=e[0],o=n.nextPart.get(t),r=o?rm(e.slice(1),o):void 0;if(r)return r;if(n.validators.length===0)return;const a=e.join(vu);return(i=n.validators.find(({validator:s})=>s(a)))==null?void 0:i.classGroupId},Xc=/^\[(.+)\]$/,wy=e=>{if(Xc.test(e)){const n=Xc.exec(e)[1],t=n==null?void 0:n.substring(0,n.indexOf(":"));if(t)return"arbitrary.."+t}},xy=e=>{const{theme:n,prefix:t}=e,o={nextPart:new Map,validators:[]};return Ey(Object.entries(e.classGroups),t).forEach(([a,i])=>{ul(i,o,a,n)}),o},ul=(e,n,t,o)=>{e.forEach(r=>{if(typeof r=="string"){const a=r===""?n:Yc(n,r);a.classGroupId=t;return}if(typeof r=="function"){if(Sy(r)){ul(r(o),n,t,o);return}n.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([a,i])=>{ul(i,Yc(n,a),t,o)})})},Yc=(e,n)=>{let t=e;return n.split(vu).forEach(o=>{t.nextPart.has(o)||t.nextPart.set(o,{nextPart:new Map,validators:[]}),t=t.nextPart.get(o)}),t},Sy=e=>e.isThemeGetter,Ey=(e,n)=>n?e.map(([t,o])=>{const r=o.map(a=>typeof a=="string"?n+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([i,s])=>[n+i,s])):a);return[t,r]}):e,Py=e=>{if(e<1)return{get:()=>{},set:()=>{}};let n=0,t=new Map,o=new Map;const r=(a,i)=>{t.set(a,i),n++,n>e&&(n=0,o=t,t=new Map)};return{get(a){let i=t.get(a);if(i!==void 0)return i;if((i=o.get(a))!==void 0)return r(a,i),i},set(a,i){t.has(a)?t.set(a,i):r(a,i)}}},am="!",Cy=e=>{const{separator:n,experimentalParseClassName:t}=e,o=n.length===1,r=n[0],a=n.length,i=s=>{const l=[];let u=0,d=0,p;for(let w=0;w<s.length;w++){let k=s[w];if(u===0){if(k===r&&(o||s.slice(w,w+a)===n)){l.push(s.slice(d,w)),d=w+a;continue}if(k==="/"){p=w;continue}}k==="["?u++:k==="]"&&u--}const v=l.length===0?s:s.substring(d),j=v.startsWith(am),b=j?v.substring(1):v,f=p&&p>d?p-d:void 0;return{modifiers:l,hasImportantModifier:j,baseClassName:b,maybePostfixModifierPosition:f}};return t?s=>t({className:s,parseClassName:i}):i},Ry=e=>{if(e.length<=1)return e;const n=[];let t=[];return e.forEach(o=>{o[0]==="["?(n.push(...t.sort(),o),t=[]):t.push(o)}),n.push(...t.sort()),n},Ny=e=>({cache:Py(e.cacheSize),parseClassName:Cy(e),...gy(e)}),Ty=/\s+/,My=(e,n)=>{const{parseClassName:t,getClassGroupId:o,getConflictingClassGroupIds:r}=n,a=[],i=e.trim().split(Ty);let s="";for(let l=i.length-1;l>=0;l-=1){const u=i[l],{modifiers:d,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:j}=t(u);let b=!!j,f=o(b?v.substring(0,j):v);if(!f){if(!b){s=u+(s.length>0?" "+s:s);continue}if(f=o(v),!f){s=u+(s.length>0?" "+s:s);continue}b=!1}const w=Ry(d).join(":"),k=p?w+am:w,m=k+f;if(a.includes(m))continue;a.push(m);const h=r(f,b);for(let x=0;x<h.length;++x){const P=h[x];a.push(k+P)}s=u+(s.length>0?" "+s:s)}return s};function _y(){let e=0,n,t,o="";for(;e<arguments.length;)(n=arguments[e++])&&(t=im(n))&&(o&&(o+=" "),o+=t);return o}const im=e=>{if(typeof e=="string")return e;let n,t="";for(let o=0;o<e.length;o++)e[o]&&(n=im(e[o]))&&(t&&(t+=" "),t+=n);return t};function Oy(e,...n){let t,o,r,a=i;function i(l){const u=n.reduce((d,p)=>p(d),e());return t=Ny(u),o=t.cache.get,r=t.cache.set,a=s,s(l)}function s(l){const u=o(l);if(u)return u;const d=My(l,t);return r(l,d),d}return function(){return a(_y.apply(null,arguments))}}const oe=e=>{const n=t=>t[e]||[];return n.isThemeGetter=!0,n},sm=/^\[(?:([a-z-]+):)?(.+)\]$/i,Dy=/^\d+\/\d+$/,Ly=new Set(["px","full","screen"]),Ay=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Iy=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Fy=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,$y=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Vy=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Mn=e=>zo(e)||Ly.has(e)||Dy.test(e),Gn=e=>Mo(e,"length",Qy),zo=e=>!!e&&!Number.isNaN(Number(e)),ts=e=>Mo(e,"number",zo),Qo=e=>!!e&&Number.isInteger(Number(e)),Uy=e=>e.endsWith("%")&&zo(e.slice(0,-1)),H=e=>sm.test(e),Xn=e=>Ay.test(e),By=new Set(["length","size","percentage"]),Wy=e=>Mo(e,By,lm),Ky=e=>Mo(e,"position",lm),Hy=new Set(["image","url"]),Zy=e=>Mo(e,Hy,Xy),Jy=e=>Mo(e,"",Gy),Go=()=>!0,Mo=(e,n,t)=>{const o=sm.exec(e);return o?o[1]?typeof n=="string"?o[1]===n:n.has(o[1]):t(o[2]):!1},Qy=e=>Iy.test(e)&&!Fy.test(e),lm=()=>!1,Gy=e=>$y.test(e),Xy=e=>Vy.test(e),Yy=()=>{const e=oe("colors"),n=oe("spacing"),t=oe("blur"),o=oe("brightness"),r=oe("borderColor"),a=oe("borderRadius"),i=oe("borderSpacing"),s=oe("borderWidth"),l=oe("contrast"),u=oe("grayscale"),d=oe("hueRotate"),p=oe("invert"),v=oe("gap"),j=oe("gradientColorStops"),b=oe("gradientColorStopPositions"),f=oe("inset"),w=oe("margin"),k=oe("opacity"),m=oe("padding"),h=oe("saturate"),x=oe("scale"),P=oe("sepia"),M=oe("skew"),y=oe("space"),R=oe("translate"),L=()=>["auto","contain","none"],_=()=>["auto","hidden","clip","visible","scroll"],Z=()=>["auto",H,n],V=()=>[H,n],ne=()=>["",Mn,Gn],ve=()=>["auto",zo,H],Fe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Ke=()=>["solid","dashed","dotted","double","none"],pn=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],N=()=>["start","end","center","between","around","evenly","stretch"],I=()=>["","0",H],$=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>[zo,H];return{cacheSize:500,separator:":",theme:{colors:[Go],spacing:[Mn,Gn],blur:["none","",Xn,H],brightness:J(),borderColor:[e],borderRadius:["none","","full",Xn,H],borderSpacing:V(),borderWidth:ne(),contrast:J(),grayscale:I(),hueRotate:J(),invert:I(),gap:V(),gradientColorStops:[e],gradientColorStopPositions:[Uy,Gn],inset:Z(),margin:Z(),opacity:J(),padding:V(),saturate:J(),scale:J(),sepia:I(),skew:J(),space:V(),translate:V()},classGroups:{aspect:[{aspect:["auto","square","video",H]}],container:["container"],columns:[{columns:[Xn]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Fe(),H]}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qo,H]}],basis:[{basis:Z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",H]}],grow:[{grow:I()}],shrink:[{shrink:I()}],order:[{order:["first","last","none",Qo,H]}],"grid-cols":[{"grid-cols":[Go]}],"col-start-end":[{col:["auto",{span:["full",Qo,H]},H]}],"col-start":[{"col-start":ve()}],"col-end":[{"col-end":ve()}],"grid-rows":[{"grid-rows":[Go]}],"row-start-end":[{row:["auto",{span:[Qo,H]},H]}],"row-start":[{"row-start":ve()}],"row-end":[{"row-end":ve()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",H]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",H]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...N()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...N(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...N(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[m]}],px:[{px:[m]}],py:[{py:[m]}],ps:[{ps:[m]}],pe:[{pe:[m]}],pt:[{pt:[m]}],pr:[{pr:[m]}],pb:[{pb:[m]}],pl:[{pl:[m]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[y]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[y]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",H,n]}],"min-w":[{"min-w":[H,n,"min","max","fit"]}],"max-w":[{"max-w":[H,n,"none","full","min","max","fit","prose",{screen:[Xn]},Xn]}],h:[{h:[H,n,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[H,n,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[H,n,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[H,n,"auto","min","max","fit"]}],"font-size":[{text:["base",Xn,Gn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ts]}],"font-family":[{font:[Go]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",H]}],"line-clamp":[{"line-clamp":["none",zo,ts]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Mn,H]}],"list-image":[{"list-image":["none",H]}],"list-style-type":[{list:["none","disc","decimal",H]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[k]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[k]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ke(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Mn,Gn]}],"underline-offset":[{"underline-offset":["auto",Mn,H]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",H]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",H]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[k]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Fe(),Ky]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Wy]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Zy]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[j]}],"gradient-via":[{via:[j]}],"gradient-to":[{to:[j]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[k]}],"border-style":[{border:[...Ke(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[k]}],"divide-style":[{divide:Ke()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...Ke()]}],"outline-offset":[{"outline-offset":[Mn,H]}],"outline-w":[{outline:[Mn,Gn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:ne()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[k]}],"ring-offset-w":[{"ring-offset":[Mn,Gn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Xn,Jy]}],"shadow-color":[{shadow:[Go]}],opacity:[{opacity:[k]}],"mix-blend":[{"mix-blend":[...pn(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":pn()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[o]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Xn,H]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[p]}],saturate:[{saturate:[h]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[o]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[k]}],"backdrop-saturate":[{"backdrop-saturate":[h]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",H]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",H]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",H]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[Qo,H]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",H]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",H]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",H]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Mn,Gn,ts]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},qy=Oy(Yy);function Tn(...e){return qy(om(e))}function ez(e){const n=[...e];for(let t=n.length-1;t>0;t--){const o=Math.floor(Math.random()*(t+1)),r=n[t];n[t]=n[o],n[o]=r}return n}function nz(e){return`${e}_${new Date().getTime()}`}const tz=by("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Cn=c.forwardRef(({className:e,variant:n,size:t,asChild:o=!1,...r},a)=>{const i=o?Ut:"button";return z.jsx(i,{className:Tn(tz({variant:n,size:t,className:e})),ref:a,...r})});Cn.displayName="Button";/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oz=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),um=(...e)=>e.filter((n,t,o)=>!!n&&o.indexOf(n)===t).join(" ");/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=c.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:t=2,absoluteStrokeWidth:o,className:r="",children:a,iconNode:i,...s},l)=>c.createElement("svg",{ref:l,...rz,width:n,height:n,stroke:e,strokeWidth:o?Number(t)*24/Number(n):t,className:um("lucide",r),...s},[...i.map(([u,d])=>c.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=(e,n)=>{const t=c.forwardRef(({className:o,...r},a)=>c.createElement(az,{ref:a,iconNode:n,className:um(`lucide-${oz(e)}`,o),...r}));return t.displayName=`${e}`,t};/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=bi("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=bi("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=bi("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=bi("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),iz=(e,n)=>z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 0 24 24",ref:n,...e,children:z.jsx("path",{stroke:"currentColor",strokeLinejoin:"round",d:"M18.894 4.344A17.409 17.409 0 0 0 14.532 3c-.192.33-.406.779-.555 1.13a16.677 16.677 0 0 0-4.833 0c-.15-.351-.373-.8-.555-1.13a17.162 17.162 0 0 0-4.363 1.344C1.463 8.419.716 12.397 1.09 16.323A17.782 17.782 0 0 0 6.435 19a13 13 0 0 0 1.14-1.845 11.182 11.182 0 0 1-1.802-.864c.15-.107.299-.224.438-.342 3.477 1.59 7.243 1.59 10.678 0 .15.118.288.235.437.342a11.18 11.18 0 0 1-1.802.864A13 13 0 0 0 16.665 19a17.684 17.684 0 0 0 5.345-2.677c.459-4.544-.726-8.491-3.116-11.979ZM8.056 13.901c-1.045 0-1.899-.949-1.899-2.112 0-1.162.832-2.112 1.899-2.112 1.056 0 1.92.95 1.899 2.112 0 1.163-.843 2.112-1.9 2.112Zm7.009 0c-1.045 0-1.9-.949-1.9-2.112 0-1.162.833-2.112 1.9-2.112 1.056 0 1.92.95 1.899 2.112 0 1.163-.832 2.112-1.899 2.112Z"})}),cm=c.forwardRef(iz);cm.displayName="Discord";/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function se(){return se=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},se.apply(this,arguments)}var fe;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(fe||(fe={}));const ed="popstate";function sz(e){e===void 0&&(e={});function n(r,a){let{pathname:i="/",search:s="",hash:l=""}=Wn(r.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),_r("",{pathname:i,search:s,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){let i=r.document.querySelector("base"),s="";if(i&&i.getAttribute("href")){let l=r.location.href,u=l.indexOf("#");s=u===-1?l:l.slice(0,u)}return s+"#"+(typeof a=="string"?a:It(a))}function o(r,a){At(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return uz(n,t,o,e)}function Q(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function At(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function lz(){return Math.random().toString(36).substr(2,8)}function nd(e,n){return{usr:e.state,key:e.key,idx:n}}function _r(e,n,t,o){return t===void 0&&(t=null),se({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof n=="string"?Wn(n):n,{state:t,key:n&&n.key||o||lz()})}function It(e){let{pathname:n="/",search:t="",hash:o=""}=e;return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),o&&o!=="#"&&(n+=o.charAt(0)==="#"?o:"#"+o),n}function Wn(e){let n={};if(e){let t=e.indexOf("#");t>=0&&(n.hash=e.substr(t),e=e.substr(0,t));let o=e.indexOf("?");o>=0&&(n.search=e.substr(o),e=e.substr(0,o)),e&&(n.pathname=e)}return n}function uz(e,n,t,o){o===void 0&&(o={});let{window:r=document.defaultView,v5Compat:a=!1}=o,i=r.history,s=fe.Pop,l=null,u=d();u==null&&(u=0,i.replaceState(se({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function p(){s=fe.Pop;let w=d(),k=w==null?null:w-u;u=w,l&&l({action:s,location:f.location,delta:k})}function v(w,k){s=fe.Push;let m=_r(f.location,w,k);t&&t(m,w),u=d()+1;let h=nd(m,u),x=f.createHref(m);try{i.pushState(h,"",x)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;r.location.assign(x)}a&&l&&l({action:s,location:f.location,delta:1})}function j(w,k){s=fe.Replace;let m=_r(f.location,w,k);t&&t(m,w),u=d();let h=nd(m,u),x=f.createHref(m);i.replaceState(h,"",x),a&&l&&l({action:s,location:f.location,delta:0})}function b(w){let k=r.location.origin!=="null"?r.location.origin:r.location.href,m=typeof w=="string"?w:It(w);return m=m.replace(/ $/,"%20"),Q(k,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,k)}let f={get action(){return s},get location(){return e(r,i)},listen(w){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(ed,p),l=w,()=>{r.removeEventListener(ed,p),l=null}},createHref(w){return n(r,w)},createURL:b,encodeLocation(w){let k=b(w);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:v,replace:j,go(w){return i.go(w)}};return f}var le;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(le||(le={}));const cz=new Set(["lazy","caseSensitive","path","id","index","children"]);function dz(e){return e.index===!0}function cl(e,n,t,o){return t===void 0&&(t=[]),o===void 0&&(o={}),e.map((r,a)=>{let i=[...t,a],s=typeof r.id=="string"?r.id:i.join("-");if(Q(r.index!==!0||!r.children,"Cannot specify children on an index route"),Q(!o[s],'Found a route id collision on id "'+s+`".  Route id's must be globally unique within Data Router usages`),dz(r)){let l=se({},r,n(r),{id:s});return o[s]=l,l}else{let l=se({},r,n(r),{id:s,children:void 0});return o[s]=l,r.children&&(l.children=cl(r.children,n,i,o)),l}})}function co(e,n,t){t===void 0&&(t="/");let o=typeof n=="string"?Wn(n):n,r=_o(o.pathname||"/",t);if(r==null)return null;let a=dm(e);vz(a);let i=null;for(let s=0;i==null&&s<a.length;++s){let l=Sz(r);i=gz(a[s],l)}return i}function pz(e,n){let{route:t,pathname:o,params:r}=e;return{id:t.id,pathname:o,params:r,data:n[t.id],handle:t.handle}}function dm(e,n,t,o){n===void 0&&(n=[]),t===void 0&&(t=[]),o===void 0&&(o="");let r=(a,i,s)=>{let l={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};l.relativePath.startsWith("/")&&(Q(l.relativePath.startsWith(o),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(o.length));let u=In([o,l.relativePath]),d=t.concat(l);a.children&&a.children.length>0&&(Q(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),dm(a.children,n,d,u)),!(a.path==null&&!a.index)&&n.push({path:u,score:jz(u,a.index),routesMeta:d})};return e.forEach((a,i)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))r(a,i);else for(let l of pm(a.path))r(a,i,l)}),n}function pm(e){let n=e.split("/");if(n.length===0)return[];let[t,...o]=n,r=t.endsWith("?"),a=t.replace(/\?$/,"");if(o.length===0)return r?[a,""]:[a];let i=pm(o.join("/")),s=[];return s.push(...i.map(l=>l===""?a:[a,l].join("/"))),r&&s.push(...i),s.map(l=>e.startsWith("/")&&l===""?"/":l)}function vz(e){e.sort((n,t)=>n.score!==t.score?t.score-n.score:bz(n.routesMeta.map(o=>o.childrenIndex),t.routesMeta.map(o=>o.childrenIndex)))}const mz=/^:[\w-]+$/,kz=3,fz=2,hz=1,yz=10,zz=-2,td=e=>e==="*";function jz(e,n){let t=e.split("/"),o=t.length;return t.some(td)&&(o+=zz),n&&(o+=fz),t.filter(r=>!td(r)).reduce((r,a)=>r+(mz.test(a)?kz:a===""?hz:yz),o)}function bz(e,n){return e.length===n.length&&e.slice(0,-1).every((o,r)=>o===n[r])?e[e.length-1]-n[n.length-1]:0}function gz(e,n){let{routesMeta:t}=e,o={},r="/",a=[];for(let i=0;i<t.length;++i){let s=t[i],l=i===t.length-1,u=r==="/"?n:n.slice(r.length)||"/",d=wz({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},u);if(!d)return null;Object.assign(o,d.params);let p=s.route;a.push({params:o,pathname:In([r,d.pathname]),pathnameBase:Cz(In([r,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(r=In([r,d.pathnameBase]))}return a}function wz(e,n){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[t,o]=xz(e.path,e.caseSensitive,e.end),r=n.match(t);if(!r)return null;let a=r[0],i=a.replace(/(.)\/+$/,"$1"),s=r.slice(1);return{params:o.reduce((u,d,p)=>{let{paramName:v,isOptional:j}=d;if(v==="*"){let f=s[p]||"";i=a.slice(0,a.length-f.length).replace(/(.)\/+$/,"$1")}const b=s[p];return j&&!b?u[v]=void 0:u[v]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:e}}function xz(e,n,t){n===void 0&&(n=!1),t===void 0&&(t=!0),At(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,s,l)=>(o.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(o.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,n?void 0:"i"),o]}function Sz(e){try{return e.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return At(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),e}}function _o(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let t=n.endsWith("/")?n.length-1:n.length,o=e.charAt(t);return o&&o!=="/"?null:e.slice(t)||"/"}function Ez(e,n){n===void 0&&(n="/");let{pathname:t,search:o="",hash:r=""}=typeof e=="string"?Wn(e):e;return{pathname:t?t.startsWith("/")?t:Pz(t,n):n,search:Rz(o),hash:Nz(r)}}function Pz(e,n){let t=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function os(e,n,t,o){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vm(e){return e.filter((n,t)=>t===0||n.route.path&&n.route.path.length>0)}function fu(e,n){let t=vm(e);return n?t.map((o,r)=>r===e.length-1?o.pathname:o.pathnameBase):t.map(o=>o.pathnameBase)}function hu(e,n,t,o){o===void 0&&(o=!1);let r;typeof e=="string"?r=Wn(e):(r=se({},e),Q(!r.pathname||!r.pathname.includes("?"),os("?","pathname","search",r)),Q(!r.pathname||!r.pathname.includes("#"),os("#","pathname","hash",r)),Q(!r.search||!r.search.includes("#"),os("#","search","hash",r)));let a=e===""||r.pathname==="",i=a?"/":r.pathname,s;if(i==null)s=t;else{let p=n.length-1;if(!o&&i.startsWith("..")){let v=i.split("/");for(;v[0]==="..";)v.shift(),p-=1;r.pathname=v.join("/")}s=p>=0?n[p]:"/"}let l=Ez(r,s),u=i&&i!=="/"&&i.endsWith("/"),d=(a||i===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const In=e=>e.join("/").replace(/\/\/+/g,"/"),Cz=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Rz=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Nz=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,it=function(n,t){t===void 0&&(t=302);let o=t;typeof o=="number"?o={status:o}:typeof o.status>"u"&&(o.status=302);let r=new Headers(o.headers);return r.set("Location",n),new Response(null,se({},o,{headers:r}))};class yu{constructor(n,t,o,r){r===void 0&&(r=!1),this.status=n,this.statusText=t||"",this.internal=r,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}}function zu(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const mm=["post","put","patch","delete"],Tz=new Set(mm),Mz=["get",...mm],_z=new Set(Mz),Oz=new Set([301,302,303,307,308]),Dz=new Set([307,308]),rs={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Lz={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Xo={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ju=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Az=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),km="remix-router-transitions";function Iz(e){const n=e.window?e.window:typeof window<"u"?window:void 0,t=typeof n<"u"&&typeof n.document<"u"&&typeof n.document.createElement<"u",o=!t;Q(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let r;if(e.mapRouteProperties)r=e.mapRouteProperties;else if(e.detectErrorBoundary){let g=e.detectErrorBoundary;r=S=>({hasErrorBoundary:g(S)})}else r=Az;let a={},i=cl(e.routes,r,void 0,a),s,l=e.basename||"/",u=e.unstable_dataStrategy||Uz,d=se({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},e.future),p=null,v=new Set,j=null,b=null,f=null,w=e.hydrationData!=null,k=co(i,e.history.location,l),m=null;if(k==null){let g=on(404,{pathname:e.history.location.pathname}),{matches:S,route:E}=pd(i);k=S,m={[E.id]:g}}let h,x=k.some(g=>g.route.lazy),P=k.some(g=>g.route.loader);if(x)h=!1;else if(!P)h=!0;else if(d.v7_partialHydration){let g=e.hydrationData?e.hydrationData.loaderData:null,S=e.hydrationData?e.hydrationData.errors:null,E=T=>T.route.loader?typeof T.route.loader=="function"&&T.route.loader.hydrate===!0?!1:g&&g[T.route.id]!==void 0||S&&S[T.route.id]!==void 0:!0;if(S){let T=k.findIndex(D=>S[D.route.id]!==void 0);h=k.slice(0,T+1).every(E)}else h=k.every(E)}else h=e.hydrationData!=null;let M,y={historyAction:e.history.action,location:e.history.location,matches:k,initialized:h,navigation:rs,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||m,fetchers:new Map,blockers:new Map},R=fe.Pop,L=!1,_,Z=!1,V=new Map,ne=null,ve=!1,Fe=!1,Ke=[],pn=[],N=new Map,I=0,$=-1,J=new Map,ee=new Set,vn=new Map,He=new Map,Ze=new Set,_e=new Map,nn=new Map,Pi=!1;function Ck(){if(p=e.history.listen(g=>{let{action:S,location:E,delta:T}=g;if(Pi){Pi=!1;return}At(nn.size===0||T!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let D=Du({currentLocation:y.location,nextLocation:E,historyAction:S});if(D&&T!=null){Pi=!0,e.history.go(T*-1),Kr(D,{state:"blocked",location:E,proceed(){Kr(D,{state:"proceeding",proceed:void 0,reset:void 0,location:E}),e.history.go(T)},reset(){let W=new Map(y.blockers);W.set(D,Xo),Je({blockers:W})}});return}return bt(S,E)}),t){ej(n,V);let g=()=>nj(n,V);n.addEventListener("pagehide",g),ne=()=>n.removeEventListener("pagehide",g)}return y.initialized||bt(fe.Pop,y.location,{initialHydration:!0}),M}function Rk(){p&&p(),ne&&ne(),v.clear(),_&&_.abort(),y.fetchers.forEach((g,S)=>Wr(S)),y.blockers.forEach((g,S)=>Ou(S))}function Nk(g){return v.add(g),()=>v.delete(g)}function Je(g,S){S===void 0&&(S={}),y=se({},y,g);let E=[],T=[];d.v7_fetcherPersist&&y.fetchers.forEach((D,W)=>{D.state==="idle"&&(Ze.has(W)?T.push(W):E.push(W))}),[...v].forEach(D=>D(y,{deletedFetchers:T,unstable_viewTransitionOpts:S.viewTransitionOpts,unstable_flushSync:S.flushSync===!0})),d.v7_fetcherPersist&&(E.forEach(D=>y.fetchers.delete(D)),T.forEach(D=>Wr(D)))}function Do(g,S,E){var T,D;let{flushSync:W}=E===void 0?{}:E,F=y.actionData!=null&&y.navigation.formMethod!=null&&hn(y.navigation.formMethod)&&y.navigation.state==="loading"&&((T=g.state)==null?void 0:T._isRedirect)!==!0,A;S.actionData?Object.keys(S.actionData).length>0?A=S.actionData:A=null:F?A=y.actionData:A=null;let K=S.loaderData?cd(y.loaderData,S.loaderData,S.matches||[],S.errors):y.loaderData,B=y.blockers;B.size>0&&(B=new Map(B),B.forEach((U,ie)=>B.set(ie,Xo)));let we=L===!0||y.navigation.formMethod!=null&&hn(y.navigation.formMethod)&&((D=g.state)==null?void 0:D._isRedirect)!==!0;s&&(i=s,s=void 0),ve||R===fe.Pop||(R===fe.Push?e.history.push(g,g.state):R===fe.Replace&&e.history.replace(g,g.state));let xe;if(R===fe.Pop){let U=V.get(y.location.pathname);U&&U.has(g.pathname)?xe={currentLocation:y.location,nextLocation:g}:V.has(g.pathname)&&(xe={currentLocation:g,nextLocation:y.location})}else if(Z){let U=V.get(y.location.pathname);U?U.add(g.pathname):(U=new Set([g.pathname]),V.set(y.location.pathname,U)),xe={currentLocation:y.location,nextLocation:g}}Je(se({},S,{actionData:A,loaderData:K,historyAction:R,location:g,initialized:!0,navigation:rs,revalidation:"idle",restoreScrollPosition:Au(g,S.matches||y.matches),preventScrollReset:we,blockers:B}),{viewTransitionOpts:xe,flushSync:W===!0}),R=fe.Pop,L=!1,Z=!1,ve=!1,Fe=!1,Ke=[],pn=[]}async function Cu(g,S){if(typeof g=="number"){e.history.go(g);return}let E=dl(y.location,y.matches,l,d.v7_prependBasename,g,d.v7_relativeSplatPath,S==null?void 0:S.fromRouteId,S==null?void 0:S.relative),{path:T,submission:D,error:W}=od(d.v7_normalizeFormMethod,!1,E,S),F=y.location,A=_r(y.location,T,S&&S.state);A=se({},A,e.history.encodeLocation(A));let K=S&&S.replace!=null?S.replace:void 0,B=fe.Push;K===!0?B=fe.Replace:K===!1||D!=null&&hn(D.formMethod)&&D.formAction===y.location.pathname+y.location.search&&(B=fe.Replace);let we=S&&"preventScrollReset"in S?S.preventScrollReset===!0:void 0,xe=(S&&S.unstable_flushSync)===!0,U=Du({currentLocation:F,nextLocation:A,historyAction:B});if(U){Kr(U,{state:"blocked",location:A,proceed(){Kr(U,{state:"proceeding",proceed:void 0,reset:void 0,location:A}),Cu(g,S)},reset(){let ie=new Map(y.blockers);ie.set(U,Xo),Je({blockers:ie})}});return}return await bt(B,A,{submission:D,pendingError:W,preventScrollReset:we,replace:S&&S.replace,enableViewTransition:S&&S.unstable_viewTransition,flushSync:xe})}function Tk(){if(Ci(),Je({revalidation:"loading"}),y.navigation.state!=="submitting"){if(y.navigation.state==="idle"){bt(y.historyAction,y.location,{startUninterruptedRevalidation:!0});return}bt(R||y.historyAction,y.navigation.location,{overrideNavigation:y.navigation})}}async function bt(g,S,E){_&&_.abort(),_=null,R=g,ve=(E&&E.startUninterruptedRevalidation)===!0,$k(y.location,y.matches),L=(E&&E.preventScrollReset)===!0,Z=(E&&E.enableViewTransition)===!0;let T=s||i,D=E&&E.overrideNavigation,W=co(T,S,l),F=(E&&E.flushSync)===!0;if(!W){let U=on(404,{pathname:S.pathname}),{matches:ie,route:je}=pd(T);Ri(),Do(S,{matches:ie,loaderData:{},errors:{[je.id]:U}},{flushSync:F});return}if(y.initialized&&!Fe&&Jz(y.location,S)&&!(E&&E.submission&&hn(E.submission.formMethod))){Do(S,{matches:W},{flushSync:F});return}_=new AbortController;let A=Jt(e.history,S,_.signal,E&&E.submission),K;if(E&&E.pendingError)K=[vr(W).route.id,{type:le.error,error:E.pendingError}];else if(E&&E.submission&&hn(E.submission.formMethod)){let U=await Mk(A,S,E.submission,W,{replace:E.replace,flushSync:F});if(U.shortCircuited)return;K=U.pendingActionResult,D=as(S,E.submission),F=!1,A=Jt(e.history,A.url,A.signal)}let{shortCircuited:B,loaderData:we,errors:xe}=await _k(A,S,W,D,E&&E.submission,E&&E.fetcherSubmission,E&&E.replace,E&&E.initialHydration===!0,F,K);B||(_=null,Do(S,se({matches:W},dd(K),{loaderData:we,errors:xe})))}async function Mk(g,S,E,T,D){D===void 0&&(D={}),Ci();let W=Yz(S,E);Je({navigation:W},{flushSync:D.flushSync===!0});let F,A=vl(T,S);if(!A.route.action&&!A.route.lazy)F={type:le.error,error:on(405,{method:g.method,pathname:S.pathname,routeId:A.route.id})};else if(F=(await Ao("action",g,[A],T))[0],g.signal.aborted)return{shortCircuited:!0};if(Ct(F)){let K;return D&&D.replace!=null?K=D.replace:K=sd(F.response.headers.get("Location"),new URL(g.url),l)===y.location.pathname+y.location.search,await Lo(g,F,{submission:E,replace:K}),{shortCircuited:!0}}if(Pt(F))throw on(400,{type:"defer-action"});if(sn(F)){let K=vr(T,A.route.id);return(D&&D.replace)!==!0&&(R=fe.Push),{pendingActionResult:[K.route.id,F]}}return{pendingActionResult:[A.route.id,F]}}async function _k(g,S,E,T,D,W,F,A,K,B){let we=T||as(S,D),xe=D||W||kd(we),U=s||i,[ie,je]=rd(e.history,y,E,xe,S,d.v7_partialHydration&&A===!0,d.unstable_skipActionErrorRevalidation,Fe,Ke,pn,Ze,vn,ee,U,l,B);if(Ri(X=>!(E&&E.some(Oe=>Oe.route.id===X))||ie&&ie.some(Oe=>Oe.route.id===X)),$=++I,ie.length===0&&je.length===0){let X=Mu();return Do(S,se({matches:E,loaderData:{},errors:B&&sn(B[1])?{[B[0]]:B[1].error}:null},dd(B),X?{fetchers:new Map(y.fetchers)}:{}),{flushSync:K}),{shortCircuited:!0}}if(!ve&&(!d.v7_partialHydration||!A)){je.forEach(Oe=>{let tn=y.fetchers.get(Oe.key),Se=Yo(void 0,tn?tn.data:void 0);y.fetchers.set(Oe.key,Se)});let X;B&&!sn(B[1])?X={[B[0]]:B[1].data}:y.actionData&&(Object.keys(y.actionData).length===0?X=null:X=y.actionData),Je(se({navigation:we},X!==void 0?{actionData:X}:{},je.length>0?{fetchers:new Map(y.fetchers)}:{}),{flushSync:K})}je.forEach(X=>{N.has(X.key)&&Zn(X.key),X.controller&&N.set(X.key,X.controller)});let Fo=()=>je.forEach(X=>Zn(X.key));_&&_.signal.addEventListener("abort",Fo);let{loaderResults:Jn,fetcherResults:Wt}=await Ru(y.matches,E,ie,je,g);if(g.signal.aborted)return{shortCircuited:!0};_&&_.signal.removeEventListener("abort",Fo),je.forEach(X=>N.delete(X.key));let Kt=vd([...Jn,...Wt]);if(Kt){if(Kt.idx>=ie.length){let X=je[Kt.idx-ie.length].key;ee.add(X)}return await Lo(g,Kt.result,{replace:F}),{shortCircuited:!0}}let{loaderData:Ht,errors:wn}=ud(y,E,ie,Jn,B,je,Wt,_e);_e.forEach((X,Oe)=>{X.subscribe(tn=>{(tn||X.done)&&_e.delete(Oe)})}),d.v7_partialHydration&&A&&y.errors&&Object.entries(y.errors).filter(X=>{let[Oe]=X;return!ie.some(tn=>tn.route.id===Oe)}).forEach(X=>{let[Oe,tn]=X;wn=Object.assign(wn||{},{[Oe]:tn})});let Hr=Mu(),Zr=_u($),Jr=Hr||Zr||je.length>0;return se({loaderData:Ht,errors:wn},Jr?{fetchers:new Map(y.fetchers)}:{})}function Ok(g,S,E,T){if(o)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");N.has(g)&&Zn(g);let D=(T&&T.unstable_flushSync)===!0,W=s||i,F=dl(y.location,y.matches,l,d.v7_prependBasename,E,d.v7_relativeSplatPath,S,T==null?void 0:T.relative),A=co(W,F,l);if(!A){Io(g,S,on(404,{pathname:F}),{flushSync:D});return}let{path:K,submission:B,error:we}=od(d.v7_normalizeFormMethod,!0,F,T);if(we){Io(g,S,we,{flushSync:D});return}let xe=vl(A,K);if(L=(T&&T.preventScrollReset)===!0,B&&hn(B.formMethod)){Dk(g,S,K,xe,A,D,B);return}vn.set(g,{routeId:S,path:K}),Lk(g,S,K,xe,A,D,B)}async function Dk(g,S,E,T,D,W,F){if(Ci(),vn.delete(g),!T.route.action&&!T.route.lazy){let Se=on(405,{method:F.formMethod,pathname:E,routeId:S});Io(g,S,Se,{flushSync:W});return}let A=y.fetchers.get(g);Hn(g,qz(F,A),{flushSync:W});let K=new AbortController,B=Jt(e.history,E,K.signal,F);N.set(g,K);let we=I,U=(await Ao("action",B,[T],D))[0];if(B.signal.aborted){N.get(g)===K&&N.delete(g);return}if(d.v7_fetcherPersist&&Ze.has(g)){if(Ct(U)||sn(U)){Hn(g,Yn(void 0));return}}else{if(Ct(U))if(N.delete(g),$>we){Hn(g,Yn(void 0));return}else return ee.add(g),Hn(g,Yo(F)),Lo(B,U,{fetcherSubmission:F});if(sn(U)){Io(g,S,U.error);return}}if(Pt(U))throw on(400,{type:"defer-action"});let ie=y.navigation.location||y.location,je=Jt(e.history,ie,K.signal),Fo=s||i,Jn=y.navigation.state!=="idle"?co(Fo,y.navigation.location,l):y.matches;Q(Jn,"Didn't find any matches after fetcher action");let Wt=++I;J.set(g,Wt);let Kt=Yo(F,U.data);y.fetchers.set(g,Kt);let[Ht,wn]=rd(e.history,y,Jn,F,ie,!1,d.unstable_skipActionErrorRevalidation,Fe,Ke,pn,Ze,vn,ee,Fo,l,[T.route.id,U]);wn.filter(Se=>Se.key!==g).forEach(Se=>{let $o=Se.key,Iu=y.fetchers.get($o),Uk=Yo(void 0,Iu?Iu.data:void 0);y.fetchers.set($o,Uk),N.has($o)&&Zn($o),Se.controller&&N.set($o,Se.controller)}),Je({fetchers:new Map(y.fetchers)});let Hr=()=>wn.forEach(Se=>Zn(Se.key));K.signal.addEventListener("abort",Hr);let{loaderResults:Zr,fetcherResults:Jr}=await Ru(y.matches,Jn,Ht,wn,je);if(K.signal.aborted)return;K.signal.removeEventListener("abort",Hr),J.delete(g),N.delete(g),wn.forEach(Se=>N.delete(Se.key));let X=vd([...Zr,...Jr]);if(X){if(X.idx>=Ht.length){let Se=wn[X.idx-Ht.length].key;ee.add(Se)}return Lo(je,X.result)}let{loaderData:Oe,errors:tn}=ud(y,y.matches,Ht,Zr,void 0,wn,Jr,_e);if(y.fetchers.has(g)){let Se=Yn(U.data);y.fetchers.set(g,Se)}_u(Wt),y.navigation.state==="loading"&&Wt>$?(Q(R,"Expected pending action"),_&&_.abort(),Do(y.navigation.location,{matches:Jn,loaderData:Oe,errors:tn,fetchers:new Map(y.fetchers)})):(Je({errors:tn,loaderData:cd(y.loaderData,Oe,Jn,tn),fetchers:new Map(y.fetchers)}),Fe=!1)}async function Lk(g,S,E,T,D,W,F){let A=y.fetchers.get(g);Hn(g,Yo(F,A?A.data:void 0),{flushSync:W});let K=new AbortController,B=Jt(e.history,E,K.signal);N.set(g,K);let we=I,U=(await Ao("loader",B,[T],D))[0];if(Pt(U)&&(U=await zm(U,B.signal,!0)||U),N.get(g)===K&&N.delete(g),!B.signal.aborted){if(Ze.has(g)){Hn(g,Yn(void 0));return}if(Ct(U))if($>we){Hn(g,Yn(void 0));return}else{ee.add(g),await Lo(B,U);return}if(sn(U)){Io(g,S,U.error);return}Q(!Pt(U),"Unhandled fetcher deferred data"),Hn(g,Yn(U.data))}}async function Lo(g,S,E){let{submission:T,fetcherSubmission:D,replace:W}=E===void 0?{}:E;S.response.headers.has("X-Remix-Revalidate")&&(Fe=!0);let F=S.response.headers.get("Location");Q(F,"Expected a Location header on the redirect Response"),F=sd(F,new URL(g.url),l);let A=_r(y.location,F,{_isRedirect:!0});if(t){let ie=!1;if(S.response.headers.has("X-Remix-Reload-Document"))ie=!0;else if(ju.test(F)){const je=e.history.createURL(F);ie=je.origin!==n.location.origin||_o(je.pathname,l)==null}if(ie){W?n.location.replace(F):n.location.assign(F);return}}_=null;let K=W===!0?fe.Replace:fe.Push,{formMethod:B,formAction:we,formEncType:xe}=y.navigation;!T&&!D&&B&&we&&xe&&(T=kd(y.navigation));let U=T||D;if(Dz.has(S.response.status)&&U&&hn(U.formMethod))await bt(K,A,{submission:se({},U,{formAction:F}),preventScrollReset:L});else{let ie=as(A,T);await bt(K,A,{overrideNavigation:ie,fetcherSubmission:D,preventScrollReset:L})}}async function Ao(g,S,E,T){try{let D=await Bz(u,g,S,E,T,a,r);return await Promise.all(D.map((W,F)=>{if(Qz(W)){let A=W.result;return{type:le.redirect,response:Hz(A,S,E[F].route.id,T,l,d.v7_relativeSplatPath)}}return Kz(W)}))}catch(D){return E.map(()=>({type:le.error,error:D}))}}async function Ru(g,S,E,T,D){let[W,...F]=await Promise.all([E.length?Ao("loader",D,E,S):[],...T.map(A=>{if(A.matches&&A.match&&A.controller){let K=Jt(e.history,A.path,A.controller.signal);return Ao("loader",K,[A.match],A.matches).then(B=>B[0])}else return Promise.resolve({type:le.error,error:on(404,{pathname:A.path})})})]);return await Promise.all([md(g,E,W,W.map(()=>D.signal),!1,y.loaderData),md(g,T.map(A=>A.match),F,T.map(A=>A.controller?A.controller.signal:null),!0)]),{loaderResults:W,fetcherResults:F}}function Ci(){Fe=!0,Ke.push(...Ri()),vn.forEach((g,S)=>{N.has(S)&&(pn.push(S),Zn(S))})}function Hn(g,S,E){E===void 0&&(E={}),y.fetchers.set(g,S),Je({fetchers:new Map(y.fetchers)},{flushSync:(E&&E.flushSync)===!0})}function Io(g,S,E,T){T===void 0&&(T={});let D=vr(y.matches,S);Wr(g),Je({errors:{[D.route.id]:E},fetchers:new Map(y.fetchers)},{flushSync:(T&&T.flushSync)===!0})}function Nu(g){return d.v7_fetcherPersist&&(He.set(g,(He.get(g)||0)+1),Ze.has(g)&&Ze.delete(g)),y.fetchers.get(g)||Lz}function Wr(g){let S=y.fetchers.get(g);N.has(g)&&!(S&&S.state==="loading"&&J.has(g))&&Zn(g),vn.delete(g),J.delete(g),ee.delete(g),Ze.delete(g),y.fetchers.delete(g)}function Ak(g){if(d.v7_fetcherPersist){let S=(He.get(g)||0)-1;S<=0?(He.delete(g),Ze.add(g)):He.set(g,S)}else Wr(g);Je({fetchers:new Map(y.fetchers)})}function Zn(g){let S=N.get(g);Q(S,"Expected fetch controller: "+g),S.abort(),N.delete(g)}function Tu(g){for(let S of g){let E=Nu(S),T=Yn(E.data);y.fetchers.set(S,T)}}function Mu(){let g=[],S=!1;for(let E of ee){let T=y.fetchers.get(E);Q(T,"Expected fetcher: "+E),T.state==="loading"&&(ee.delete(E),g.push(E),S=!0)}return Tu(g),S}function _u(g){let S=[];for(let[E,T]of J)if(T<g){let D=y.fetchers.get(E);Q(D,"Expected fetcher: "+E),D.state==="loading"&&(Zn(E),J.delete(E),S.push(E))}return Tu(S),S.length>0}function Ik(g,S){let E=y.blockers.get(g)||Xo;return nn.get(g)!==S&&nn.set(g,S),E}function Ou(g){y.blockers.delete(g),nn.delete(g)}function Kr(g,S){let E=y.blockers.get(g)||Xo;Q(E.state==="unblocked"&&S.state==="blocked"||E.state==="blocked"&&S.state==="blocked"||E.state==="blocked"&&S.state==="proceeding"||E.state==="blocked"&&S.state==="unblocked"||E.state==="proceeding"&&S.state==="unblocked","Invalid blocker state transition: "+E.state+" -> "+S.state);let T=new Map(y.blockers);T.set(g,S),Je({blockers:T})}function Du(g){let{currentLocation:S,nextLocation:E,historyAction:T}=g;if(nn.size===0)return;nn.size>1&&At(!1,"A router only supports one blocker at a time");let D=Array.from(nn.entries()),[W,F]=D[D.length-1],A=y.blockers.get(W);if(!(A&&A.state==="proceeding")&&F({currentLocation:S,nextLocation:E,historyAction:T}))return W}function Ri(g){let S=[];return _e.forEach((E,T)=>{(!g||g(T))&&(E.cancel(),S.push(T),_e.delete(T))}),S}function Fk(g,S,E){if(j=g,f=S,b=E||null,!w&&y.navigation===rs){w=!0;let T=Au(y.location,y.matches);T!=null&&Je({restoreScrollPosition:T})}return()=>{j=null,f=null,b=null}}function Lu(g,S){return b&&b(g,S.map(T=>pz(T,y.loaderData)))||g.key}function $k(g,S){if(j&&f){let E=Lu(g,S);j[E]=f()}}function Au(g,S){if(j){let E=Lu(g,S),T=j[E];if(typeof T=="number")return T}return null}function Vk(g){a={},s=cl(g,r,void 0,a)}return M={get basename(){return l},get future(){return d},get state(){return y},get routes(){return i},get window(){return n},initialize:Ck,subscribe:Nk,enableScrollRestoration:Fk,navigate:Cu,fetch:Ok,revalidate:Tk,createHref:g=>e.history.createHref(g),encodeLocation:g=>e.history.encodeLocation(g),getFetcher:Nu,deleteFetcher:Ak,dispose:Rk,getBlocker:Ik,deleteBlocker:Ou,_internalFetchControllers:N,_internalActiveDeferreds:_e,_internalSetRoutes:Vk},M}function Fz(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function dl(e,n,t,o,r,a,i,s){let l,u;if(i){l=[];for(let p of n)if(l.push(p),p.route.id===i){u=p;break}}else l=n,u=n[n.length-1];let d=hu(r||".",fu(l,a),_o(e.pathname,t)||e.pathname,s==="path");return r==null&&(d.search=e.search,d.hash=e.hash),(r==null||r===""||r===".")&&u&&u.route.index&&!bu(d.search)&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),o&&t!=="/"&&(d.pathname=d.pathname==="/"?t:In([t,d.pathname])),It(d)}function od(e,n,t,o){if(!o||!Fz(o))return{path:t};if(o.formMethod&&!Xz(o.formMethod))return{path:t,error:on(405,{method:o.formMethod})};let r=()=>({path:t,error:on(400,{type:"invalid-body"})}),a=o.formMethod||"get",i=e?a.toUpperCase():a.toLowerCase(),s=hm(t);if(o.body!==void 0){if(o.formEncType==="text/plain"){if(!hn(i))return r();let v=typeof o.body=="string"?o.body:o.body instanceof FormData||o.body instanceof URLSearchParams?Array.from(o.body.entries()).reduce((j,b)=>{let[f,w]=b;return""+j+f+"="+w+`
`},""):String(o.body);return{path:t,submission:{formMethod:i,formAction:s,formEncType:o.formEncType,formData:void 0,json:void 0,text:v}}}else if(o.formEncType==="application/json"){if(!hn(i))return r();try{let v=typeof o.body=="string"?JSON.parse(o.body):o.body;return{path:t,submission:{formMethod:i,formAction:s,formEncType:o.formEncType,formData:void 0,json:v,text:void 0}}}catch{return r()}}}Q(typeof FormData=="function","FormData is not available in this environment");let l,u;if(o.formData)l=pl(o.formData),u=o.formData;else if(o.body instanceof FormData)l=pl(o.body),u=o.body;else if(o.body instanceof URLSearchParams)l=o.body,u=ld(l);else if(o.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(o.body),u=ld(l)}catch{return r()}let d={formMethod:i,formAction:s,formEncType:o&&o.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(hn(d.formMethod))return{path:t,submission:d};let p=Wn(t);return n&&p.search&&bu(p.search)&&l.append("index",""),p.search="?"+l,{path:It(p),submission:d}}function $z(e,n){let t=e;if(n){let o=e.findIndex(r=>r.route.id===n);o>=0&&(t=e.slice(0,o))}return t}function rd(e,n,t,o,r,a,i,s,l,u,d,p,v,j,b,f){let w=f?sn(f[1])?f[1].error:f[1].data:void 0,k=e.createURL(n.location),m=e.createURL(r),h=f&&sn(f[1])?f[0]:void 0,x=h?$z(t,h):t,P=f?f[1].statusCode:void 0,M=i&&P&&P>=400,y=x.filter((L,_)=>{let{route:Z}=L;if(Z.lazy)return!0;if(Z.loader==null)return!1;if(a)return typeof Z.loader!="function"||Z.loader.hydrate?!0:n.loaderData[Z.id]===void 0&&(!n.errors||n.errors[Z.id]===void 0);if(Vz(n.loaderData,n.matches[_],L)||l.some(ve=>ve===L.route.id))return!0;let V=n.matches[_],ne=L;return ad(L,se({currentUrl:k,currentParams:V.params,nextUrl:m,nextParams:ne.params},o,{actionResult:w,unstable_actionStatus:P,defaultShouldRevalidate:M?!1:s||k.pathname+k.search===m.pathname+m.search||k.search!==m.search||fm(V,ne)}))}),R=[];return p.forEach((L,_)=>{if(a||!t.some(Fe=>Fe.route.id===L.routeId)||d.has(_))return;let Z=co(j,L.path,b);if(!Z){R.push({key:_,routeId:L.routeId,path:L.path,matches:null,match:null,controller:null});return}let V=n.fetchers.get(_),ne=vl(Z,L.path),ve=!1;v.has(_)?ve=!1:u.includes(_)?ve=!0:V&&V.state!=="idle"&&V.data===void 0?ve=s:ve=ad(ne,se({currentUrl:k,currentParams:n.matches[n.matches.length-1].params,nextUrl:m,nextParams:t[t.length-1].params},o,{actionResult:w,unstable_actionStatus:P,defaultShouldRevalidate:M?!1:s})),ve&&R.push({key:_,routeId:L.routeId,path:L.path,matches:Z,match:ne,controller:new AbortController})}),[y,R]}function Vz(e,n,t){let o=!n||t.route.id!==n.route.id,r=e[t.route.id]===void 0;return o||r}function fm(e,n){let t=e.route.path;return e.pathname!==n.pathname||t!=null&&t.endsWith("*")&&e.params["*"]!==n.params["*"]}function ad(e,n){if(e.route.shouldRevalidate){let t=e.route.shouldRevalidate(n);if(typeof t=="boolean")return t}return n.defaultShouldRevalidate}async function id(e,n,t){if(!e.lazy)return;let o=await e.lazy();if(!e.lazy)return;let r=t[e.id];Q(r,"No route found in manifest");let a={};for(let i in o){let l=r[i]!==void 0&&i!=="hasErrorBoundary";At(!l,'Route "'+r.id+'" has a static property "'+i+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+i+'" will be ignored.')),!l&&!cz.has(i)&&(a[i]=o[i])}Object.assign(r,a),Object.assign(r,se({},n(r),{lazy:void 0}))}function Uz(e){return Promise.all(e.matches.map(n=>n.resolve()))}async function Bz(e,n,t,o,r,a,i,s){let l=o.reduce((p,v)=>p.add(v.route.id),new Set),u=new Set,d=await e({matches:r.map(p=>{let v=l.has(p.route.id);return se({},p,{shouldLoad:v,resolve:b=>(u.add(p.route.id),v?Wz(n,t,p,a,i,b,s):Promise.resolve({type:le.data,result:void 0}))})}),request:t,params:r[0].params,context:s});return r.forEach(p=>Q(u.has(p.route.id),'`match.resolve()` was not called for route id "'+p.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),d.filter((p,v)=>l.has(r[v].route.id))}async function Wz(e,n,t,o,r,a,i){let s,l,u=d=>{let p,v=new Promise((f,w)=>p=w);l=()=>p(),n.signal.addEventListener("abort",l);let j=f=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+t.route.id+"]"))):d({request:n,params:t.params,context:i},...f!==void 0?[f]:[]),b;return a?b=a(f=>j(f)):b=(async()=>{try{return{type:"data",result:await j()}}catch(f){return{type:"error",result:f}}})(),Promise.race([b,v])};try{let d=t.route[e];if(t.route.lazy)if(d){let p,[v]=await Promise.all([u(d).catch(j=>{p=j}),id(t.route,r,o)]);if(p!==void 0)throw p;s=v}else if(await id(t.route,r,o),d=t.route[e],d)s=await u(d);else if(e==="action"){let p=new URL(n.url),v=p.pathname+p.search;throw on(405,{method:n.method,pathname:v,routeId:t.route.id})}else return{type:le.data,result:void 0};else if(d)s=await u(d);else{let p=new URL(n.url),v=p.pathname+p.search;throw on(404,{pathname:v})}Q(s.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:le.error,result:d}}finally{l&&n.signal.removeEventListener("abort",l)}return s}async function Kz(e){let{result:n,type:t,status:o}=e;if(ym(n)){let i;try{let s=n.headers.get("Content-Type");s&&/\bapplication\/json\b/.test(s)?n.body==null?i=null:i=await n.json():i=await n.text()}catch(s){return{type:le.error,error:s}}return t===le.error?{type:le.error,error:new yu(n.status,n.statusText,i),statusCode:n.status,headers:n.headers}:{type:le.data,data:i,statusCode:n.status,headers:n.headers}}if(t===le.error)return{type:le.error,error:n,statusCode:zu(n)?n.status:o};if(Gz(n)){var r,a;return{type:le.deferred,deferredData:n,statusCode:(r=n.init)==null?void 0:r.status,headers:((a=n.init)==null?void 0:a.headers)&&new Headers(n.init.headers)}}return{type:le.data,data:n,statusCode:o}}function Hz(e,n,t,o,r,a){let i=e.headers.get("Location");if(Q(i,"Redirects returned/thrown from loaders/actions must have a Location header"),!ju.test(i)){let s=o.slice(0,o.findIndex(l=>l.route.id===t)+1);i=dl(new URL(n.url),s,r,!0,i,a),e.headers.set("Location",i)}return e}function sd(e,n,t){if(ju.test(e)){let o=e,r=o.startsWith("//")?new URL(n.protocol+o):new URL(o),a=_o(r.pathname,t)!=null;if(r.origin===n.origin&&a)return r.pathname+r.search+r.hash}return e}function Jt(e,n,t,o){let r=e.createURL(hm(n)).toString(),a={signal:t};if(o&&hn(o.formMethod)){let{formMethod:i,formEncType:s}=o;a.method=i.toUpperCase(),s==="application/json"?(a.headers=new Headers({"Content-Type":s}),a.body=JSON.stringify(o.json)):s==="text/plain"?a.body=o.text:s==="application/x-www-form-urlencoded"&&o.formData?a.body=pl(o.formData):a.body=o.formData}return new Request(r,a)}function pl(e){let n=new URLSearchParams;for(let[t,o]of e.entries())n.append(t,typeof o=="string"?o:o.name);return n}function ld(e){let n=new FormData;for(let[t,o]of e.entries())n.append(t,o);return n}function Zz(e,n,t,o,r,a){let i={},s=null,l,u=!1,d={},p=o&&sn(o[1])?o[1].error:void 0;return t.forEach((v,j)=>{let b=n[j].route.id;if(Q(!Ct(v),"Cannot handle redirect results in processLoaderData"),sn(v)){let f=v.error;p!==void 0&&(f=p,p=void 0),s=s||{};{let w=vr(e,b);s[w.route.id]==null&&(s[w.route.id]=f)}i[b]=void 0,u||(u=!0,l=zu(v.error)?v.error.status:500),v.headers&&(d[b]=v.headers)}else Pt(v)?(r.set(b,v.deferredData),i[b]=v.deferredData.data,v.statusCode!=null&&v.statusCode!==200&&!u&&(l=v.statusCode),v.headers&&(d[b]=v.headers)):(i[b]=v.data,v.statusCode&&v.statusCode!==200&&!u&&(l=v.statusCode),v.headers&&(d[b]=v.headers))}),p!==void 0&&o&&(s={[o[0]]:p},i[o[0]]=void 0),{loaderData:i,errors:s,statusCode:l||200,loaderHeaders:d}}function ud(e,n,t,o,r,a,i,s){let{loaderData:l,errors:u}=Zz(n,t,o,r,s);for(let d=0;d<a.length;d++){let{key:p,match:v,controller:j}=a[d];Q(i!==void 0&&i[d]!==void 0,"Did not find corresponding fetcher result");let b=i[d];if(!(j&&j.signal.aborted))if(sn(b)){let f=vr(e.matches,v==null?void 0:v.route.id);u&&u[f.route.id]||(u=se({},u,{[f.route.id]:b.error})),e.fetchers.delete(p)}else if(Ct(b))Q(!1,"Unhandled fetcher revalidation redirect");else if(Pt(b))Q(!1,"Unhandled fetcher deferred data");else{let f=Yn(b.data);e.fetchers.set(p,f)}}return{loaderData:l,errors:u}}function cd(e,n,t,o){let r=se({},n);for(let a of t){let i=a.route.id;if(n.hasOwnProperty(i)?n[i]!==void 0&&(r[i]=n[i]):e[i]!==void 0&&a.route.loader&&(r[i]=e[i]),o&&o.hasOwnProperty(i))break}return r}function dd(e){return e?sn(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function vr(e,n){return(n?e.slice(0,e.findIndex(o=>o.route.id===n)+1):[...e]).reverse().find(o=>o.route.hasErrorBoundary===!0)||e[0]}function pd(e){let n=e.length===1?e[0]:e.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:n}],route:n}}function on(e,n){let{pathname:t,routeId:o,method:r,type:a}=n===void 0?{}:n,i="Unknown Server Error",s="Unknown @remix-run/router error";return e===400?(i="Bad Request",r&&t&&o?s="You made a "+r+' request to "'+t+'" but '+('did not provide a `loader` for route "'+o+'", ')+"so there is no way to handle the request.":a==="defer-action"?s="defer() is not supported in actions":a==="invalid-body"&&(s="Unable to encode submission body")):e===403?(i="Forbidden",s='Route "'+o+'" does not match URL "'+t+'"'):e===404?(i="Not Found",s='No route matches URL "'+t+'"'):e===405&&(i="Method Not Allowed",r&&t&&o?s="You made a "+r.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+o+'", ')+"so there is no way to handle the request.":r&&(s='Invalid request method "'+r.toUpperCase()+'"')),new yu(e||500,i,new Error(s),!0)}function vd(e){for(let n=e.length-1;n>=0;n--){let t=e[n];if(Ct(t))return{result:t,idx:n}}}function hm(e){let n=typeof e=="string"?Wn(e):e;return It(se({},n,{hash:""}))}function Jz(e,n){return e.pathname!==n.pathname||e.search!==n.search?!1:e.hash===""?n.hash!=="":e.hash===n.hash?!0:n.hash!==""}function Qz(e){return ym(e.result)&&Oz.has(e.result.status)}function Pt(e){return e.type===le.deferred}function sn(e){return e.type===le.error}function Ct(e){return(e&&e.type)===le.redirect}function Gz(e){let n=e;return n&&typeof n=="object"&&typeof n.data=="object"&&typeof n.subscribe=="function"&&typeof n.cancel=="function"&&typeof n.resolveData=="function"}function ym(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function Xz(e){return _z.has(e.toLowerCase())}function hn(e){return Tz.has(e.toLowerCase())}async function md(e,n,t,o,r,a){for(let i=0;i<t.length;i++){let s=t[i],l=n[i];if(!l)continue;let u=e.find(p=>p.route.id===l.route.id),d=u!=null&&!fm(u,l)&&(a&&a[l.route.id])!==void 0;if(Pt(s)&&(r||d)){let p=o[i];Q(p,"Expected an AbortSignal for revalidating fetcher deferred result"),await zm(s,p,r).then(v=>{v&&(t[i]=v||t[i])})}}}async function zm(e,n,t){if(t===void 0&&(t=!1),!await e.deferredData.resolveData(n)){if(t)try{return{type:le.data,data:e.deferredData.unwrappedData}}catch(r){return{type:le.error,error:r}}return{type:le.data,data:e.deferredData.data}}}function bu(e){return new URLSearchParams(e).getAll("index").some(n=>n==="")}function vl(e,n){let t=typeof n=="string"?Wn(n).search:n.search;if(e[e.length-1].route.index&&bu(t||""))return e[e.length-1];let o=vm(e);return o[o.length-1]}function kd(e){let{formMethod:n,formAction:t,formEncType:o,text:r,formData:a,json:i}=e;if(!(!n||!t||!o)){if(r!=null)return{formMethod:n,formAction:t,formEncType:o,formData:void 0,json:void 0,text:r};if(a!=null)return{formMethod:n,formAction:t,formEncType:o,formData:a,json:void 0,text:void 0};if(i!==void 0)return{formMethod:n,formAction:t,formEncType:o,formData:void 0,json:i,text:void 0}}}function as(e,n){return n?{state:"loading",location:e,formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Yz(e,n){return{state:"submitting",location:e,formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text}}function Yo(e,n){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:n}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function qz(e,n){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:n?n.data:void 0}}function Yn(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function ej(e,n){try{let t=e.sessionStorage.getItem(km);if(t){let o=JSON.parse(t);for(let[r,a]of Object.entries(o||{}))a&&Array.isArray(a)&&n.set(r,new Set(a||[]))}}catch{}}function nj(e,n){if(n.size>0){let t={};for(let[o,r]of n)t[o]=[...r];try{e.sessionStorage.setItem(km,JSON.stringify(t))}catch(o){At(!1,"Failed to save applied view transitions in sessionStorage ("+o+").")}}}/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ti(){return ti=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ti.apply(this,arguments)}const gi=c.createContext(null),jm=c.createContext(null),Bt=c.createContext(null),gu=c.createContext(null),Kn=c.createContext({outlet:null,matches:[],isDataRoute:!1}),bm=c.createContext(null);function tj(e,n){let{relative:t}=n===void 0?{}:n;Ur()||Q(!1);let{basename:o,navigator:r}=c.useContext(Bt),{hash:a,pathname:i,search:s}=xm(e,{relative:t}),l=i;return o!=="/"&&(l=i==="/"?o:In([o,i])),r.createHref({pathname:l,search:s,hash:a})}function Ur(){return c.useContext(gu)!=null}function wi(){return Ur()||Q(!1),c.useContext(gu).location}function gm(e){c.useContext(Bt).static||c.useLayoutEffect(e)}function oj(){let{isDataRoute:e}=c.useContext(Kn);return e?hj():rj()}function rj(){Ur()||Q(!1);let e=c.useContext(gi),{basename:n,future:t,navigator:o}=c.useContext(Bt),{matches:r}=c.useContext(Kn),{pathname:a}=wi(),i=JSON.stringify(fu(r,t.v7_relativeSplatPath)),s=c.useRef(!1);return gm(()=>{s.current=!0}),c.useCallback(function(u,d){if(d===void 0&&(d={}),!s.current)return;if(typeof u=="number"){o.go(u);return}let p=hu(u,JSON.parse(i),a,d.relative==="path");e==null&&n!=="/"&&(p.pathname=p.pathname==="/"?n:In([n,p.pathname])),(d.replace?o.replace:o.push)(p,d.state,d)},[n,o,i,a,e])}const aj=c.createContext(null);function ij(e){let n=c.useContext(Kn).outlet;return n&&c.createElement(aj.Provider,{value:e},n)}function wm(){let{matches:e}=c.useContext(Kn),n=e[e.length-1];return n?n.params:{}}function xm(e,n){let{relative:t}=n===void 0?{}:n,{future:o}=c.useContext(Bt),{matches:r}=c.useContext(Kn),{pathname:a}=wi(),i=JSON.stringify(fu(r,o.v7_relativeSplatPath));return c.useMemo(()=>hu(e,JSON.parse(i),a,t==="path"),[e,i,a,t])}function sj(e,n,t,o){Ur()||Q(!1);let{navigator:r}=c.useContext(Bt),{matches:a}=c.useContext(Kn),i=a[a.length-1],s=i?i.params:{};i&&i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let u=wi(),d;d=u;let p=d.pathname||"/",v=p;if(l!=="/"){let f=l.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(f.length).join("/")}let j=co(e,{pathname:v});return pj(j&&j.map(f=>Object.assign({},f,{params:Object.assign({},s,f.params),pathname:In([l,r.encodeLocation?r.encodeLocation(f.pathname).pathname:f.pathname]),pathnameBase:f.pathnameBase==="/"?l:In([l,r.encodeLocation?r.encodeLocation(f.pathnameBase).pathname:f.pathnameBase])})),a,t,o)}function lj(){let e=fj(),n=zu(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),t=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},n),t?c.createElement("pre",{style:r},t):null,null)}const uj=c.createElement(lj,null);class cj extends c.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){console.error("React Router caught the following error during render",n,t)}render(){return this.state.error!==void 0?c.createElement(Kn.Provider,{value:this.props.routeContext},c.createElement(bm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function dj(e){let{routeContext:n,match:t,children:o}=e,r=c.useContext(gi);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),c.createElement(Kn.Provider,{value:n},o)}function pj(e,n,t,o){var r;if(n===void 0&&(n=[]),t===void 0&&(t=null),o===void 0&&(o=null),e==null){var a;if((a=t)!=null&&a.errors)e=t.matches;else return null}let i=e,s=(r=t)==null?void 0:r.errors;if(s!=null){let d=i.findIndex(p=>p.route.id&&(s==null?void 0:s[p.route.id])!==void 0);d>=0||Q(!1),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,u=-1;if(t&&o&&o.v7_partialHydration)for(let d=0;d<i.length;d++){let p=i[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=d),p.route.id){let{loaderData:v,errors:j}=t,b=p.route.loader&&v[p.route.id]===void 0&&(!j||j[p.route.id]===void 0);if(p.route.lazy||b){l=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,p,v)=>{let j,b=!1,f=null,w=null;t&&(j=s&&p.route.id?s[p.route.id]:void 0,f=p.route.errorElement||uj,l&&(u<0&&v===0?(yj("route-fallback"),b=!0,w=null):u===v&&(b=!0,w=p.route.hydrateFallbackElement||null)));let k=n.concat(i.slice(0,v+1)),m=()=>{let h;return j?h=f:b?h=w:p.route.Component?h=c.createElement(p.route.Component,null):p.route.element?h=p.route.element:h=d,c.createElement(dj,{match:p,routeContext:{outlet:d,matches:k,isDataRoute:t!=null},children:h})};return t&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?c.createElement(cj,{location:t.location,revalidation:t.revalidation,component:f,error:j,children:m(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):m()},null)}var Sm=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Sm||{}),oi=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(oi||{});function vj(e){let n=c.useContext(gi);return n||Q(!1),n}function mj(e){let n=c.useContext(jm);return n||Q(!1),n}function kj(e){let n=c.useContext(Kn);return n||Q(!1),n}function Em(e){let n=kj(),t=n.matches[n.matches.length-1];return t.route.id||Q(!1),t.route.id}function fj(){var e;let n=c.useContext(bm),t=mj(oi.UseRouteError),o=Em(oi.UseRouteError);return n!==void 0?n:(e=t.errors)==null?void 0:e[o]}function hj(){let{router:e}=vj(Sm.UseNavigateStable),n=Em(oi.UseNavigateStable),t=c.useRef(!1);return gm(()=>{t.current=!0}),c.useCallback(function(r,a){a===void 0&&(a={}),t.current&&(typeof r=="number"?e.navigate(r):e.navigate(r,ti({fromRouteId:n},a)))},[e,n])}const fd={};function yj(e,n,t){fd[e]||(fd[e]=!0)}function zj(e){return ij(e.context)}function jj(e){let{basename:n="/",children:t=null,location:o,navigationType:r=fe.Pop,navigator:a,static:i=!1,future:s}=e;Ur()&&Q(!1);let l=n.replace(/^\/*/,"/"),u=c.useMemo(()=>({basename:l,navigator:a,static:i,future:ti({v7_relativeSplatPath:!1},s)}),[l,s,a,i]);typeof o=="string"&&(o=Wn(o));let{pathname:d="/",search:p="",hash:v="",state:j=null,key:b="default"}=o,f=c.useMemo(()=>{let w=_o(d,l);return w==null?null:{location:{pathname:w,search:p,hash:v,state:j,key:b},navigationType:r}},[l,d,p,v,j,b,r]);return f==null?null:c.createElement(Bt.Provider,{value:u},c.createElement(gu.Provider,{children:t,value:f}))}new Promise(()=>{});function bj(e){let n={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(n,{element:c.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(n,{hydrateFallbackElement:c.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(n,{errorElement:c.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Or(){return Or=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Or.apply(this,arguments)}function gj(e,n){if(e==null)return{};var t={},o=Object.keys(e),r,a;for(a=0;a<o.length;a++)r=o[a],!(n.indexOf(r)>=0)&&(t[r]=e[r]);return t}function wj(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function xj(e,n){return e.button===0&&(!n||n==="_self")&&!wj(e)}const Sj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Ej="6";try{window.__reactRouterVersion=Ej}catch{}function Pj(e,n){return Iz({basename:n==null?void 0:n.basename,future:Or({},n==null?void 0:n.future,{v7_prependBasename:!0}),history:sz({window:n==null?void 0:n.window}),hydrationData:(n==null?void 0:n.hydrationData)||Cj(),routes:e,mapRouteProperties:bj,unstable_dataStrategy:n==null?void 0:n.unstable_dataStrategy,window:n==null?void 0:n.window}).initialize()}function Cj(){var e;let n=(e=window)==null?void 0:e.__staticRouterHydrationData;return n&&n.errors&&(n=Or({},n,{errors:Rj(n.errors)})),n}function Rj(e){if(!e)return null;let n=Object.entries(e),t={};for(let[o,r]of n)if(r&&r.__type==="RouteErrorResponse")t[o]=new yu(r.status,r.statusText,r.data,r.internal===!0);else if(r&&r.__type==="Error"){if(r.__subType){let a=window[r.__subType];if(typeof a=="function")try{let i=new a(r.message);i.stack="",t[o]=i}catch{}}if(t[o]==null){let a=new Error(r.message);a.stack="",t[o]=a}}else t[o]=r;return t}const Nj=c.createContext({isTransitioning:!1}),Tj=c.createContext(new Map),Mj="startTransition",hd=Yd[Mj],_j="flushSync",yd=ky[_j];function Oj(e){hd?hd(e):e()}function qo(e){yd?yd(e):e()}class Dj{constructor(){this.status="pending",this.promise=new Promise((n,t)=>{this.resolve=o=>{this.status==="pending"&&(this.status="resolved",n(o))},this.reject=o=>{this.status==="pending"&&(this.status="rejected",t(o))}})}}function Lj(e){let{fallbackElement:n,router:t,future:o}=e,[r,a]=c.useState(t.state),[i,s]=c.useState(),[l,u]=c.useState({isTransitioning:!1}),[d,p]=c.useState(),[v,j]=c.useState(),[b,f]=c.useState(),w=c.useRef(new Map),{v7_startTransition:k}=o||{},m=c.useCallback(y=>{k?Oj(y):y()},[k]),h=c.useCallback((y,R)=>{let{deletedFetchers:L,unstable_flushSync:_,unstable_viewTransitionOpts:Z}=R;L.forEach(ne=>w.current.delete(ne)),y.fetchers.forEach((ne,ve)=>{ne.data!==void 0&&w.current.set(ve,ne.data)});let V=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!Z||V){_?qo(()=>a(y)):m(()=>a(y));return}if(_){qo(()=>{v&&(d&&d.resolve(),v.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:Z.currentLocation,nextLocation:Z.nextLocation})});let ne=t.window.document.startViewTransition(()=>{qo(()=>a(y))});ne.finished.finally(()=>{qo(()=>{p(void 0),j(void 0),s(void 0),u({isTransitioning:!1})})}),qo(()=>j(ne));return}v?(d&&d.resolve(),v.skipTransition(),f({state:y,currentLocation:Z.currentLocation,nextLocation:Z.nextLocation})):(s(y),u({isTransitioning:!0,flushSync:!1,currentLocation:Z.currentLocation,nextLocation:Z.nextLocation}))},[t.window,v,d,w,m]);c.useLayoutEffect(()=>t.subscribe(h),[t,h]),c.useEffect(()=>{l.isTransitioning&&!l.flushSync&&p(new Dj)},[l]),c.useEffect(()=>{if(d&&i&&t.window){let y=i,R=d.promise,L=t.window.document.startViewTransition(async()=>{m(()=>a(y)),await R});L.finished.finally(()=>{p(void 0),j(void 0),s(void 0),u({isTransitioning:!1})}),j(L)}},[m,i,d,t.window]),c.useEffect(()=>{d&&i&&r.location.key===i.location.key&&d.resolve()},[d,v,r.location,i]),c.useEffect(()=>{!l.isTransitioning&&b&&(s(b.state),u({isTransitioning:!0,flushSync:!1,currentLocation:b.currentLocation,nextLocation:b.nextLocation}),f(void 0))},[l.isTransitioning,b]),c.useEffect(()=>{},[]);let x=c.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:y=>t.navigate(y),push:(y,R,L)=>t.navigate(y,{state:R,preventScrollReset:L==null?void 0:L.preventScrollReset}),replace:(y,R,L)=>t.navigate(y,{replace:!0,state:R,preventScrollReset:L==null?void 0:L.preventScrollReset})}),[t]),P=t.basename||"/",M=c.useMemo(()=>({router:t,navigator:x,static:!1,basename:P}),[t,x,P]);return c.createElement(c.Fragment,null,c.createElement(gi.Provider,{value:M},c.createElement(jm.Provider,{value:r},c.createElement(Tj.Provider,{value:w.current},c.createElement(Nj.Provider,{value:l},c.createElement(jj,{basename:P,location:r.location,navigationType:r.historyAction,navigator:x,future:{v7_relativeSplatPath:t.future.v7_relativeSplatPath}},r.initialized||t.future.v7_partialHydration?c.createElement(Aj,{routes:t.routes,future:t.future,state:r}):n))))),null)}function Aj(e){let{routes:n,future:t,state:o}=e;return sj(n,void 0,o,t)}const Ij=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Fj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,po=c.forwardRef(function(n,t){let{onClick:o,relative:r,reloadDocument:a,replace:i,state:s,target:l,to:u,preventScrollReset:d,unstable_viewTransition:p}=n,v=gj(n,Sj),{basename:j}=c.useContext(Bt),b,f=!1;if(typeof u=="string"&&Fj.test(u)&&(b=u,Ij))try{let h=new URL(window.location.href),x=u.startsWith("//")?new URL(h.protocol+u):new URL(u),P=_o(x.pathname,j);x.origin===h.origin&&P!=null?u=P+x.search+x.hash:f=!0}catch{}let w=tj(u,{relative:r}),k=$j(u,{replace:i,state:s,target:l,preventScrollReset:d,relative:r,unstable_viewTransition:p});function m(h){o&&o(h),h.defaultPrevented||k(h)}return c.createElement("a",Or({},v,{href:b||w,onClick:f||a?o:m,ref:t,target:l}))});var zd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(zd||(zd={}));var jd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(jd||(jd={}));function $j(e,n){let{target:t,replace:o,state:r,preventScrollReset:a,relative:i,unstable_viewTransition:s}=n===void 0?{}:n,l=oj(),u=wi(),d=xm(e,{relative:i});return c.useCallback(p=>{if(xj(p,t)){p.preventDefault();let v=o!==void 0?o:It(u)===It(d);l(e,{replace:v,state:r,preventScrollReset:a,relative:i,unstable_viewTransition:s})}},[u,l,d,o,r,t,e,a,i,s])}function Vj(){return z.jsxs(z.Fragment,{children:[z.jsxs("header",{className:"px-4 py-1 flex justify-between items-center",children:[z.jsx(po,{to:"/",children:z.jsxs("h1",{className:"text-3xl font-bold",children:["PB152",z.jsx("span",{className:"text-xl font-light",children:"drill"})]})}),z.jsxs("div",{className:"flex gap-1 items-center",children:[z.jsx(po,{to:"/about",children:z.jsx(Cn,{variant:"ghost",children:"O nás"})}),z.jsx("div",{className:"h-6 w-[0.1rem] bg-border rounded-full"}),z.jsx("a",{href:"https://github.com/tomz197/os-drill",target:"_blank",children:z.jsx(Cn,{variant:"ghost",size:"icon",children:z.jsx(qc,{})})})]})]}),z.jsx("div",{className:"h-[0.1rem] w-full bg-border rounded-full"}),z.jsx("main",{className:"p-4 f slex flex-1 flex-col gap-2",children:z.jsx(zj,{})}),z.jsx("div",{className:"h-[0.1rem] w-full bg-border rounded-full"}),z.jsxs("footer",{className:"p-4 flex justify-center gap-2",children:[z.jsxs("a",{href:"https://github.com/tomz197/os-drill",target:"_blank",className:"text-grey-400 hover:text-blue-500 flex items-center gap-1",children:["Github",z.jsx(qc,{className:"w-5 h-5 inline"})]}),z.jsx("div",{className:"h-6 w-[0.1rem] bg-border rounded-full"}),z.jsxs("a",{href:"https://discord.gg/ztabDQ4jNv",className:"text-grey-400 hover:text-blue-500 flex items-center gap-1",target:"_blank",children:["Discord",z.jsx(cm,{className:"w-6 h-6 stroke-[1.5] inline"})]})]})]})}const Dr=[{section:1,name:"Virtualizate paměti",correct:[`instrukce tvaru ld reg_addr → reg_out načte hodnotu z paměti a uloží ji do registru; reg_addr je
registr, ve kterém je uložena adresa, kterou program požaduje

instrukce tvaru st reg_in → reg_addr naopak hodnotu do paměti uloží, a to opět na adresu zadanou registrem reg_addr.`,`Každá adresa je číslo, ale ne každé číslo je platná adresa. Adresním prostorem
tedy budeme nazývat zejména množinu platných adres, ale můžeme v tomto pojmu zahrnout i případnou další
zajímavou strukturu paměti (např. to, že nějaká část adres má jiné vlastnosti než ty ostatní).
Adresní prostor se obvykle skládá ze souvislých bloků, kde jednotlivé bloky obsahují mnoho po sobě
jdoucích adres (řádově miliony).`,`Program má při svém běhu k dispozici nějaký adresní prostor, který může používat
k ukládání dat. Krom pracovní paměti (do které si program ukládá libovolná data jak uzná za vhodné) je
součástí adresního prostoru programu také kód – adresy, na kterých jsou uloženy instrukce, ze kterých
program samotný sestává, a obvykle také hardwarový zásobník, který se používá k realizaci podprogramů
(volání funkcí).`,`Fyzická paměť
Fyzické adresy (tedy adresy, které patří fyzickému adresnímu prostoru) přímo
pojmenovávají fyzické paměťové buňky hardwarových zařízení, zejména paměti RAM. Přestože se jedná
o jeden adresní prostor, podobně jako v případě paměti programu může mít další strukturu.
Největší a nejdůležitější blok (případně několik bloků) fyzických adres zpravidla patří operační paměti
(paměti s přímým přístupem, random access memory, RAM). Toto je paměť v klasickém smyslu tohoto slova,
a slouží především k ukládáni pracovních dat programů`,`Virtualizace
V principu nic nebrání tomu, aby program používal k práci s pamětí přímo fyzické adresy.
V takovém případě bychom program přizpůsobili tomu, které fyzické adresy jsou na našem počítači platné
a odpovídají operační paměti.
Jakmile bychom ale chtěli na jednom počítači spustit několik programů najednou, začneme narážet na
problémy. Programy by mezi sebou musely použití adres koordinovat: používá-li program A adresu 0x1005
pro svoji proměnnou, nemůže ji zároveň používat program B.`,`Virtuální a fyzické adresy
Bylo by tedy lepší, aby adresní prostor programu byl od toho fyzického
nezávislý. Proto procesory určené pro běžné počítače poskytují oddělený virtuální adresní prostor,
který je viditelný pro programy, a který je od toho fyzického důsledně oddělen. Fyzický adresní prostor
je uživatelským programům zcela nepřístupný.`,`Překlad adres
Virtuální adresy budeme překládat na adresy fyzické, které již určí, kde budou příslušná data skutečně uložena.
O fyzické buňce pak můžeme říct, že má právě jednu fyzickou adresu (a ta je této buňce přidělena
pevně) a nějaké virtuální adresy (to jsou ty, které se přeloží na její fyzickou adresu). Buňka může mít
virtuálních adres hned několik, ale také třeba žádnou`,`Jednotka správy paměti
Přístup do paměti (čtení, zápis) je časově kritickou operací – procesor
jich provádí miliony za vteřinu. Přitom adresní operand instrukce, která takový přístup realizuje,
představuje vždy virtuální adresu, která musí být ještě před samotným přístupem přeložena na adresu
fyzickou.`,`Jednotka správy paměti
Překlad adres proto musí být velmi rychlý, a není nijak překvapivé, že je realizován specializovaným
hardwarem, který je přímo součástí procesoru. Zároveň ale potřebujeme zabezpečit, aby o konkrétní
podobě překladu mohl rozhodovat operační systém. Proto musí být tato tzv. jednotka správy paměti
programovatelná – pomocí vhodně sestavených tabulek může operační systém (konkrétně jeho jádro)
řídit mapování virtuálních adres na fyzické, a tedy i to, jak budou vypadat jednotlivé virtuální adresní
prostory.`,`Stránky
Stránka je pak základní jednotkou překladu. Tím se jednak zmenší potřebné tabulky, jednak se tím
zjednoduší proces překladu. Budeme-li totiž požadovat, aby:

1. stránka obsahovala 2**n
adres (tj. měla velikost 2**n bajtů),
2. stránka začínala adresou, která je beze zbytku dělitelná 2**n
3. byla mapována na fyzickou adresu, která je také beze zbytku dělitelná 2**n,

můžeme spodních n bitů virtuální adresy přímo použít jako spodních n bitů adresy fyzické. Zbytek fyzické adresy již dopočítáme podle překladové tabulky.
To má mimo jiné za důsledek, že stránky se nemohou překrývat.`,`Stránkové tabulky
Stránkové tabulky jsou uloženy v operační paměti, ale jejich přesná struktura
je opět vlastností konkrétního hardwaru. Protože moderní počítače mají velké adresní prostory (2**32 nebo 2**64 virtuálních adres), 
používají obvykle řídké, víceúrovňové překladové tabulky.`,`Proces
Pojem běžící program je poněkud vágní, proto si pro něj zavedeme formálnější alternativu
– proces. Tímto pojmem budeme označovat entitu, která:
• je spojena s virtuálním adresním prostorem, který
     ∘ obsahuje kód – instrukce – nějakého programu,
     ∘ veškerá data, která tento program potřebuje pro svůj běh,
• operační systém o ni vede záznam,
• může vlastnit krom paměti i další zdroje`,`Ochrana paměti
• Kód programu (a případná data, která jsou určena výhradně ke čtení) může být ve fyzické paměti uložen
pouze jednou i v případě, kdy tento kód využívá více procesů. Jedná se o užitečnou a zároveň bezpečnou
optimalizaci, protože odpovídající virtuální adresy jsou v obou procesech označeny příznakem pouze
pro čtení, a procesy se tak nemohou skrze tyto adresy vzájemně ovlivňovat.
• Na žádost programu může být dvěma procesům do jejich virtuálních adresních prostorů namapován
stejný blok fyzické paměti i v režimu umožňujícím zápis. Smyslem takto namapované paměti je umožnit
komunikaci mezi dotčenými procesy: mohou si tímto způsobem totiž jednoduše předávat data. Pozor:
virtuální adresy takto namapované paměti nebudou obecně v obou procesech stejné.`,`Přepnutí procesu
Zatím jsme nezmínili, jak procesor (resp. jednotka správy paměti) najde
stránkovou tabulku první úrovně. Odpověď na tuto otázku je klíčem k přepínání procesů:
1. fyzická adresa stránkové tabulky 1. úrovně je uložena ve speciálním registru procesoru,
2. tuto adresu je možné nastavit privilegovanou instrukcí (privilegovanou v tomto případě znamená, že
ji může provést pouze jádro),
3. změnou hodnoty v tomto registru se aktivuje překlad adres podle nově zavedené stránkové tabulky`,`Vytvoření procesu
Asi nejjednodušší způsob, jak vytvořit nový proces, je duplikace nějakého
existujícího (POSIX této operaci říká fork). V mnoha operačních systémech je to dokonce způsob jediný.19
Mohlo by se zdát, že je to způsob dost neefektivní: procesy mohou mít virtuální adresní prostor
o velikosti mnoha GiB a duplikace takového množství paměti vyžaduje vynaložení značných prostředků.
Operační systémy proto používají trik, který zde vede k výrazné úspoře, a se kterým se setkáme ještě
v několika kontextech.
Tento trik nese název „copy on write“ a jeho myšlenka je poměrně jednoduchá:
1. vytvoříme kopii adresního prostoru (tedy relevantních stránkových tabulek, nikoliv samotných dat),
2. v obou kopiích označíme všechny stránky příznakem jen pro čtení a poznačíme si také, že se jedná o
„copy on write“ stránky.`,`Externí stránkování 
Má-li OS nedostatek použitelných fyzických adres (například proto, že běží hodně programů, které využívají hodně
paměti), může některou stránku odstěhovat z operační paměti někam jinam – např. na externí (pevné)
úložiště, které je sice obvykle mnohem pomalejší, ale také má obvykle mnohem větší kapacitu. Nebude-li
se stávat příliš často, že program potřebuje k takto „odklizené“ stránce přistoupit, nemusí se jednat
o zásadní problém.`,`Rámce a stránky
• stránkou budeme i nadále označovat rozsah virtuálních adres,
   ∘ také stále platí, že stránky mají pevnou velikost (počet virtuálních adres, které obsahuje), a že
   ∘ nejnižší adresa stránky musí být beze zbytku dělitelná velikostí stránky,
• rámcem budeme označovat rozsah fyzických adres,
   ∘ které splňují stejné požadavky na velikost a zarovnání jako stránky,
   ∘ a na jeden rámec mapovat právě jednu stránku.
Lze pak mluvit o tom, že daná stránka je uložena v nějakém rámci, případně že daný rámec je volný.`,`Líné načítání
Líné načítání lze také výhodně kombinovat s klasickým externím stránkováním – vybereme-li jako oběť
stránku s kódem (nebo konstantními daty) programu, není potřeba ji nikam ukládat – lze ji přímo odkázat
zpátky na spustitelný soubor.`,`Mapování souborů
Posledním, jednoznačně nejdůležitějším, využitím externího stránkování je
mapování datových souborů do paměti (na žádost aplikace). V tomto režimu jsou externí stránky uloženy
v jinak běžném souboru. Místo komplikovaných vstupně-výstupních operací tak může program s obsahem
souboru pracovat stejně, jako by byl uložen v operační paměti. Využijeme-li tohoto mechanismu také
k zápisu změněných stránek zpátky do souboru, může program soubor i zcela transparentně upravovat.`],incorrect:[`instrukce tvaru ld reg_addr → reg_out načte hodnotu z paměti a uloží ji do registru; reg_addr je
registr, ve kterém je uložena nějaká hodnota

instrukce tvaru st reg_in → reg_addr naopak hodnotu do paměti uloží, a to opět na adresu zadanou registrem reg_addr.`,`Každá adresa je číslo, ale ne každé číslo je platná adresa. Adresním prostorem
tedy budeme nazývat zejména množinu platných adres, ale můžeme v tomto pojmu zahrnout i případnou dalš
 zajímavou strukturu paměti (např. to, že nějaká část adres má jiné vlastnosti než ty ostatní).
Adresní prostor se obvykle skládá bloků, kde jednotlivé bloky obsahují libovolné adresy.`,`Program má při svém běhu k dispozici nějaký adresní prostor, který může používat
k ukládání dat. Krom pracovní paměti (do které si program ukládá libovolná data jak uzná za vhodné) je
součástí adresního prostoru programu také kód – adresy, na kterých jsou uloženy instrukce, ze kterých
program samotný sestává, ovšem zásobník se zde obvykle nenachází.`,`Fyzická paměť
Fyzické adresy (tedy adresy, které patří fyzickému adresnímu prostoru) přímo
pojmenovávají fyzické paměťové buňky procesoru. Přestože se jedná o jeden adresní prostor
 podobně jako v případě paměti programu může mít další strukturu.
`,`Virtualizace
V principu nic nebrání tomu, aby program používal k práci s pamětí přímo fyzické adresy.
V takovém případě bychom program přizpůsobili tomu, které fyzické adresy jsou na našem počítači platné
a odpovídají operační paměti.
Takto nemůžou vzniknout žádné problémy a tedy je virtualizace procesoru zbytečná.
`,`Virtuální a fyzické adresy
Bylo by tedy lepší, aby adresní prostor programu na tom fyzickém závislý.
Proto procesory určené pro běžné počítače poskytují spojení virtuálních adresních prostorů s těmi fyzickými. Fyzický adresní prostor
je tedy uživatelským programům libovolně přístupný.`,`Překlad adres
Virtuální adresy budeme překládat na adresy fyzické, které již určí, kde budou příslušná data skutečně uložena.
O fyzické buňce pak můžeme říct, že má právě jednu fyzickou adresu (a ta je této buňce přidělena
pevně) a právě jednu virtuální adresu (a ta není této buňce přidělena pevně).`,`Jednotka správy paměti
Přístup do paměti (čtení, zápis) je časově kritickou operací – procesor
jich provádí miliony za vteřinu. Přitom adresní operand instrukce, která takový přístup realizuje,
představuje vždy fyzickou adresu, která musí být ještě před samotným přístupem přeložena na adresu
virtuální.`,`Jednotka správy paměti
Překlad adres proto musí být velmi rychlý, a není nijak překvapivé, že je realizován specializovaným
hardwarem, který je přímo součástí procesoru. Zároveň ale nesmíme dovolit aby operační systém jakkoli, jinak by došlo k porušení abstrakce.`,`Stránky
Stránka je pak základní jednotkou překladu. Tím se jednak zmenší potřebné tabulky, jednak se tím
zjednoduší proces překladu. Budeme-li totiž požadovat, aby:

1. stránka obsahovala 2**n
adres (tj. měla velikost 2**n bajtů),
2. stránka začínala adresou, která je beze zbytku dělitelná 2
3. byla mapována na fyzickou adresu, která je také beze zbytku dělitelná 2,

můžeme spodních n bitů virtuální adresy přímo použít jako spodních n bitů adresy fyzické. Zbytek fyzické adresy již dopočítáme podle překladové tabulky. 
To má mimo jiné za důsledek, že stránky se nemohou překrývat.`,`Stránkové tabulky
Stránkové tabulky jsou uloženy v operační paměti, ale jejich přesná struktura
je opět vlastností konkrétního hardwaru. Protože moderní počítače mají velké adresní prostory (2**32 nebo 2**64 virtuálních adres), 
používají obvykle husté, jednoúrovňové překladové tabulky.`,`Proces
Pojem běžící program je poněkud vágní, proto si pro něj zavedeme formálnější alternativu
– proces. Tímto pojmem budeme označovat entitu, která:
• je spojena s fyzickým adresním prostorem, který
     ∘ obsahuje kód – instrukce – nějakého programu,
     ∘ veškerá data, která tento program potřebuje pro svůj běh,
• operační systém o ni vede záznam,
• může vlastnit krom paměti i další zdroje`,`Ochrana paměti
• Kód programu (a případná data, která jsou určena výhradně ke čtení) může být ve fyzické paměti uložen
pouze jednou i v případě, kdy tento kód využívá více procesů. Jedná se o užitečnou a zároveň bezpečnou
optimalizaci, protože odpovídající virtuální adresy jsou v obou procesech označeny příznakem pouze
pro čtení, a procesy se tak nemohou skrze tyto adresy vzájemně ovlivňovat.
• Na žádost programu může být dvěma procesům do jejich virtuálních adresních prostorů namapován
stejný blok fyzické paměti i v režimu umožňujícím zápis. Smyslem takto namapované paměti je umožnit
komunikaci mezi dotčenými procesy: mohou si tímto způsobem totiž jednoduše předávat data. Pozor:
virtuální adresy takto namapované paměti musí být v obou procesech stejné.`,`Přepnutí procesu
Zatím jsme nezmínili, jak procesor (resp. jednotka správy paměti) najde
stránkovou tabulku první úrovně. Odpověď na tuto otázku je klíčem k přepínání procesů:
1. fyzická adresa stránkové tabulky 1. úrovně je uložena ve speciálním registru procesoru,
2. tuto adresu může nastavit libovolný uživatelský program ve speciálním režimu
3. změnou hodnoty v tomto registru se aktivuje překlad adres podle nově zavedené stránkové tabulky.`,`Vytvoření procesu
Asi nejjednodušší způsob, jak vytvořit nový proces, je duplikace nějakého
existujícího (POSIX této operaci říká fork). V mnoha operačních systémech je to dokonce způsob jediný.19
Mohlo by se zdát, že je to způsob dost neefektivní: procesy mohou mít virtuální adresní prostor
o velikosti mnoha GiB a duplikace takového množství paměti vyžaduje vynaložení značných prostředků.
Operační systémy proto používají trik, který zde vede k výrazné úspoře, a se kterým se setkáme ještě
v několika kontextech.
Tento trik nese název „copy on write“ a jeho myšlenka je poměrně jednoduchá:
1. vytvoříme kopii fyzických adres (tedy relevantních fyzických buněk, nikoliv samotných dat),
2. v obou kopiích označíme všechny stránky příznakem jen pro čtení a poznačíme si také, že se jedná o
„copy on write“ stránky.`,`Externí stránkování 
Má-li OS nedostatek použitelných fyzických adres (například proto, že běží hodně programů, které využívají hodně
paměti), může některou stránku odstěhovat z operační paměti někam jinam – např. na externí (pevné)
úložiště, které je sice obvykle mnohem pomalejší, ale také má obvykle mnohem větší kapacitu. Nebude-li
se stávat příliš často, že program k dané stránce dlouhodobě nepřistupuje, nemusí se jednat
o zásadní problém.`,`Rámce a stránky
• stránkou budeme i nadále označovat rozsah fyzických adres,
   ∘ také stále platí, že stránky mají pevnou velikost (počet virtuálních adres, které obsahuje), a že
   ∘ nejnižší adresa stránky musí být beze zbytku dělitelná velikostí stránky,
• rámcem budeme označovat rozsah virtuálních adres,
   ∘ které splňují stejné požadavky na velikost a zarovnání jako stránky,
   ∘ a na jeden rámec mapovat právě jednu stránku.
Lze pak mluvit o tom, že daná stránka je uložena v nějakém rámci, případně že daný rámec je volný.`,`Líné načítání
Líné načítání lze také výhodně kombinovat s klasickým externím stránkováním – vybereme-li jako oběť
stránku s kódem (nebo konstantními daty) programu, stačí stránku uložit do operační paměti`,`Mapování souborů
Posledním, jednoznačně nejdůležitějším, využitím externího stránkování je
mapování datových souborů do paměti (na žádost aplikace). V tomto režimu jsou externí stránky uloženy
v jinak běžném souboru. Místo komplikovaných vstupně-výstupních operací tak může program s obsahem
souboru pracovat stejně, jako by byl uložen v operační paměti. Toto ovšem zabraňujeprogramu soubor transparentně upravovat.`]},{section:2,name:"Virtualizate procesoru",correct:[`Výpočet
Procesor vykonává instrukce, čím realizuje výpočet. Nejjednodušší třídou instrukcí jsou
tzv. aritmetické a logické instrukce (tedy ty, které provádí ALU – aritmeticko-logická jednotka). Tím se
myslí zejména:
• aritmetika: sčítání, odečítání, násobení a dělení,
• bitové operace: and, or, xor po bitech, bitové posuvy,
• srovnání dvou hodnot (rovnost, nerovnost) – výsledek se uloží do běžného registru nebo do stavového
příznaku procesoru.`,`Registry
Podobně jako paměť, registry slouží k ukládáni čísel – existují dva klíčové rozdíly mezi
registry a pamětí:
1. pojmenování registru je pevnou součástí instrukce, kdežto paměťovou adresu lze vypočítat (paměť
lze indexovat, registry nikoliv),
2. reprezentace čísla v registru je monolitická – registry nejsou složené z bajtů, daný registr obsahuje
celé slovo (částečně důsledek předchozího bodu: registr lze pojmenovat pouze jako celek).`,`Programový čítač
Vyhrazený registr (programový čítač, angl. program counter, někdy také instruction pointer, budeme
jej označovat pc) pak obsahuje virtuální adresu právě vykonávané instrukce. Tento registr rozhoduje
o tom, která instrukce se má vykonat, není do něj ale obvykle možné zapisovat běžnými (aritmetickými,
atp.) instrukcemi. K tomu jsou určeny instrukce řízení toku, kterých hlavním efektem je právě změna
hodnoty programového čítače.`,`Instrukce
Instrukce je elementární příkaz strojového kódu; to znamená:
• elementární – je to nejmenší jednotka činnosti, kterou lze procesoru zadat,
• příkaz – instrukce řídí činnost procesoru, „přikazují“ mu provedení nějaké akce.
Instrukcí budeme nazývat pouze celek, který obsahuje veškeré informace potřebné k provedení konkrétních
akcí (zejména udává operaci, která se má provést, a konkrétní registry, se kterými se bude pracovat a
také konkrétní přímé operandy.
Instrukcí je pouze konečně mnoho, je tedy zejména možné je očíslovat (nebo jinak konečně kódovat,
např. do sekvencí bajtů). Každé takové číslo (kódování) popisuje konkrétní akci, kterou může procesor
provést.
`,`Efekt instrukce
Každá instrukce má nějaký efekt na stav procesoru, a případně (podle konkrétní instrukce) na další připojená zařízení (zejména paměť). 
Tento efekt je zároveň definující charakteristikou dané instrukce.
Program totiž nedělá nic jiného, než že vhodnou manipulací stavu (procesoru, paměti, periferií) postupuje
od vstupů k požadovaným výstupům. Této posloupnosti změn stavu říkáme výpočet.
`,`Efekt instrukce
Jak vstupy tak výstupy programu jsou součástí stavu – vstupy na začátku, výstupy na konci výpočtu.
Vstup může být například hodnota zapsaná v nějaké buňce paměti; výstup může být třeba stav obrazovky,
kdy rozsvícené pixely vytváří obrazec, který přečteme jako slova hello world.
Efekt instrukce tedy není nic jiného, než elementární změna stavu, nebo jinak řečeno elementární výpočet.
Instrukci samotnou tak můžeme chápat jako pokyn k provedení takového elementárního výpočtu.`,`Program
Co bude program počítat (resp. co bude počítat procesor řízený daným programem)
je určeno textem programu: instrukcemi uloženými v paměti. Instrukce, které nejsou skoky, obvykle
posouvají programový čítač za svůj vlastní konec, tedy na instrukci na nejbližší vyšší adrese. Většina
programu je tedy prováděna v pořadí od nižších k vyšším (virtuálním) adresám.
Výjimku samozřejmě tvoří instrukce skoku, které mohou některé adresy přeskočit (typicky podmíněné
příkazy – if), nebo se naopak vrátit k některé dřívější, už vykonané instrukci (typicky cykly – while)`,`Zásobník
Za účelem aktivace podprogramu by se nám hodila jakási odlehčená verze virtualizace procesoru:
1. podprogram je dostatečně uzavřený celek na to, aby mělo smysl jej alespoň částečně oddělit od
ostatních výpočtů – často např. používá nějaká data, která mimo tento podprogram nemají žádný
význam (ve vyšším programovacím jazyce lokální proměnné),
2. protože takový podprogram je navíc často potřeba spouštět z různých míst programu, je žádoucí mít
nějaký mechanismus, který po ukončení výpočtu podprogramu vrátí řízení na místo, ze kterého byl
původně aktivován.
Obě tyto funkce zastává zásobník (hardwarový zásobník, zásobník volání, angl. call stack, atp.). Jedná
se o spojitou oblast virtuálního adresního prostoru, které rozsah je dán hodnotou ukazatele vrcholu
zásobníku (jedná se o druhý „speciální“ registr, vedle programového čítače) a pevným dnem.`,`Aktivační záznam
Zásobník typického programu je složen z aktivačních záznamů, známých též
jako rámců (angl. call frame). Každý takový záznam odpovídá jedné aktivaci podprogramu, která
dosud neskončila. Jak jistě víte, podprogramy se mohou aktivovat (volat) vzájemně, nebo může dokonce
podprogram opakovaně aktivovat sám sebe – jev, který pravděpodobně znáte jako rekurzi.
Je také relativně logické, že má-li nějaký podprogram skončit (a tedy má být jeho aktivační záznam
odstraněn), musí nejprve skončit všechny podprogramy, které sám aktivoval (přímo či nepřímo). Tato
skutečnost je odpovědná za to, že aktivační rámce tvoří právě zásobník (a ne třeba frontu, strom,
graf, nebo jinou strukturu).`,`Stav procesoru
Stav procesoru tedy sestává z:
1. hodnot uložených v aritmetických registrech,
2. hodnoty programového čítače,
3. hodnoty ukazatele zásobníku.
V případě, že:
• program neobsahuje instrukce přístupu do paměti,
• nebo celý virtuální adresní prostor je přístupný pouze aktivnímu programu,
je celý výpočet jednoznačně určen programem samotným a počátečním stavem procesoru (a případně
paměti).`,`Vlákno
Nyní jsme konečně připraveni definovat pojem vlákno: je to
• výpočet (posloupnost změn stavu), který vznikne
• nepřerušenou činností jednoho procesoru, který je
• po celou dobu řízen jedním programem.
Všimněte si, že neklademe žádné požadavky na adresní prostor. Takový výpočet tedy není jednoznačně
určen, protože není izolován – součástí takového výpočtu může být synchronizace, a tedy průběh výpočtu
krom samotného programu a počátečního stavu bude záviset také na vnějších událostech, které může
vlákno skrze svůj adresní prostor pozorovat.
Za povšimnutí také stojí, že definice nepovoluje, aby se stav procesoru měnil jakkoliv jinak, než
řízením programu. Bude také výhodné předpokládat, že zásobník je pro externí entity nepřístupný a že
jej tedy chápat jako součást stavu vlákna (který je jinak shodný se stavem procesoru).`,`Logický procesor
Definice vlákna se odvolává na nepřerušenou činnost procesoru. Pro účely této
definice si ale vystačíme s velmi abstraktním chápáním procesoru:
1. procesor má stav, který sestává právě z hodnot registrů,
2. procesor svůj stav mění vykonáváním instrukcí (a nijak jinak).
Takto popsaný procesor budeme nazývat logickým procesorem. Má několik zajímavých vlastností:
1. je zřejmé, že výpočet logického procesoru lze přímočaře realizovat na fyzickém procesoru,
2. stav logického procesoru je velmi jednoduchý a tedy není těžké si představit, že bychom ho mohli
například uložit do paměti (to se nakonec částečně děje i při aktivaci podprogramu),
3. lze si také představit, že bychom mohli fyzický procesor do takto uloženého stavu zase vrátit.
Předpokládejme, že operace z bodů 2 a 3 skutečně existují, a že je může operační systém provést bez
součinnosti aktuálně prováděného vlákna. Pak už je jednoduše vidět, jak realizovat několik logických
procesorů pomocí jednoho fyzického, a tím dosáhnout virtualizace procesoru
`,`Přepnutí vlákna
Protože můžeme uložit, a později obnovit, stav logického procesoru, můžeme na
jednom fyzickém procesoru provádět střídavě několik různých vláken, a zároveň zabezpečit, že každé
vlákno má, ze svého vlastního pohledu, pomyslný vlastní procesor.
Co obnáší uložení a obnova registru závisí na jejich typu:
1. aritmetické registry – teoreticky nepředstavují problém, ale protože bez aritmetických registrů
nelze nic počítat, nelze bez asistence procesoru uložit ani obnovit všechny,
2. ukazatel zásobníku v principu jednoduché jak uložit tak obnovit, problém ale nastane, používáme-li
zásobníkové instrukce k manipulaci s ostatními registry,
3. programový čítač představuje největší problém: nelze přímo ani uložit (vyžadovalo by součinnost
prováděného programu), ani obnovit (obnovou automaticky ztrácíme kontrolu nad procesorem, musí
tedy být provedena v posledním kroku, kdy už ale nemáme k dispozici žádné aritmetické registry).
`,`Plánovač
Části jádra operačního systému, která je odpovědná za přidělování procesorů vláknům
říkáme plánovač vláken, často také z historických důvodů plánovač procesů. Plánovač je na každém
procesoru aktivován v pravidelných intervalech a je mu tedy umožněno odebrat procesor aktivnímu
vláknu i bez součinnosti tohoto vlákna.
Základním rozhodnutím plánovače při každé aktivaci je: „Má aktivní vlákno (logický procesor) pokračovat
ve výpočtu, nebo má být přerušeno (preempted). Které vlákno má být na procesoru spuštěno jako další?
`,`Cíle plánovače
Na plánovací algoritmus (a plánovač jako celek) máme několik základních požadavků:
1. maximalizovat propustnost
2. minimalizovat latenci (prodlevu)
3. udržovat férovost
Je na první pohled vidět, že některé požadavky jsou protichůdné: zejména latence a propustnost často
stojí proti sobě, a zlepšení jednoho parametru vede ke zhoršení toho druhého.`,`Stav vlákna
Vlákno (které ještě neskončilo) může být, z pohledu plánovače, ve třech základních
stavech:
1. právě běží – má aktuálně přidělený procesor,
2. připraveno ke běhu, ale čeká na procesor – vlákno bylo přerušeno plánovačem (nebo nebylo dosud nikdy
spuštěno), ale jinak mu nic nebrání pokračovat ve výpočtu,
3. čeká na událost – vlákno je „zaseknuté“ v synchronizační smyčce a nemůže pokračovat ve výpočtu,
dokud nenastane nějaká externí událost (plánovači musí být tento stav explicitně oznámen, jinak jej
nemá jak rozeznat od běžného výpočtu).

nemůže se stát, že by vlákno, které čekalo na procesor, přešlo do stavu čekání na událost
– tento přechod totiž vyžaduje nějakou akci, kterou musí provést samotné vlákno.
`,`Fronta úloh
Základním pracovním nástrojem plánovače jsou běhové fronty úloh (angl. run queue),
do kterých plánovač řadí vlákna, která čekají na procesor. Konkrétní plánovací algoritmy se pak liší
zejména v tom, jak se tyto fronty chovají.
`,`Afinita
Protože migrace vlákna na jiný fyzický procesor není zadarmo, je žádoucí zbytečným
migracím vláken zamezit. Mluvíme v takovém případě o afinitě vlákna ke konkrétnímu fyzickému procesoru:
plánovač má snahu vlákno opakovaně plánovat na stejný fyzický procesor.
Mezní situace jsou:
1. plánovač zcela bez afinity: např. proto, že má globální frontu a tedy je prvnímu čekajícímu vláknu
vždy přidělen první uvolněný procesor,
2. plánovač bez možnosti migrace: např. proto, že má lokální fronty, a neumožňuje přesun vláken mezi
nimi.`,`Prioritní fronty
Interaktivní plánovače používají téměř výhradně nějakou formu prioritního
plánování – vlákna mají přidělenu prioritu (staticky nebo dynamicky), která ovlivňuje jejich schopnost
získat procesor – a to jak latenci (jak dlouho musí vlákno čekat ve frontě) tak celkový přidělený
výpočetní čas (jaký díl procesorového času je vláknu přidělen).
`,`Prioritní fronty
výhody:
• používá pouze jednoduché datové struktury,
• všechny operace jsou asymptoticky konstantní (vzhledem k počtu čekajících vláken – počet prioritních
tříd je pevný).
A také jednu důležitou nevýhodu:
• dlouho běžící výpočetní vlákno s vysokou prioritou zablokuje procesor pro všechna ostatní vlákna.
Tuto nevýhodu lze vyřešit dynamickou úpravou priority: za každou přidělenou jednotku výpočetního času
je vlákno „potrestáno“ snížením priority. Existují-li jiná čekající vlákna, dříve nebo později se tak
dostanou ke slovu.`,`Férové plánování
Cílem férového plánovače je, aby každé vlákno dostalo přiděleno podle možnosti
stejné množství výpočetního času (případně váženo prioritou). V tomto se podobá na systém s dynamickou
úpravou priority z předchozí sekce, ale místo pevného systému prioritních tříd má priority v libovolném
rozsahu. Realizuje se proto klasickou (monolitickou) prioritní frontou – např. binární haldou nebo
binárním vyhledávacím stromem.`,`Odebrání procesoru
Rozhodnutí o odebrání procesoru (tzn. přesunu vlákna ze stavu „běží“ do
stavu „čeká na procesor“) má dva základní vstupy:
1. jak dlouho již běží právě aktivní vlákno,
2. srovnání aktivního vlákna a následujícího vlákna ve frontě.
Konkrétní rozhodnutí opět závisí na konkrétním plánovacím algoritmu. Je ale obvyklé nechat aktivní
vlákno běžet nějaký minimální čas, i v případě, že další naplánované vlákno má vyšší prioritu (tímto se
brání příliš častému přepínání vláken) – tento minimální čas je plánovací kvantum. Delší kvantum má
pozitivní vliv na propustnost, ale negativní vliv na latenci (reakční dobu).`,`Čekající vlákna
Vlákno je označeno jako čekající na událost (říkáme o něm také, že je uspané)
buď na vlastní žádost (umožňuje-li to operační systém a povaha události), nebo na popud některé jiné
části operačního systému:
• vyžádá-li například vlákno čtení ze souboru, a operační systém nemá aktuálně data k dispozici, zařádí
požadavek na data do fronty a vlákno uspí,
• pokusí-li se vstoupit do kritické sekce, která je aktuálně zamčená jiným vláknem,
• vyžádá vstup z klávesnice (a zrovna není žádný k dispozici),
`,`Čekající vlákna
Události čekání jsou v zásadě dvou typů:
• čekání na vyřízení „soukromého“ požadavku: takto uspané vlákno je poznačeno u příslušného požadavku,
a jakmile je tento vyřízen, odpovědná komponenta vlákno probudí (aktivuje plánovač, který vlákno
přesune do běhové fronty, nebo mu ihned přidělí procesor),
• soutěž o nějaký zdroj (např. zmiňovaná kritická sekce), který může vlastnit v danou chvíli nejvýše
jedno vlákno, ale na který jich může zároveň čekat několik: takové zdroje mají čekací frontu (angl.
wait queue) a příslušná událost probudí (přesune do běhové fronty) pouze první vlákno z čekací fronty:
nemá smysl probouzet všechna, protože by okamžitě všechna krom jednoho musela být zase uspána
(vyhrát soutěž může nejvýše jedno).
`],incorrect:[`Výpočet
Operační paměť vykonává instrukce, čím realizuje výpočet. Nejjednodušší třídou instrukcí jsou
tzv. aritmetické a logické instrukce (tedy ty, které provádí ALU – aritmeticko-logická jednotka). Tím se
myslí zejména:
• aritmetika: sčítání, odečítání, násobení a dělení,
• bitové operace: and, or, xor po bitech, bitové posuvy,
• srovnání dvou hodnot (rovnost, nerovnost) – výsledek se uloží do běžného registru nebo do stavového
příznaku procesoru.`,`Registry
Podobně jako paměť, registry slouží k ukládáni čísel – existují dva klíčové rozdíly mezi
registry a pamětí:
1. pojmenování registru je pevnou součástí instrukce, kdežto paměťovou adresu lze vypočítat (paměť
lze indexovat, registry nikoliv),
2. reprezentace čísla v registru – registry jsou složené z bajtů, daný registr obsahuje
bajty jako každá jíná část paměti`,`Programový čítač
Vyhrazený registr (programový čítač, angl. program counter, někdy také instruction pointer, budeme
jej označovat pc) pak obsahuje fyzickou adresu právě vykonávané instrukce. Tento registr rozhoduje
o tom, která instrukce se má vykonat, není do něj ale obvykle možné zapisovat běžnými (aritmetickými,
atp.) instrukcemi. K tomu jsou určeny instrukce řízení toku, kterých hlavním efektem je právě změna
hodnoty programového čítače.`,`Instrukce
Instrukce je elementární příkaz strojového kódu; to znamená:
• elementární – je to nejmenší jednotka činnosti, kterou lze procesoru zadat,
• příkaz – instrukce řídí činnost procesoru, „přikazují“ mu provedení nějaké akce.
Instrukcí budeme nazývat pouze celek, který obsahuje veškeré informace potřebné k provedení konkrétních
akcí (zejména udává operaci, která se má provést, a konkrétní registry, se kterými se bude pracovat a
také konkrétní přímé operandy.
Instrukcí je nekonečně mnoho, je tedy nepraktické je číslovat
`,`Efekt instrukce
Každá instrukce má nějaký efekt na stav procesoru, a případně (podle konkrétní instrukce) na další připojená zařízení (zejména paměť). 
Tento efekt není definující charakteristikou dané instrukce.
Program totiž nedělá nic jiného, než že vhodnou manipulací stavu (procesoru, paměti, periferií) postupuje
od vstupů k požadovaným výstupům. Této posloupnosti změn stavu říkáme výpočet.
`,`Efekt instrukce
Jak vstupy tak výstupy programu jsou součástí stavu – vstupy na začátku, výstupy na konci výpočtu.
Vstup musí být hodnota zapsaná v nějaké buňce paměti; výstup může být třeba stav obrazovky,
kdy rozsvícené pixely vytváří obrazec, který přečteme jako slova hello world.
Efekt instrukce tedy není nic jiného, než elementární změna stavu, nebo jinak řečeno elementární výpočet.
Instrukci samotnou tak můžeme chápat jako pokyn k provedení takového elementárního výpočtu.`,`Program
Co bude program počítat (resp. co bude počítat procesor řízený daným programem)
je určeno textem programu: instrukcemi uloženými v paměti. Instrukce, které nejsou skoky, obvykle
posouvají programový čítač za svůj vlastní konec, tedy na instrukci na nejbližší nižší adrese. Většina
programu je tedy prováděna v pořadí od vyšších k nižším (virtuálním) adresám.
Výjimku samozřejmě tvoří instrukce skoku, které mohou některé adresy přeskočit (typicky podmíněné
příkazy – if), nebo se naopak vrátit k některé dřívější, už vykonané instrukci (typicky cykly – while)`,`Zásobník
Za účelem aktivace podprogramu by se nám hodila jakási odlehčená verze virtualizace procesoru:
1. podprogram není dostatečně uzavřený celek na to, aby mělo smysl jej  oddělit od ostatních výpočtů, proto ho neoddělujeme
2. protože takový podprogram je navíc často potřeba spouštět z různých míst programu, je žádoucí mít
nějaký mechanismus, který po ukončení výpočtu podprogramu vrátí řízení na místo, ze kterého byl
původně aktivován.
Obě tyto funkce zastává zásobník (hardwarový zásobník, zásobník volání, angl. call stack, atp.). Jedná
se o spojitou oblast virtuálního adresního prostoru, které rozsah je dán hodnotou ukazatele vrcholu
zásobníku (jedná se o druhý „speciální“ registr, vedle programového čítače) a pevným dnem.`,`Aktivační záznam
Zásobník typického programu je složen z aktivačních záznamů, známých též
jako rámců (angl. call frame). Každý takový záznam odpovídá jedné aktivaci podprogramu, který již skončil.
Jak jistě víte, podprogramy se mohou aktivovat (volat) vzájemně, nebo může dokonce
podprogram opakovaně aktivovat sám sebe – jev, který pravděpodobně znáte jako rekurzi.
Je také relativně logické, že má-li nějaký podprogram skončit (a tedy má být jeho aktivační záznam
odstraněn), musí nejprve skončit všechny podprogramy, které sám aktivoval (přímo či nepřímo). Tato
skutečnost je odpovědná za to, že aktivační rámce tvoří právě zásobník (a ne třeba frontu, strom,
graf, nebo jinou strukturu).`,`Stav procesoru
Stav procesoru tedy sestává z:
1. hodnot uložených v aritmetických registrech,
2. hodnoty programového čítače,
3. hodnoty ukazatele zásobníku.
V případě, že:
• program neobsahuje instrukce přístupu do paměti,
• a celý virtuální adresní prostor je přístupný pouze aktivnímu programu
je celý výpočet jednoznačně určen programem samotným a počátečním stavem procesoru (a případně
paměti).`,`Vlákno
Nyní jsme konečně připraveni definovat pojem vlákno: je to
• výpočet (posloupnost změn stavu), který vznikne
• nepřerušenou činností jednoho procesoru, který je
• po celou dobu řízen jedním programem.
Všimněte si, že neklademe žádné požadavky na adresní prostor. Takový výpočet tedy je jednoznačně určen.
Za povšimnutí také stojí, že definice nepovoluje, aby se stav procesoru měnil jakkoliv jinak, než
řízením programu. Bude také výhodné předpokládat, že zásobník je pro externí entity nepřístupný a že
jej tedy chápat jako součást stavu vlákna (který je jinak shodný se stavem procesoru).`,`Logický procesor
Definice vlákna se odvolává na nepřerušenou činnost procesoru. Pro účely této
definice si ale vystačíme s velmi abstraktním chápáním procesoru:
1. procesor má stav, který sestává právě z hodnot registrů,
2. procesor svůj stav mění vykonáváním instrukcí (a nijak jinak).
Takto popsaný procesor budeme nazývat logickým procesorem. Má několik zajímavých vlastností:
1. je zřejmé, že výpočet logického procesoru lze přímočaře realizovat na fyzickém procesoru,
2. stav logického procesoru je velmi složitý a tedy není možné ho uložit do paměti 
`,`Přepnutí vlákna
Protože můžeme uložit, a později obnovit, stav logického procesoru, můžeme na
jednom fyzickém procesoru provádět střídavě několik různých vláken, a zároveň zabezpečit, že každé
vlákno má, ze svého vlastního pohledu, pomyslný vlastní procesor.
Co obnáší uložení a obnova registru závisí na jejich typu:
1. aritmetické registry – teoreticky nepředstavují problém, protože je lze obnovit všechny,
2. ukazatel zásobníku v principu jednoduché jak uložit tak obnovit, problém ale nastane, používáme-li
zásobníkové instrukce k manipulaci s ostatními registry,
3. programový čítač představuje největší problém: nelze přímo ani uložit (vyžadovalo by součinnost
prováděného programu), ani obnovit (obnovou automaticky ztrácíme kontrolu nad procesorem, musí
tedy být provedena v posledním kroku, kdy už ale nemáme k dispozici žádné aritmetické registry).
`,`Plánovač
Části jádra operačního systému, která je odpovědná za přidělování procesorů vláknům
říkáme plánovač vláken, často také z historických důvodů plánovač procesů. Plánovač je jen na hlavním
procesoru aktivován v pravidelných intervalech a je mu tedy umožněno odebrat procesor aktivnímu
vláknu i bez součinnosti tohoto vlákna.
Základním rozhodnutím plánovače při každé aktivaci je: „Má aktivní vlákno (logický procesor) pokračovat
ve výpočtu, nebo má být přerušeno (preempted). Které vlákno má být na procesoru spuštěno jako další?
`,`Cíle plánovače
Na plánovací algoritmus (a plánovač jako celek) máme několik základních požadavků:
1. minimalizovat propustnost
2. maximalizovat latenci (prodlevu)
3. udržovat férovost
Je na první pohled vidět, že některé požadavky jsou protichůdné: zejména latence a propustnost často
stojí proti sobě, a zlepšení jednoho parametru vede ke zhoršení toho druhého.`,`Stav vlákna
Vlákno (které ještě neskončilo) může být, z pohledu plánovače, ve třech základních
stavech:
1. právě běží – má aktuálně přidělený procesor,
2. připraveno ke běhu, ale čeká na procesor – vlákno bylo přerušeno plánovačem (nebo nebylo dosud nikdy
spuštěno), ale jinak mu nic nebrání pokračovat ve výpočtu,
3. čeká na událost – vlákno je „zaseknuté“ v synchronizační smyčce a nemůže pokračovat ve výpočtu,
dokud nenastane nějaká externí událost (plánovači musí být tento stav explicitně oznámen, jinak jej
nemá jak rozeznat od běžného výpočtu).

Vlákno může libovolně přecházet mezi všemi stavy, tyto přechody jsou řízeny procesorem`,`Fronta úloh
Základním pracovním nástrojem plánovače jsou běhové fronty úloh (angl. run queue),
do kterých plánovač řadí vlákna, která čekají na událost. Konkrétní plánovací algoritmy se pak liší
zejména v tom, jak se tyto fronty chovají.
`,`Afinita
Protože migrace vlákna na jiný fyzický procesor není zadarmo, je žádoucí zbytečným
migracím vláken zamezit. Mluvíme v takovém případě o afinitě vlákna ke konkrétnímu fyzickému procesoru:
plánovač má snahu vlákno opakovaně plánovat na stejný fyzický procesor.
Mezní situace jsou:
1. plánovač zcela bez afinity: např. proto, že má lokální fronty, a neumožňuje přesun vláken mezi
nim,
2. plánovač bez možnosti migrace: např. proto,že má globální frontu a tedy je prvnímu čekajícímu vláknu
vždy přidělen první uvolněný procesor.`,`Prioritní fronty
Interaktivní plánovače používají téměř výhradně nějakou formu prioritního
plánování – vlákna mají přidělenu prioritu (staticky nebo dynamicky), která ovlivňuje jejich schopnost
získat procesor – a to jen latenci (jak dlouho musí vlákno čekat ve frontě), celkový přidělený
výpočetní čas ovlivňovat nemůže
`,`Prioritní fronty
výhody:
• používá pouze jednoduché datové struktury,
• všechny operace jsou asymptoticky konstantní (vzhledem k počtu čekajících vláken – počet prioritních
tříd je pevný).
A také jednu důležitou nevýhodu:
• dlouho běžící výpočetní vlákno s vysokou prioritou zablokuje procesor pro všechna ostatní vlákna.
Tuto nevýhodu nelze vyřešit dynamickou úpravou priority, docházelo by k takzvanému hladovění vláken.`,`Férové plánování
Cílem férového plánovače je, aby každé vlákno dostalo přiděleno podle možnosti
stejné množství výpočetního času (případně váženo prioritou). V tomto se podobá na systém s dynamickou
úpravou priority z předchozí sekce, ale místo pevného systému prioritních tříd má priority v libovolném
rozsahu. Realizuje se proto zásobníkem.`,`Odebrání procesoru
Rozhodnutí o odebrání procesoru (tzn. přesunu vlákna ze stavu „běží“ do
stavu „čeká na procesor“) má dva základní vstupy:
1. jak dlouho již běží právě aktivní vlákno,
2. srovnání aktivního vlákna a následujícího vlákna ve frontě.
Konkrétní rozhodnutí opět závisí na konkrétním plánovacím algoritmu. Je ale obvyklé nechat aktivní
vlákno běžet nějaký minimální čas, i v případě, že další naplánované vlákno má vyšší prioritu (tímto se
brání příliš častému přepínání vláken) – tento minimální čas je plánovací kvantum. Delší kvantum má
negativní vliv na propustnost, ale pozitivní vliv na latenci (reakční dobu).`,`Čekající vlákna
Vlákno je označeno jako čekající na událost (říkáme o něm také, že je uspané) na žádost pouze operačního systému, příklad:
• vyžádá-li například vlákno čtení ze souboru, a operační systém nemá aktuálně data k dispozici, zařádí
požadavek na data do fronty a vlákno uspí,
• pokusí-li se vstoupit do kritické sekce, která je aktuálně zamčená jiným vláknem,
• vyžádá vstup z klávesnice (a zrovna není žádný k dispozici),
`,`Čekající vlákna
Události čekání jsou v zásadě dvou typů:
• čekání na vyřízení „soukromého“ požadavku: takto uspané vlákno je poznačeno u příslušného požadavku,
a jakmile je tento vyřízen, odpovědná komponenta vlákno přesune na jiný procesor.
• soutěž o nějaký zdroj (např. zmiňovaná kritická sekce), který může vlastnit v danou chvíli nejvýše
jedno vlákno, ale na který jich může zároveň čekat několik: takové zdroje mají čekací frontu (angl.
wait queue) a příslušná událost probudí (přesune do běhové fronty) pouze první vlákno z čekací fronty:
nemá smysl probouzet všechna, protože by okamžitě všechna krom jednoho musela být zase uspána
(vyhrát soutěž může nejvýše jedno).
`]},{section:3,name:"Souborové systémy",correct:[` Bloková zařízení
Tento typ zařízení představuje abstrakci perzistentních úložišť. Operace (abstraktního) blokového
zařízení jsou přizpůsobené běžným schopnostem odpovídajících reálných zařízení:
• zápis a čtení je prováděno po blocích pevné velikosti,
• v libovolném pořadí, ale
• s velkou latencí a malou propustností (relativně k operační paměti).`,`Trvalé úložiště
je fyzické zařízení, které se podobá na operační paměť (pamatuje si data),
s několika klíčovými rozdíly:
1. data zde uložená přetrvávají „dlouhodobě“, tedy zejména i po vypnutí počítače (nebo restartu
operačního systému),
2. přístup k datům je pomalejší – zejména má mnohem vyšší latenci (prodlevu) mezi vystavením požadavku
a odpovědí zařízení; je proto nepraktické adresovat takové zařízení po jednotlivých bajtech (jako
tomu je u operační paměti),
3. proto je obvyklé, že poskytují operace, které pracují s celými bloky dat najednou (velikost 512 bajtů
a víc, často 4 KiB) – základní operací je pak přesun takového bloku mezi zařízením a operační pamětí.`,`Latence
doba mezi požadavkem a odpovědí; příliš velká, než aby bylo lze ignorovat; rozdíl proti
operační paměti: nelze skrýt hardwarově, musí řešit OS; problém zejména pro spolehlivé uložení dat –
durability v ACID – nutné čekat na potvrzení zápisu`,` Mezipaměť
Hlavní problém, který mezipaměť řeší, je opakovaný přístup ke stejným adresám daného
datového úložiště. Přístup k datům obvykle není rovnoměrný – některá data jsou potřebná často (např.
aktivně využívaná databáze), zatímco jiná (archiv dat z minulého roku) jen velmi zřídka. Proto je výhodné
si nedávno čtená data pamatovat v rychlejší paměti: může se totiž lehce stát, že je bude potřeba přečíst
v blízké budoucnosti znovu.
Podobně má smysl některá data načíst do mezipaměti s předstihem (existuje-li volná přenosová kapacita;
této technice se angl. říká prefetch)`,`Vyrovnávací paměť
Existují dvě základní možnosti, jak vyrovnávací paměti realizovat:
1. oddělené od mezipaměti: vyrovnávací paměť obsahuje jak samotné požadavky, tak veškerá data s nimi
spojená; jsou-li některé dotčené bloky uložené v mezipaměti, tyto jsou buď zneplatněny, nebo (častěji)
upraveny na místě,
2. propojená s mezipamětí: vyrovnávací paměť obsahuje pouze frontu požadavků na zápis – samotné
datové bloky se ukládají vždy do mezipaměti, fronta nevyřízených zápisů do ní pouze odkazuje; takto
koncipovaný systém se, jako celek, chová jako mezipaměť s opožděným zápisem (angl. write-back
cache).`,` Plánování operací
U většiny úložišť platí, že sekvenční přístup (čtení po sobě následujících
adres) je mnohem rychlejší, než nahodilý přístup (postupné čtení adres, které spolu nijak nesouvisí).
Různé technologie navíc kladou další omezení na rychlost reakce – klasickým příkladem jsou rotační disky,
kde prodleva další operace závisí na vzdálenosti hlavy od místa, kde se potřebná data fyzicky nachází.
Naopak polovodičové paměti jsou často složené z nezávislých celků, které mohou pracovat souběžně, ale
požadavky do stejné části paměti musí vyčkat na dokončení těch předchozích.
Bez ohledu na technologii ukládání dat ale platí, že operace s trvalým úložištěm vykazují vysokou míru
souběžnosti: do systému přichází mnoho nezávislých požadavků na diskové operace a existuje tedy jistá
volnost odpovídat na tyto požadavky v různém pořadí. Je to způsobeno zejména tím, že je často spuštěno
několik (souběžných) vláken a každé z nich provádí vstupně-výstupní operace nezávisle na ostatních.`,`Přeuspořádání operací má určitá úskalí, zejména v případech, kdy jsou prohozeny zápisy, které náleží
stejné aplikaci, nebo se jedná o operace související s údržbou metadat souborového systému. Vzniká tak
napětí mezi výkonem (více přeuspořádání → vyšší propustnost) a spolehlivostí (více přeuspořádání →
větší šance nekonzistence v případě výpadku).
Pokud jde o operace čtení, zde je prostor pro přeuspořádání obvykle menší, protože aplikace, která čtení
vyžádala, obvykle nemůže pokračovat ve své činnosti dříve, než jsou data k dispozici (a tedy zejména
nemůže vyžádat další operace čtení).`,`Problémy virtualizace
Náš dosavadní přístup k virtualizaci nebude v případě trvalých úložišť
příliš dobře fungovat. Vzpomeňte si, že v případě paměti a procesoru řešení spočívalo ve vytvoření
soukromých (virtuálních) instancí příslušného zařízení. Taková instance je pak vždy ve výlučném užívání
jednoho programu.
Zde ale narážíme na to, že trvalé úložiště slouží především k ukládání uživatelsky zajímavých dat. Je
tedy potřebné, aby mohl uživatel s těmito daty nějak interagovat, a zejména tedy nemůžou být skryta
v soukromém prostoru jednoho programu.`,`Problémy virtualizace
dvě možnosti řešení:
1. můžeme zcela změnit přístup k virtualizaci: místo toho, abychom virtualizací vytvořili věrný obraz
skutečného zařízení, může operační systém poskytovat nějaký jiný druh abstrakce, a trvalé úložiště
nebude aplikacím vůbec přístupné,
2. vyčleníme nějakou aplikaci, která bude odpovědná za správu uživatelských dat v trvalém úložišti, a
ostatní aplikace budou své požadavky na interakci s těmito daty řešit skrze tuto speciální aplikaci.

Obě řešení jsou ve skutečnosti (s trochou nadsázky) vlastně totéž řešení. V obou případech je přímý
přístup k úložišti omezen na jeden nebo několik málo programů (v prvním případě je tento program
součástí operačního systému), tento program rozhoduje o tom, jak budou data „fyzicky“ organizovaná,
jaké operace lze nad daty provádět, které další programy k nim budou mít přístup, atp.`,`Metody virtualizace
1. souborový systém, nebo obecněji abstrakce na vyšší úrovni poskytovaná jako služba operačního systému,
která umožňuje řízený přístup k datům mnoha aplikacím současně, a zároveň umožňuje uživateli data
organizovat a spravovat,
2. virtualizace na aplikační úrovni, kdy je přímý přístup k úložišti poskytnut některé aplikaci, která
spravuje data a ostatním aplikacím poskytuje přístup pomocí vhodného aplikačního protokolu (typickým
příkladem jsou databázové systémy),`,`RAID
Zatímco standardním řešením problému s nízkou propustností a/nebo velkou prodlevou paměťových operací jsou mezipaměti,
standardním řešením problémů se spolehlivostí paměti je redundance.
Nejjednodušší formou redundance je pořízení kopie (zálohy) – v případě ztráty primárních dat obnovíme
data ze záložní kopie. S tím jsou spojeny dva problémy:
1. aby byla užitečná, musíme takovou kopii udržovat aktuální a zároveň konzistentní,
2. při poruše musíme vyměnit dotčené zařízení a data překopírovat ze zálohy, přitom obě operace mohou
být poměrně zdlouhavé.`,`Operace nad soubory
Základními operacemi pro práci se souborem je čtení (v POSIX-u voláním read) a zápis
(v POSIX-u write) souvislé posloupnosti bajtů (libovolné velikosti – abstrakce souboru skrývá blokový
charakter zařízení, na kterém je soubor uložen). Podobně může být libovolná velikost souboru (samozřejmě
ale musí soubor obsahovat celočíselný počet bajtů) – tuto velikost je navíc možné dynamicky měnit. Zápis
„za konec“ souboru jej automaticky prodlouží, zkrácení je nutné explicitně vyžádat (v POSIX-u voláním
ftruncate).`,`soubory jsou obvykle perzistentní
– existují dlouhodobě, nezávisle na běžících procesech, nebo dokonce na tom, je-li vůbec aktivní operační
systém (nebo samotný hardware). Abychom mohli s perzistentními soubory rozumně pracovat, musí být
navíc tyto opatřeny identitou.
Abychom mohli se souborem pracovat, ve většině systémů je nutné jej otevřít – v systémech POSIX
k tomu slouží volání open, kterého výsledkem je popisovač otevřeného souboru (angl. file descriptor)`,`Obyčejný soubor
je právě oním „motivačním případem“ – obyčejný soubor reprezentuje paměť, tzn.
jeho smyslem je uchovávat data (obyčejný soubor si tedy pamatuje posloupnost bajtů). Jaké konkrétní
bajty to jsou je irelevantní – souborový systém obsah obyčejných souborů nijak neinterpretuje.
Krom abstrakce (perzistentní – trvalé) paměti je obyčejný soubor také abstrakcí nad pevným úložištěm
v tom smyslu, že skrývá detaily přístupu k tomuto zařízení. Operace nad pevným úložištěm pracují po
jednotlivých blocích, přičemž bloky mají pevnou velikost a jejich počáteční adresa musí být dělitelná
touto velikostí – pro soubory žádné takové omezení neplatí. Zároveň je aplikace odstíněna od fyzického
umístění dat na pevném úložišti (funguje zde opět analogie s virtuálním adresním prostorem a překladem
virtuálních adres na fyzické). Analogie překladu adres je v tomto případě ale zcela v režii operačního
systému`,`Mapováni do paměti
Operace read a write nejsou vždy efektivní, protože musí mimo jiné kopírovat
data mezi mezipamětí a pamětí, která náleží žádajícímu procesu.
Efektivita aplikací, které data
především čtou, může být výrazně zlepšena mapováním souborů do paměti za pomoci líného načítání.
V tomto režimu jsou externí stránky uloženy v jinak běžném souboru, ale místo komplikovaných vstupněvýstupních
operací může program s obsahem souboru pracovat stejně, jako by byl uložen v operační paměti.
Využijeme-li tohoto mechanismu také k zápisu změněných stránek zpátky do souboru, může program soubor
i zcela transparentně upravovat.`,`Souběžný přístup
Jmenný prostor souborového systému (blíže jej popíšeme v další sekci) je
sdílený mezi všemi procesy, může se tedy lehce stát, že více procesů bude pracovat s jedním souborem.
Tato situace je analogická tomu, že stejná oblast operační paměti může být namapovaná ve více virtuálních
adresních prostorech. Jde-li o souběžný přístup pouze pro čtení, nevznikají žádné významnější problémy.
Vstoupí-li ale do hry zápisy, jak čtení tak jiné zápisy mohou způsobovat problémy – zejména různé
instance hazardu souběhu.
Aby se těmto problémům předešlo, operační systémy umožňují soubory zamykat čím je umožněno programům
k souboru přistupovat bezpečně – tzn. bez rizika poškození dat`,`Spustitelný soubor
Spustitelné soubory představují programy v klidu (tzn. ve stavu, kdy nejsou spuštěné) a obsahují veškeré
informace, které jsou potřeba k tomu, aby bylo možné v nich obsažený program spustit. Hlavní část
spustitelného souboru je tvořena počátečním obrazem paměti, podle kterého se při spuštění programu
(v POSIX-u voláním exec v již existujícím procesu) inicializuje virtuální adresní prostor`,`Roura
Roury se podobají na obyčejné soubory v tom, že je možné do nich zapisovat a číst z nich
data (bajty). Ve většině případů data jeden program (proces) zapisuje a jiný je čte – na rozdíl od
obyčejného souboru nejsou tato data nikde trvale uložena – z roury zmizí jakmile jsou přečtena.
S rourou je samozřejmě svázán buffer, ale je uložen pouze v operační paměti. Díky tomu lze do roury data
zapisovat i ve chvíli, kdy je právě druhá strana nečte – operační systém zapsaná data dočasně uchová.
Za normálních okolností je roura anonymní a přístupná pouze skrze popisovače otevřených souborů.`,`Tvrdé odkazy
Jasným důsledkem výše popsané organizace složek je existence tzv. tvrdých odkazů
– situace, kdy několik adresářových položek (v jedné nebo několika složkách) odkazuje tutéž entitu
(i-uzel). Všechny odkazy na tentýž soubor jsou zcela rovnocenné a z pohledu uživatele se pouze tentýž
soubor objevuje na různých místech adresářové struktury.
I-uzly si navíc udržují počítadlo odkazů – samotný soubor (i-uzel) je zničen pouze v případě, kdy toto
počítadlo dojde na nulu. To mimo jiné znamená, že odstraněním adresářové položky (angl. unlinking) může,
ale nemusí způsobit smazání souboru.`,`Měkké odkazy
Občas je užitečné odkazovat soubor nikoliv přímo, ale skrze nějakou cestu která
k němu vede. Toho lze dosáhnout tzv. měkkým odkazem: tento je (na rozdíl od tvrdého odkazu) skutečným
objektem v souborovém systému, který je reprezentován samostatným i-uzlem. Narazí-li při procházení
adresářové struktury (zejména při hledání i-uzlů podle cesty) operační systém přečte cestu obsaženou
v tomto měkkém odkazu a ve vyhledávání pokračuje touto cestou.`,`Bitmapa 
V souborových systémech se využívá několik velmi jednoduchých datových struktur, které
jsou díky své jednoduchosti zároveň relativně robustní. Asi nejjednodušší strukturou tohoto typu je
bitmapa, která se používá k mapování využitých resp. volných bloků nebo řádků v tabulkách (přiblížíme
si za chvíli).
Bitmapa udržuje informaci o lineárním sledu bloků a informace o jednotlivém bloku se omezuje na jediný
bit (obvykle právě ona využitost).`,`Tabulka
Bitmapa je sice jednoduchá a rychlá, neumí ale uchovat příliš mnoho zajímavých informací.
O něco málo složitější datovou strukturou je tabulka, která v podstatě odpovídá klasickému poli:
1. je to souvislá oblast fixně velkých struktur (řádků, položek), zvolených tak, aby se jich do jednoho
bloku vešel celočíselný počet (vyhovuje například velikost jednoho řádku 128 nebo 256 bajtů),
2. alokace položek se provede např. bitmapou (určuje které řádky jsou resp. nejsou použité, aby bylo
v případě potřeby možné rychle najít řádek, do kterého můžeme zapsat novou položku),
3. chceme-li se do takové tabulky odkázat (např. proto, že se jedná o tabulku záznamů o souborech),
stačí nám znát číslo řádku (index).`,`Konzistence
Důležitým problémem souborového systému je udržení konzistence metadat (jak
různých typů nebo složek metadat mezi sebou, tak se samotnými daty). Porušení konzistence může být
trojího typu:
1. narušení jednotlivé datové struktury, např.
∘ B-strom obsahuje uzel, který ve skutečnosti není platným uzlem, např. proto, že nový odkaz byl
zapsán dříve, než odkazovaný uzel,
2. konfliktní informace v různých datových strukturách, např.:
∘ bitmapa označuje řádek tabulky za volný, ale tento je zároveň vyplněn smysluplnými metadaty, nebo
∘ datový blok je označený jako volný (v bitmapě nebo B-stromě), ale zároveň je odkazován jako
součást nějakého souboru,
3. nesoulad mezi metadaty a datovými bloky – např.
∘ podle metadat je vlastníkem souboru uživatel B, ale odkazované datové bloky obsahují data uživatele
A`,`Existují dva hlavní důvody, proč by mohlo dojít  k porušení konzistence u datových struktur:
1. přerušením kritické operace, která provádí více souvisejících změn, např. výpadkem napájení, nebo
kritickou chybou („pádem“) celého systému,
2. i v případě, kdy je souborový systém vůči takovému přerušení robustní, tato jeho vlastnost může být
narušena přeuspořádáním zápisů (plánovačem nebo samotným zařízením).
Existuje několik metod, jak se s problémem vypořádat. Jednou je detekce problému (např. příznakem,
který se zapíše při korektním ukončení operačního systému) a následná křížová kontrola všech metadat
v situaci, kdy mohlo k poškození teoreticky dojít. Tato kontrola může a nemusí být schopna souborový
systém vrátit do konzistentního stavu (v závislosti na rozsahu resp. povaze poškození).`,`Žurnál
Oproti klasickým metadatům souborového systému má žurnál jednoduchou strukturu – záznamy jsou na
disku uloženy sekvenčně (obvykle „do kruhu“ – nový záznam přepíše nejstarší, už neplatný, záznam). Tato
struktura je velmi robustní, jak vůči nahodilému přerušení, tak proti typickým vzorům přeuspořádání.
Záznamy v žurnálu jsou obvykle seskupeny do transakcí (podobných těm, které znáte z relačních databázových systémů),
které mohou sestávat z několika provázaných operací. Změny v metadatech se začnou na
pevné úložiště posílat až ve chvíli, kdy je transakce ukončena a je potvrzen zápis příslušných položek
v žurnálu. Transakce, která není ukončená, se při obnově přeskočí, čím je zabezpečeno, že se ve výsledku
provede buď celá, nebo vůbec.`,`Žurnál
Přerušená operace na datové struktuře může vést k nejednoznačnému stavu, kdy lze datovou strukturu
opravit více než jedním způsobem. Žurnál tento problém řeší tím, že existuje záznam o tom, jaká operace
probíhala a tedy je možné ji na základě této informace dokončit. Zároveň není potřeba kontrolovat resp.
opravovat konzistenci všech datových struktur (to může ve velkém souborovém systému trvat dlouhou
dobu), ale pouze těch (resp. těch jejich částí), kterých se dotýkají operace zanesené v žurnálu.`,`Funkcionální metadata
inou možností jak předejít nekonzistenci je uspořádat metadata tak, že
použité datové struktury nebudeme na místě upravovat vůbec. Podobně jako ve funkcionálním programování
můžeme místo úpravy existující struktury vytvořit její novou verzi. Přitom využijeme toho, že nezměněné
části můžeme z nové verze odkázat – nemusíme tedy kopírovat celou datovou strukturu.
Takovému přístupu musí být ale příslušná datová struktura uzpůsobena – vhodné jsou zejména stromové
struktury (v souborových systémech tedy především B-stromy), kde změna v libovolném uzlu znamená
vytvoření nové verze tohoto uzlu a jeho předků (v předcích totiž nemůžeme upravit ukazatel na potomka
– to by narušilo princip neměnnosti staré verze), přitom ve vyváženém stromě je takových nejvýše
logaritmický počet. Všechny ostatní uzly ale zůstávají nezměněné.
`,`Prázdné místo
Jsme tedy konečně vyzbrojeni datovými strukturami vhodnými pro použití v souborovém systému a můžeme se blíže podívat na jejich konkrétní využití.
Prvním úkolem bude organizace volných bloků, do kterých lze uložit nově příchozí data (např. proto, že
uživatel vytvořil nový soubor, přidal data do existujícího, ale třeba i proto, že vytvořil novou složku).
Vyhledání vhodného datového bloku je častá operace, musí být proto efektivní – jak samotné nalezení,
tak poznačení informace o tom, že vybraný blok (resp. bloky) již nejsou volné.
`,`Externí a datová fragmentace
Ukládání strukturovaných dat do nestrukturovaného pole bajtů
vyžaduje vždy určité kompromisy. Jedním z nich je efektivita využití kapacity – ukládání dat více natěsno
většinou vede k pomalejším operacím a složitějším metadatům.
V případě souborů se musíme vypořádat jednak se situací, kdy se postupným vytvářením a mazáním souborů
prázdné místo rozptýlí mezi alokované bloky. Při vytváření nových souborů to znamená pracnější hledání
volných bloků, protože je nutné potřebné místo „slepit“ z několika nesouvislých oblastí (fragmentů).
Tím se jednak zvětšují potřebná metadata (průměrná délka spojitého rozsahu klesá) a zároveň dochází
k roztroušení – fragmentaci – samotných dat, která jsou do takto alokovaného souboru uložena. Přístup
k takovým souborům je pak méně efektivní, protože s každým skokem z jedné spojité oblasti do jiné je
spojena prodleva (daná povahou blokových zařízení).
`,`Obyčejné soubory 
Tradiční reprezentace obyčejného souboru na disku odkazuje každý datový
blok samostatně, pomocí krátké tabulky uvnitř i-uzlu (u větších souborů rozšířené pomocnými tabulkami
v tzv. nepřímých blocích). Běžným zlepšením je místo odkazu na jeden blok odkazovat celý spojitý rozsah
datových bloků (angl. extent). Hlavní nevýhodou tohoto přístupu je, že vyhledání bloku podle adresy
bajtu (offsetu) je v takto organizovaných metadatech lineární vzhledem k délce takové tabulky.`,`Vnitřní fragmentace
Vnitřní fragmentace je způsobena zarovnáním – některé operace jsou
mnohem efektivnější, když každý soubor začíná na hranici bloku, a tedy je pro něj alokován bloků
celočíselný počet. Protože mají ale soubory libovolnou velikost, často je na konci souboru nějaké
nevyužité místo. Toto nevyužité místo představuje režii – neobsahuje žádná užitečná data. Jinými slovy
je na většiny souborů malý fragment paměti který nelze využít (protože je menší než nejmenší možná
velikost souboru – jeden blok).`,`Adresáře
Existují tři základní možnosti, jak v souborovém systému reprezentovat složky:
1. Klasické → hledání podle jména a odstranění položky jsou lineární operace, vkládání je naopak
konstantní – takový přístup funguje dobře pro malé složky, ale protože souborový systém nemůže
obecně předvídat, kolik položek bude mít daný adresář, tato organizace se spíše nepoužívá.
2. Hašované → položky jsou uloženy v hašovací tabulce a jsou tedy „pravděpodobně“ konstantní – přesné
chování záleží na hašovací funkci a výběru jmen. Iterace vrací položky ve zdánlivě náhodném pořadí.
3. Stromové → položky jsou uloženy jako B-strom, jména položek jsou klíče – všechny operace jsou
zaručeně logaritmické a iterace vrací položky seřazené podle jména.
`],incorrect:[` Bloková zařízení
Tento typ zařízení představuje abstrakci perzistentních úložišť. Operace (abstraktního) blokového
zařízení jsou přizpůsobené běžným schopnostem odpovídajících reálných zařízení:
• zápis a čtení je prováděno po bajtech,
• v libovolném pořadí, ale
• s velkou latencí a malou propustností (relativně k operační paměti).`,`Trvalé úložiště
je fyzické zařízení, které se podobá na operační paměť (pamatuje si data),
s několika klíčovými rozdíly:
1. data zde uložená přetrvávají „krátkodobě“, tedy zejména po vypnutí počítače jsou odstraněna,
2. přístup k datům je pomalejší – zejména má mnohem vyšší latenci (prodlevu) mezi vystavením požadavku
a odpovědí zařízení; je proto nepraktické adresovat takové zařízení po jednotlivých bajtech (jako
tomu je u operační paměti),
3. proto je obvyklé, že poskytují operace, které pracují s celými bloky dat najednou (velikost 512 bajtů
a víc, často 4 KiB) – základní operací je pak přesun takového bloku mezi zařízením a operační pamětí.`,`Latence
doba mezi požadavkem a odpovědí; příliš velká, než aby bylo lze ignorovat; rozdíl proti
operační paměti: nelze skrýt softwarově, musí řešit HW`,` Mezipaměť
Hlavní problém, který mezipaměť řeší, je opakovaný přístup ke stejným adresám daného
datového úložiště. Přístup k datům obvykle není rovnoměrný – některá data jsou potřebná často (např.
aktivně využívaná databáze), zatímco jiná (archiv dat z minulého roku) jen velmi zřídka. Proto je výhodné
si nedávno čtená data úkládat v procesoru: může se totiž lehce stát, že je bude potřeba přečíst
v blízké budoucnosti znovu.
Podobně má smysl některá data načíst do mezipaměti s předstihem (existuje-li volná přenosová kapacita;
této technice se angl. říká prefetch)`,`Vyrovnávací paměť
Existují dvě základní možnosti, jak vyrovnávací paměti realizovat:
1. oddělené od mezipaměti: vyrovnávací paměť obsahuje jak samotné požadavky, tak veškerá data s nimi
spojená; jsou-li některé dotčené bloky uložené v mezipaměti, tyto jsou buď zneplatněny, nebo (častěji)
upraveny na místě,
2. propojená s mezipamětí: vyrovnávací paměť obsahuje pouze počítadlo požadavků na zápis – samotné
datové bloky se ukládají vždy do operační paměti.`,` Plánování operací
U většiny úložišť platí, že sekvenční přístup (čtení po sobě následujících
adres) je mnohem rychlejší, než nahodilý přístup (postupné čtení adres, které spolu nijak nesouvisí).
Různé technologie navíc kladou další omezení na rychlost reakce – klasickým příkladem jsoupolovodičové paměti,
kde prodleva další operace závisí na vzdálenosti hlavy od místa, kde se potřebná data fyzicky nachází.
Naopak rotační disky jsou často složené z nezávislých celků, které mohou pracovat souběžně, ale
požadavky do stejné části paměti musí vyčkat na dokončení těch předchozích.
Bez ohledu na technologii ukládání dat ale platí, že operace s trvalým úložištěm vykazují vysokou míru
souběžnosti: do systému přichází mnoho nezávislých požadavků na diskové operace a existuje tedy jistá
volnost odpovídat na tyto požadavky v různém pořadí. Je to způsobeno zejména tím, že je často spuštěno
několik (souběžných) vláken a každé z nich provádí vstupně-výstupní operace nezávisle na ostatních.`,`Přeuspořádání operací má určitá úskalí, zejména v případech, kdy jsou prohozeny zápisy, které náleží
stejné aplikaci, nebo se jedná o operace související s údržbou metadat souborového systému. Vzniká tak
napětí mezi výkonem (více přeuspořádání → vyšší propustnost) a spolehlivostí (více přeuspořádání →
větší šance nekonzistence v případě výpadku).
Pokud jde o operace čtení, zde je prostor pro přeuspořádání obvykle větší, protože aplikace, která čtení
vyžádala, obvykle může pokračovat ve své činnosti i když nejsou data k dispozici.`,`Problémy virtualizace
Náš dosavadní přístup k virtualizaci bude v případě trvalých úložišť fungovat.
Vzpomeňte si, že v případě paměti a procesoru řešení spočívalo ve vytvoření
soukromých (virtuálních) instancí příslušného zařízení. Taková instance je pak vždy ve výlučném užívání
jednoho programu.
Trvalé úložiště slouží především k ukládání uživatelsky zajímavých dat. Je
tedy nežádoučí, aby mohl uživatel s těmito daty nějak interagovat, a zejména tedy musí být skryta
v soukromém prostoru jednoho programu.`,`Problémy virtualizace
dvě možnosti řešení:
1. můžeme zcela změnit přístup k virtualizaci: místo toho, abychom virtualizací vytvořili věrný obraz
skutečného zařízení, může operační systém poskytovat nějaký jiný druh abstrakce, a trvalé úložiště
nebude aplikacím vůbec přístupné,
2. vyčleníme nějakou aplikaci, která bude odpovědná za správu uživatelských dat v trvalém úložišti, a
ostatní aplikace budou své požadavky na interakci s těmito daty řešit skrze tuto speciální aplikaci.

Obě řešení jsou ve skutečnosti (s trochou nadsázky) vlastně totéž řešení. V obou případech je přímý
přístup k úložišti omezen na procesorové jádro, to rozhoduje o tom, jak budou data „fyzicky“ organizovaná a
jaké další operace lze nad daty provádět.`,`Metody virtualizace
1. souborový systém, nebo obecněji abstrakce na vyšší úrovni poskytovaná jako služba operačního systému,
která umožňuje řízený přístup k datům mnoha aplikacím současně, a zároveň umožňuje uživateli data
organizovat a spravovat,
2. virtualizace na aplikační úrovni, kdy je přímý přístup k úložišti řízen procesorem, který
spravuje data a ostatním částem OS poskytuje přístup pomocí vhodného mapování adres.`,`RAID
Zatímco standardním řešením problému s nízkou propustností a/nebo velkou prodlevou paměťových operací jsou vyrovnávací paměti,
standardním řešením problémů se spolehlivostí paměti je redundance.
Nejjednodušší formou redundance je pořízení kopie (zálohy) – v případě ztráty primárních dat obnovíme
data ze záložní kopie. S tím jsou spojeny dva problémy:
1. aby byla užitečná, musíme takovou kopii udržovat aktuální ale nemusí být konzistentní,
2. při poruše musíme vyměnit dotčené zařízení a data překopírovat ze zálohy, přitom obě operace mohou
být poměrně zdlouhavé.`,`Operace nad soubory
Základními operacemi pro práci se souborem je čtení (v POSIX-u voláním read) a zápis
(v POSIX-u write) souvislé posloupnosti bajtů (libovolné velikosti – abstrakce souboru skrývá blokový
charakter zařízení, na kterém je soubor uložen). Velikost souboru je ale pevně daná a to velikostí bitmapy.`,`soubory jsou obvykle perzistentní
– existují dlouhodobě, jsou závislé na běžících procesech, ale nezávisí na tom, je-li vůbec aktivní operační
systém (nebo samotný hardware). Abychom mohli s perzistentními soubory rozumně pracovat, musí být
navíc tyto opatřeny identitou.
Abychom mohli se souborem pracovat, ve většině systémů je nutné jej otevřít – v systémech POSIX
k tomu slouží volání open, kterého výsledkem je popisovač otevřeného souboru (angl. file descriptor)`,`Obyčejný soubor
je právě oním „motivačním případem“ – obyčejný soubor reprezentuje paměť, tzn.
jeho smyslem je uchovávat data (obyčejný soubor si tedy pamatuje posloupnost bajtů). Jaké konkrétní
bajty to jsou je irelevantní – souborový systém obsah obyčejných souborů nijak neinterpretuje.
Krom abstrakce (perzistentní – trvalé) paměti je obyčejný soubor také abstrakcí nad pevným úložištěm
v tom smyslu, že skrývá detaily přístupu k tomuto zařízení. Operace nad pevným úložištěm pracují po
jednotlivých blocích, přičemž bloky mají pevnou velikost a jejich počáteční adresa musí být dělitelná
touto velikostí – pro soubory platí stejná omezení. Zároveň je aplikace odstíněna od fyzického
umístění dat na pevném úložišti (funguje zde opět analogie s virtuálním adresním prostorem a překladem
virtuálních adres na fyzické). Analogie překladu adres je v tomto případě ale zcela v režii operačního
systému`,`Mapováni do paměti
Operace read a write jsou vždy efektivní, protože nemusí kopírovat
data mezi mezipamětí a pamětí, která náleží žádajícímu procesu.
Efektivita aplikací, které data
především čtou, může být výrazně zlepšena mapováním souborů do paměti za pomoci líného načítání.
V tomto režimu jsou externí stránky uloženy v jinak běžném souboru, ale místo komplikovaných vstupněvýstupních
operací může program s obsahem souboru pracovat stejně, jako by byl uložen v operační paměti.
Využijeme-li tohoto mechanismu také k zápisu změněných stránek zpátky do souboru, může program soubor
i zcela transparentně upravovat.`,`Souběžný přístup
Jmenný prostor souborového systému (blíže jej popíšeme v další sekci) je
sdílený mezi všemi procesy, může se tedy lehce stát, že více procesů bude pracovat s jedním souborem.
Tato situace je analogická tomu, že stejná oblast operační paměti může být namapovaná ve více virtuálních
adresních prostorech. Jde-li o souběžný přístup pouze pro čtení, nevznikají žádné významnější problémy.
Vstoupí-li ale do hry zápisy, jak čtení tak jiné zápisy mohou způsobovat problémy – zejména různé
instance hazardu souběhu.
Operační systémy neumožňují soubory zamykat proto musí být tento problém řešen jinak`,`Spustitelný soubor
Spustitelné soubory představují jak programy v klidu tak i ty spuštěné a obsahují veškeré
informace, které jsou potřeba k tomu, aby bylo možné v nich obsažený program probíhat. Hlavní část
spustitelného souboru je tvořena počátečním obrazem paměti, podle kterého se při spuštění programu
(v POSIX-u voláním exec v již existujícím procesu) inicializuje virtuální adresní prostor`,`Roura
Roury se podobají na obyčejné soubory v tom, že je možné do nich zapisovat a číst z nich
data (bajty). Ve většině případů data jeden program (proces) zapisuje a jiný je čte – na rozdíl od
obyčejného souboru nejsou tato data nikde trvale uložena – z roury zmizí po čase určeném speciálním registrem.
S rourou je samozřejmě svázán buffer, ale je uložen pouze v operační paměti. Díky tomu lze do roury data
zapisovat i ve chvíli, kdy je právě druhá strana nečte – operační systém zapsaná data dočasně uchová.
Za normálních okolností je roura anonymní a přístupná pouze skrze popisovače otevřených souborů.`,`Tvrdé odkazy
Jasným důsledkem výše popsané organizace složek je existence tzv. tvrdých odkazů
– situace, kdy několik adresářových položek (v jedné nebo několika složkách) odkazuje tutéž entitu
(i-uzel). Existuje jeden hlavní a poté libovolný počet jiných odkazu, ale z pohledu uživatele se pouze tentýž
soubor objevuje na různých místech adresářové struktury.
I-uzly si navíc udržují počítadlo odkazů – samotný soubor (i-uzel) je zničen pouze v případě, kdy toto
počítadlo dojde na nulu. To mimo jiné znamená, že odstraněním adresářové položky (angl. unlinking) může,
ale nemusí způsobit smazání souboru.`,`Měkké odkazy
Občas je užitečné odkazovat soubor nikoliv přímo, ale skrze nějakou cestu která
k němu vede. Toho lze dosáhnout tzv. měkkým odkazem: tento je (na rozdíl od tvrdého odkazu) skutečným
objektem v souborovém systému, který ale není reprezentován i-uzlem. Narazí-li při procházení
adresářové struktury (zejména při hledání souborů podle cesty) operační systém přečte cestu obsaženou
v tomto měkkém odkazu a ve vyhledávání pokračuje touto cestou.`,`Bitmapa 
V souborových systémech se využívá několik velmi jednoduchých datových struktur, které
jsou díky své jednoduchosti zároveň relativně robustní. Asi nejjednodušší strukturou tohoto typu je
bitmapa, která se používá k mapování využitých resp. volných bloků nebo řádků v tabulkách (přiblížíme
si za chvíli).
Bitmapa udržuje informaci o lineárním sledu bloků a informace o jednotlivém bloku se omezuje na jediný
bajt.`,`Tabulka
Bitmapa je sice jednoduchá a rychlá, neumí ale uchovat příliš mnoho zajímavých informací.
O něco málo složitější datovou strukturou je tabulka, která v podstatě odpovídá klasickému poli:
1. je to souvislá oblast fixně velkých struktur (řádků, položek), libovolné velikosti.
2. alokace položek se provede např. bitmapou (určuje které řádky jsou resp. nejsou použité, aby bylo
v případě potřeby možné rychle najít řádek, do kterého můžeme zapsat novou položku),
3. chceme-li se do takové tabulky odkázat (např. proto, že se jedná o tabulku záznamů o souborech),
stačí nám znát číslo řádku (index).`,`Konzistence
Důležitým problémem souborového systému je udržení konzistence metadat (jak
různých typů nebo složek metadat mezi sebou, tak se samotnými daty). K porušení konzistence nemůže dojít.`,`Existují dva hlavní důvody, proč by mohlo dojít  k porušení konzistence u datových struktur:
1. přerušením kritické operace, která provádí více souvisejících změn, např. výpadkem napájení, nebo
kritickou chybou („pádem“) celého systému,
2. i v případě, kdy je souborový systém vůči takovému přerušení robustní, tato jeho vlastnost může být
narušena přeuspořádáním zápisů (plánovačem nebo samotným zařízením).
Existuje několik metod, jak se s problémem vypořádat. Jednou je detekce problému (např. příznakem,
který se zapíše při korektním ukončení operačního systému) a následná křížová kontrola všech metadat
v situaci, kdy mohlo k poškození teoreticky dojít. Tato kontrola je vždy schopna souborový
systém vrátit do konzistentního stavu.`,`Žurnál
Oproti klasickým metadatům souborového systému má žurnál jednoduchou strukturu – záznamy jsou na
disku uloženy sekvenčně (obvykle „do kruhu“ – nový záznam přepíše nejstarší, už neplatný, záznam). Tato
struktura je velmi robustní, jak vůči nahodilému přerušení, tak proti typickým vzorům přeuspořádání.
Záznamy v žurnálu jsou obvykle seskupeny do transakcí (podobných těm, které znáte z relačních databázových systémů),
které mohou sestávat z několika provázaných operací. Změny v metadatech se začnou na
pevné úložiště posílat hned jak je transakce zahájena. Transakce, která není ukončená,
se při obnově přeskočí, čím je zabezpečeno, že se ve výsledku provede buď celá, nebo vůbec.`,`Žurnál
Přerušená operace na datové struktuře může vést k nejednoznačnému stavu, kdy lze datovou strukturu
opravit více než jedním způsobem. Žurnál tento problém řeší tím, že existuje záznam o tom, jaká operace
probíhala a tedy je možné ji na základě této informace dokončit. Je ale nutné kontrolovat resp.
opravovat konzistenci všech datových struktur (to může ve velkém souborovém systému trvat dlouhou
dobu), toto není nutné pouze u těch (resp. těch jejich částí), kterých se dotýkají operace zanesené v žurnálu.`,`Funkcionální metadata
inou možností jak předejít nekonzistenci je uspořádat metadata tak, že
použité datové struktury nebudeme na místě upravovat vůbec. Podobně jako ve funkcionálním programování
můžeme místo úpravy existující struktury vytvořit její novou verzi. Přitom využijeme toho, že nezměněné
části můžeme z nové verze odkázat – nemusíme tedy kopírovat celou datovou strukturu.
Takovému přístupu musí být ale příslušná datová struktura uzpůsobena – vhodné jsou zejména tabulky nikoliv stromové struktury, kde změna v libovolném uzlu znamená
vytvoření nové verze tohoto uzlu a jeho předků.
`,`Prázdné místo
Jsme tedy konečně vyzbrojeni datovými strukturami vhodnými pro použití v souborovém systému a můžeme se blíže podívat na jejich konkrétní využití.
Prvním úkolem bude organizace volných bloků, do kterých lze uložit nově příchozí data (např. proto, že
uživatel vytvořil nový soubor, přidal data do existujícího, ale třeba i proto, že vytvořil novou složku).
Vyhledání vhodného datového bloku je častá operace, musí být proto efektivní platí hlavně pro nalezení takového bloku.
Poznačení informace o tom, že vybraný blok (resp. bloky) již nejsou volné nejsou prováděny často, tedy efektivní být nemusí.
`,`Externí a datová fragmentace
Ukládání strukturovaných dat do nestrukturovaného pole bajtů
vyžaduje vždy určité kompromisy. Jedním z nich je efektivita využití kapacity – ukládání dat více natěsno
většinou vede k pomalejším operacím a složitějším metadatům.
V případě souborů se musíme vypořádat jednak se situací, kdy se postupným vytvářením a mazáním souborů
prázdné místo rozptýlí mezi alokované bloky. Při vytváření nových souborů to znamená pracnější hledání
volných bloků, protože je nutné potřebné místo „slepit“ z několika nesouvislých oblastí (fragmentů).
Tím se jednak zvětšují potřebná metadata (průměrná délka spojitého rozsahu klesá) a zároveň dochází
k roztroušení – fragmentaci – samotných dat, která jsou do takto alokovaného souboru uložena. Přístup
k takovým souborům je asymptoticky stejně efektivní, protože takovýto přístup je realizovaný přes tvrdé odkazy.
`,`Obyčejné soubory 
Tradiční reprezentace obyčejného souboru na disku odkazuje každý datový
blok samostatně, pomocí krátké tabulky uvnitř i-uzlu (u větších souborů rozšířené pomocnými tabulkami
v tzv. nepřímých blocích). Běžným zlepšením je místo odkazu na jeden blok odkazovat celý spojitý rozsah
datových bloků (angl. extent). Tímto zajistíme že vyhledání bloku podle adresy
bajtu (offsetu) je v takto organizovaných metadatech konstantí.`,`Vnitřní fragmentace
Vnitřní fragmentace je způsobena zarovnáním – některé operace jsou
mnohem efektivnější, když každý soubor začíná na hranici bloku, a tedy je pro něj alokován bloků
celočíselný počet. Protože mají ale soubory libovolnou velikost, často je na konci souboru nějaké
nevyužité místo. Toto nevyužité místo lze spojit pomocí vnější fragmentace v blok, který již využitelný bude.`,`Adresáře
Existují tři základní možnosti, jak v souborovém systému reprezentovat složky:
1. Klasické → hledání podle jména a odstranění položky jsou lineární operace, vkládání je naopak
konstantní – takový přístup funguje dobře pro malé složky, a proto je i nejčastěji používaný.
2. Hašované → položky jsou uloženy v hašovací tabulce a jsou tedy „pravděpodobně“ konstantní – přesné
chování záleží na hašovací funkci a výběru jmen. Iterace vrací položky ve zdánlivě náhodném pořadí.
3. Stromové → položky jsou uloženy jako B-strom, jména položek jsou klíče – všechny operace jsou
zaručeně logaritmické, ale nelze je vracet jako seřazené.
`]},{section:4,name:"Virtualizate periférií",correct:[`Periferie
Zařízení, které produkuje a konzumuje data, případně události. Komunikace
v malém objemu se obvykle realizuje mapováním registrů zařízení na fyzické adresy. Pozor, je zde
důležitý rozdíl proti operační paměti: hodnoty se „samovolně“ (bez účasti hlavního procesoru, a tedy i
operačního systému) mění v čase – takovou změnu lze považovat za událost.`,`Programovaný vstup/výstup (PIO)
Nejjednodušší metodou komunikace se zařízením je přenos dat
postupným čtením z paměti (registrů) zařízení (již zmiňovaným mapováním paměti zařízení na fyzické
adresy procesoru). Je-li tato činnost prováděna hlavním procesorem, mluvíme o tzv. „programovaném“
vstupu resp. výstupu (angl. programmed IO, PIO).
Tento způsob komunikace tedy vyžaduje aktivní účast procesoru v stanovených časových intervalech
(podle přenosové rychlosti, velikosti vyrovnávací paměti, atp.). Tato metoda je použitelná pro občasné
přenosy a/nebo přenosy s velmi malou šířkou pásma (počtem bajtů přenesených za sekundu). Při větších
objemech dat vede tento způsob komunikace k příliš vysoké režii.`,` Přímý přístup do paměti (DMA)
Zdaleka nejčastějším cílem přenosu dat z periferie je jejich uložení do operační paměti – další
zpracování zpravidla musí vyčkat do doby, než je v operační paměti nějaký kompletní celek (blok, rámec,
atp.).
Asynchronní přenos dat (bez účasti procesoru, resp. bez účasti softwaru) může být realizován dvěma
základními metodami:
1. dedikovaným pomocným procesorem, který od hlavního procesoru přijímá pokyny na provedení přenosu
(z jaké periferie, na jakou adresu v operační paměti, kolik bajtů, případně opačně, z jaké adresy
v operační paměti a jaké periferii), a který je de-facto součástí sběrnice,
2. přenos je řízen přímo periferií (na základě podobného pokynu od hlavního procesoru).
Výhodou první metody je, že periferie nemusí nijak rozlišovat DMA a PIO režimy přenosu dat a může být
tedy jednodušší. Druhá metoda je obvykle efektivnější a v moderních systémech mnohem běžnější.
`,` Je důležité rozlišovat přímý přístup do paměti (komunikuje periferie a operační paměť, bez účasti
procesoru) a mapování paměti zařízení do fyzického adresního prostoru (komunikuje procesor s periferií,
bez účasti operační paměti).`,`IO-MMU
Přestože pro zařízení, které přenáší velké objemy dat (pevná úložiště, síťová rozhraní,
atp.), je DMA nepostradatelné, jsou s ním spojeny určitá bezpečnostní rizika. V klasické implementaci
DMA má totiž každá periferie neomezený přístup do fyzické paměti – operační systém sice dává periferii
pokyn, které fyzické adresy má použít, ale nemá jak vynutit, aby periferie takový pokyn dodržela.
V takovém systému tedy periferiím tedy nic tedy nebrání v tom libovolně upravovat obsah paměti –
například i přepsat kód jádra a získat tak plnou kontrolu nad systémem. Toto se týká nejen případných
podvratných periferií, ale i ovladačů, které mohou jinak nevinnou periferii naprogramovat tak, aby
narušila bezpečnost systému.
Toto je jistě nežádoucí, zejména chceme-li izolovat ovladače od zbytku jádra, nebo v případech, kdy
samotná periferie není nutně důvěryhodná. IO-MMU je zařízení, které tento problém řeší, a to tím, že
realizuje překlad adres pro periferie (podobně jako MMU realizuje překlad adres pro software). IO-MMU
je programovatelná operačním systémem (a pouze operačním systémem) a umožňuje tedy izolovat periferie
jak vzájemně, tak od operačního systému a softwaru obecně. Je-li IO-MMU správně naprogramovaná, je
DMA bezpečné.`,`Sběrnice 
Má dvě základní vrstvy:
1. fyzickou, která odpovídá za signalizaci a časování a
2. logickou (protokolovou), která popisuje chování zařízení na sběrnici na vyšší úrovni – adresaci,
konfiguraci zařízení, přenosy dat atp.
Sběrnic existuje v počítači celá řada a jsou vzájemně propojené. Ta strana sběrnice, která je blíže
hlavnímu procesoru, se obvykle nazývá hostitelská.`,`Sběrnice
Hlavním úkolem sběrnice je přenos dat (a s tím související adresace) a signalizace událostí, vedlejším
pak konfigurace a enumerace připojených periferií. Má-li řadič sběrnice přidělen rozsah fyzických adres,
je také jeho úkolem tento dále rozdělit mezi připojené periferie (včetně podružných řadičů dalších
sběrnic).`,`Ovladač
Jakmile je známý konkrétní typ zařízení, komunikaci s ním převezme ovladač – program,
který poskytuje softwarovou abstrakci dané třídy zařízení zbytku operačního systému (a nepřímo i
aplikacím).
Na jedné straně komunikuje ovladač se zbytkem operačního systému (pomocí vhodného rozhraní, které je
ale obvykle specifické pro daný operační systém), na straně druhé komunikuje s konkrétním fyzickým
zařízením (které je zase často specifické pro daný model, nebo alespoň modelovou řadu).
Připomínáme zde, že komunikace probíhá čtením a zápisem dat, a zpracování takových dat není nic jiného
než výpočet`,`Ovladač
Hlavním úkolem ovladače je:
1. zpracování příchozích dat do formy, která je přijatelná pro zbytek systému (tzn. do formy nezávislé
na konkrétním modelu zařízení),
2. převod dat příchozích ze systému (které jsou ve formě nezávislé na konkrétním zařízení) do formy,
kterou umí daná periferie zpracovat,
3. to vše v reakci na události – buď požadavky ze systému na periferii, nebo naopak.
Data v tomto případě nemusí být pouze užitná data (bloky uložené na disku, rámce přijímané nebo odesílané
síťovým rozhraním, atp.), ale také řídící data, která ovlivňují jak se bude zařízení chovat, nebo přímo
aktivují další funkce zařízení (jiné, než je samotný přenos užitných dat).`,`Tiskárny
1. virtualizace – jak tiskárnu sdílet mezi programy – tento problém je analogický k problému plánováni
úloh v dávkových systémech, a má i analogické řešení: frontu úloh ke zpracování,
2. abstrakce – jak zahladit rozdíly mezi jednotlivými tiskárnami tak, aby byly z pohledu programu podle
možnosti záměnné.
Řešení druhého bodu je trochu složitější, a některé aspekty tiskáren nelze úplně v aplikacích ignorovat
(černobílý vs barevný tisk, jednostranný vs oboustranný, atp.). Částečným řešením je použití společného
formátu pro popis dokumentů k tisku, přičemž operační systém již zařídí konverzi do formátu, který
tiskárna akceptuje. Starším standardem tohoto typu je PostScript, novějším PDF. Některé tiskárny
podporují tisk dokumentů v těchto formátech přímo, bez potřeby dalšího zpracování v operačním systému.
Z pohledu aplikace může mít tedy virtuální tiskárna jako svou hlavní operaci vložení dokumentu ve formátu
PDF do tiskové fronty`,`Síťové vrstvy
1. fyzická – záležitost hardwaru, má ale dopad na vyšší vrstvy,
2. linková – tvoří faktické rozhraní mezi hardwarem a softwarem (operačním systémem),
3. síťová – na koncových stanicích řeší převážně software (operační systém), jejím úkolem je zabezpečit
komunikaci mezi koncovými uzly (resp. mezi operačními systémy na nich provozovanými),
4. transportní doručuje data mezi aplikacemi: tvoří rozhraní mezi operačním systémem a aplikací, a je
tak přirozeným místem pro virtualizaci,
5. a vyšší: záležitost aplikací, staví na virtualizaci poskytované 4. vrstvou.`,`Odchozí fronta
Potřebuje-li operační systém odeslat paket (rámec) do sítě, přidá je na konec
tzv. odchozí fronty (angl. transmit queue, Tx queue). Z této fronty je vyzvedne hardware a jakmile je
to možné, provede fyzický přenos. Odchozí fronta funguje přibližně takto:
1. každá odchozí fronta (může jich existovat několik) má přiřazenu dvojici registrů mapovaných do
fyzického adresního prostoru: jeden reprezentuje hlavový ukazatel a ten druhý koncový (angl. head a
tail),
2. tyto ukazatele popisují kruhovou frontu pevné velikosti, uloženu v operační paměti, ke které síťové
rozhraní přistupuje za pomoci DMA; každá položka (buňka) této kruhové fronty reprezentuje jeden
rámec,
3. ukazatele dělí frontu na dvě části – jedna patří rozhraní a jedna operačnímu systému,
4. operační systém (resp. ovladač síťového rozhraní) upravuje koncový ukazatel:
a. pro odeslání rámce pro něj operační systém nejprve vyhradí paměť a uloží do ni obsah rámce (data),
b. zapíše příslušnou adresu a velikost do své části kruhové fronty,
c. posune koncový ukazatel, čím předá odpovědnost za nově vyplněné buňky síťovému rozhraní,
5. síťové rozhraní ovládá hlavový ukazatel: kdykoliv zpracuje odchozí rámec, posune hlavový ukazatel
tak, že paměť asociovaná s odeslaným rámcem se přesune do části fronty, která patří operačnímu
systému.
Události, které se zpracováním kruhové fronty souvisí, signalizuje síťové rozhraní pomocí přerušení`,`Příjmová fronta
Síťové rozhraní popřidání prvků tuto změnu signalizuje přerušením. Alokace paměti pro rámce je v kompetenci operačního
systému – přesune-li operační systém nějakou položku (buňku) do části kruhové fronty, která náleží
síťovému rozhraní, dává tím najevo, že paměť touto položkou odkázaná může být přepsána novými daty.
Jakmile tak síťové rozhraní učiní, příslušnou buňku příjmové fronty přesune do části patřící operačnímu
systému.
Je obvyklé, že každý blok paměti, který operační systém rozhraní předá, má velikost největšího možného
rámce (MTU z angl. maximal transfer unit, obvykle 1500 bajtů), i když některá rozhraní umí příchozí
rámce rozdělit do více buněk, je-li to potřeba.`],incorrect:[`Periferie
Zařízení, které produkuje a konzumuje data, případně události. Komunikace
v malém objemu se obvykle realizuje mapováním registrů zařízení na fyzické adresy. Pozor, je zde
důležitý rozdíl proti operační paměti: hodnoty se s vzájemnou účastí procesoru a
operačního systém mění v čase – takovou změnu lze považovat za událost.`,`Programovaný vstup/výstup (PIO)
Nejjednodušší metodou komunikace se zařízením je přenos dat
postupným čtením z paměti (registrů) zařízení (již zmiňovaným mapováním paměti zařízení na fyzické
adresy procesoru). Je-li tato činnost prováděna hlavním procesorem, mluvíme o tzv. „programovaném“
vstupu resp. výstupu (angl. programmed IO, PIO).
Tento způsob komunikace tedy nevyžaduje aktivní účast procesoru. Tato metoda je použitelná pro občasné
přenosy a/nebo přenosy s velmi malou šířkou pásma (počtem bajtů přenesených za sekundu). Při větších
objemech dat vede tento způsob komunikace k příliš vysoké režii.`,` Přímý přístup do paměti (DMA)
Zdaleka nejčastějším cílem přenosu dat z periferie je jejich uložení do operační paměti – další
zpracování zpravidla musí vyčkat do doby, než je v operační paměti nějaký kompletní celek (blok, rámec,
atp.).
Asynchronní přenos dat (bez účasti procesoru, resp. bez účasti softwaru) může být realizován dvěma
základními metodami:
1.  přenos je řízen přímo periferií (na základě podobného pokynu od hlavního procesoru).
2. dedikovaným pomocným procesorem, který od hlavního procesoru přijímá pokyny na provedení přenosu
(z jaké periferie, na jakou adresu v operační paměti, kolik bajtů, případně opačně, z jaké adresy
v operační paměti a jaké periferii), a který je de-facto součástí sběrnice
Výhodou první metody je, že periferie nemusí nijak rozlišovat DMA a PIO režimy přenosu dat a může být
tedy jednodušší. Druhá metoda je obvykle efektivnější a v moderních systémech mnohem běžnější.
`,` Je důležité rozlišovat přímý přístup do paměti (komunikuje periferie a operační paměť, bez účasti
procesoru) a mapování paměti zařízení do fyzického adresního prostoru (komunikuje procesor s periferií za pomocí operační paměti).`,`IO-MMU
Přestože pro zařízení, které přenáší velké objemy dat (pevná úložiště, síťová rozhraní,
atp.), je DMA nepostradatelné, jsou s ním spojeny určitá bezpečnostní rizika. V klasické implementaci
DMA má totiž každá periferie neomezený přístup do fyzické paměti – operační systém sice dává periferii
pokyn, které fyzické adresy má použít, ale nemá jak vynutit, aby periferie takový pokyn dodržela.
V takovém systému tedy periferiím tedy nic tedy nebrání v tom libovolně upravovat obsah paměti –
například i přepsat kód jádra a získat tak plnou kontrolu nad systémem. Toto se týká nejen případných
podvratných periferií, ale i ovladačů, které mohou jinak nevinnou periferii naprogramovat tak, aby
narušila bezpečnost systému.
Toto je jistě nežádoucí, zejména chceme-li izolovat ovladače od zbytku jádra, nebo v případech, kdy
samotná periferie není nutně důvěryhodná. IO-MMU je zařízení, které tento problém řeší, a to tím, že
realizuje překlad adres pro periferie (podobně jako MMU realizuje překlad adres pro software). IO-MMU
není programovatelná za normálních podmínek, pouze při konstrukci zařízení`,`Sběrnice 
Má dvě základní vrstvy:
1. fyzickou, která odpovídá za enumeraci
2. logickou (protokolovou), která popisuje chování zařízení na sběrnici na vyšší úrovni – adresaci,
konfiguraci zařízení, přenosy dat atp.
Sběrnic existuje v počítači celá řada a jsou vzájemně propojené. Ta strana sběrnice, která je blíže
hlavnímu procesoru, se obvykle nazývá hostitelská.`,`Sběrnice
Hlavním úkolem sběrnice je přenos dat (a s tím související adresace) a signalizace událostí, vedlejším
pak konfigurace a enumerace připojených periferií. Má-li řadič sběrnice přidělen rozsah fyzických adres,
je také jeho úkolem tuto informaci sdělit procesoru.`,`Ovladač
Jakmile je známý konkrétní typ zařízení, komunikaci s ním převezme ovladač – program,
který převezme kontrolu nad jádrem a následně spustí komunikaci s operačním systémem
Na jedné straně komunikuje ovladač se zbytkem operačního systému (pomocí vhodného rozhraní, které je
ale obvykle specifické pro daný operační systém), na straně druhé komunikuje s konkrétním fyzickým
zařízením (které je zase často specifické pro daný model, nebo alespoň modelovou řadu).
Připomínáme zde, že komunikace probíhá čtením a zápisem dat, a zpracování takových dat není nic jiného
než výpočet`,`Ovladač
Hlavním úkolem ovladače je:
1. zpracování příchozích dat do formy, kterou může předat sběrnici a ta data přeložit.
kterou umí daná periferie zpracovat.
2. převod dat příchozích ze systému (které jsou ve formě nezávislé na konkrétním zařízení) do formy,
kterou umí daná periferie zpracovat,
3. to vše v reakci na události – buď požadavky ze systému na periferii, nebo naopak.
Data v tomto případě nemusí být pouze užitná data (bloky uložené na disku, rámce přijímané nebo odesílané
síťovým rozhraním, atp.), ale také řídící data, která ovlivňují jak se bude zařízení chovat, nebo přímo
aktivují další funkce zařízení (jiné, než je samotný přenos užitných dat).`,`Tiskárny
1. virtualizace – jak tiskárnu sdílet mezi programy – tento problém je analogický k problému plánováni
úloh v dávkových systémech, a má i analogické řešení: frontu úloh ke zpracování,
2. abstrakce – jak zahladit rozdíly mezi jednotlivými tiskárnami tak, aby byly z pohledu programu podle
možnosti záměnné.
Řešení druhého bodu je trochu složitější, a některé aspekty tiskáren nelze úplně v aplikacích ignorovat
(černobílý vs barevný tisk, jednostranný vs oboustranný, atp.). Částečným řešením je použití společného
formátu pro popis dokumentů k tisku, přičemž operační systém již zařídí konverzi do formátu, který
tiskárna akceptuje. Starším standardem tohoto typu je PostScript, novějším NewScript. Některé tiskárny
podporují tisk dokumentů v těchto formátech přímo, bez potřeby dalšího zpracování v operačním systému.
Z pohledu aplikace může mít tedy virtuální tiskárna jako svou hlavní operaci vložení dokumentu ve formátu
NewScript do tiskové fronty`,`Síťové vrstvy
1. fyzická – záležitost hardwaru, má ale dopad na vyšší vrstvy
2. síťová – na koncových stanicích řeší převážně software (operační systém), jejím úkolem je zabezpečit
komunikaci mezi koncovými uzly (resp. mezi operačními systémy na nich provozovanými)
3. , linková – tvoří faktické rozhraní mezi hardwarem a softwarem (operačním systémem)
4. transportní doručuje data mezi aplikacemi: tvoří rozhraní mezi operačním systémem a aplikací, a je
tak přirozeným místem pro virtualizaci
5. a vyšší: záležitost aplikací, staví na virtualizaci poskytované 4. vrstvou.`,`Odchozí fronta
Potřebuje-li operační systém odeslat paket (rámec) do sítě, přidá je na konec
tzv. odchozí fronty (angl. transmit queue, Tx queue). Z této fronty je vyzvedne hardware a jakmile je
to možné, provede fyzický přenos. Odchozí fronta funguje přibližně takto:
1. každá odchozí fronta (může jich existovat několik) má přiřazenu dvojici registrů mapovaných do
fyzického adresního prostoru: jeden reprezentuje hlavový ukazatel a ten druhý koncový (angl. head a
tail),
2. tyto ukazatele popisují kruhovou frontu dynamické velikosti, uloženu v operační paměti, ke které síťové
rozhraní přistupuje za pomoci DMA; každá položka (buňka) této kruhové fronty reprezentuje jeden
rámec,
3. ukazatele dělí frontu na dvě části – jedna patří rozhraní a jedna operačnímu systému,
4. operační systém (resp. ovladač síťového rozhraní) upravuje koncový ukazatel:
a. pro odeslání rámce pro něj operační systém nejprve vyhradí paměť a uloží do ni obsah rámce (data),
b. zapíše příslušnou adresu a velikost do své části kruhové fronty,
c. posune koncový ukazatel, čím předá odpovědnost za nově vyplněné buňky síťovému rozhraní,
5. síťové rozhraní ovládá hlavový ukazatel: kdykoliv zpracuje odchozí rámec, posune hlavový ukazatel
tak, že paměť asociovaná s odeslaným rámcem se přesune do části fronty, která patří rozhraní
Události, které se zpracováním kruhové fronty souvisí, signalizuje síťové rozhraní pomocí přerušení`,`Příjmová fronta
Síťové rozhraní po přidání prvků tuto změnu signalizuje přerušením. Alokace paměti pro rámce je v kompetenci operačního
systému – přesune-li operační systém nějakou položku (buňku) do části kruhové fronty, která náleží
síťovému rozhraní, dává tím najevo, že paměť touto položkou odkázaná může být přepsána novými daty.
Jakmile tak síťové rozhraní učiní, příslušnou buňku příjmové fronty přesune do části patřící operačnímu
systému.
Je obvyklé, že každý blok paměti, který operační systém rozhraní předá, má velikost 2 na n (kde n je velikost registrů procesoru).`]},{section:5,name:"Souběžnost a synchronizace",correct:[`Relace předcházení
Událost je jev, který nastane v čase (ne nutně pevně určeném nebo známém), který můžeme
pozorovat, a o kterém můžeme říct, že nastal před nebo po nějaké jiné události, případně že s ní
nastal souběžně. Relaci uspořádání, která tuto chronologii popisuje, budeme říkat předcházení (anglicky
„happens before“).
Takto definovaná relace určuje vztah „muselo se stát před“ neboli kauzální návaznost. Grafem předcházení
nazveme tranzitivní redukci této relace. Protože grafem uspořádání je acyklický orientovaný graf (angl.
DAG = directed acyclic graph), jeho tranzitivní redukce je určena jednoznačně (znáte nejspíš jako
Hasseův diagram).`,`Relace předcházení
Vrcholy grafu předcházení jsou události (něco se stalo), jeho hrany budeme nazývat akce (něco se děje).
Akce tedy vedou od jedné události k nějaké další, ale nemohou je „přeskakovat“ (formálněji: existuje-li
mezi událostmi A a B cesta délky alespoň 2, neexistuje hrana/akce která vede z A do B přímo).`,`Časový sled
 Je-li nějaká relace předcházení lineární, mluvíme o časovém sledu.
Připomenutí: Časovým sledem událostí rozumíme lineární uspořádání událostí, tedy takové, že pro každou
dvojici A, B událostí platí buď:
• A předchází B nebo
• B předchází A.
Časový sled si můžeme představit i jako přiřazení časového razítka každé události takové, že žádné dvě
události nenastanou ve stejné chvíli.`,`Hazard souběhu
Předcházení je abstrakce, která skrývá vnitřní detaily procesů (dějů odehrávajících se v
čase), které se mohou stát v různém pořadí díky náhodným vlivům, a snažíme se jejich vnější chování
popsat pomocí této relace. Vnější chování nějakého systému závisí pouze na jeho relaci předcházení,
nikoliv už na tom, jak přesně budou v čase rozloženy konkrétní události.
Je-li takto zavedená abstrakce porušena, mluvíme o hazardu souběhu. Jinými slovy, hazard souběhu nastává
kdykoliv vedou dva různé časové sledy, které jsou oba konzistentní s relací předcházení pro daný systém,
k různému vnějšímu chování.`,`Hybatel
Akce (které reprezentujeme hranami v grafu předcházení) jsou prováděny vždy nějakým
hybatelem (v našem kontextu obvykle vláknem nebo periferií). Hrany (akce) tedy můžeme tomuto hybateli
přisoudit (např. můžeme říct, že vlákno T má modré hrany a periferie P má žluté hrany). Zároveň hybatele
můžeme považovat za „peška“ který se v grafu předcházení pohybuje po hranách své vlastní barvy.`,`Synchronizace
Akce jsou souběžné právě tehdy, když jsou souběžné libovolné dvě události, kterých
se tyto akce týkají. Událost zejména nemůže být souběžná sama se sebou, a nemohou být souběžné ani
události spojené nějakou akcí.`,`Stavový prostor je orientovaný graf kde vrcholy jsou stavy a hrany jsou akce (ve stejném smyslu jako
v grafu předcházení). Pojem „stav“ je v tomto kontextu velmi abstraktní, nicméně můžeme si bez velké
újmy nadále představovat stav jako:
• hodnoty procesorových registrů,
• buněk paměti (jak operační, tak paměti a registrů periferií).`,`Běh
Orientovanou cestu ve stavovém prostoru označíme za běh. Je zde jasná korespondence mezi
během (posloupnost stavů propojených akcemi) a časovým sledem (posloupnost událostí propojených
akcemi). Sekvenci akcí můžeme chápat i jako běh i jako sled – v obou případech stačí určit počáteční
stav (událost) a zbytek běhu (sledu) je již určen akcemi jednoznačně.`,`Kritická sekce Uvažme běh R ≡ (r1, r2, ..., rn) nějakého vlákna (nebo jiného hybatele) T1asouběžný běh S ≡ (s1, ..., sn).
Říkáme, že R je kritickou sekcí vůči S, vede-li (r1, ..., S, ..., rn) k události „chyba“, a to přesto, že samotné běhy R ani S k chybě nevedou.
Proto se tomuto typu problému také říká chyba atomicity.`,`Čtenáři a písaři
Představme si situaci, kdy máme běhy R1, R2, … Rn a běhy W1, W2, …, Wm,
pro které platí:
1. ∀.i, j platí Ri není kritickou sekcí vůči Rj
2. ∀.i, j platí Ri je kritickou sekcí vůči Wj,
3. ∀.i, j platí Wi je kritickou sekcí vůči Wj
Takovou situaci nazýváme „čtenáři a písaři“ – máme tedy n čtenářů Ri a m písařů Wi.
Čtenáři si vzájemně nepřekáží – mohou číst zároveň v libovolném pořadí. 
Písaři se chovají jinak: sdílená data nejen čtou, ale i modifikují – proto čtenář,
který by byl přerušen písařem, by mohl přečíst nekonzistentní data.
Podobně si překáží dva různí písaři – protože data jak čtou tak modifikují, může být výsledek opět nekonzistentní.`,`Souběžná datová závislost 
je vztah mezi akcemi, který je nejlépe vidět ve stavovém prostoru:
je-li vstupem nějaké akce Z paměťová buňka nebo registr, do které naposled zapisovala akce X, říkáme,
že Z má datovou závislost na X.
Uvažme zároveň situaci, kdy máme dva běhy, A ≡ (a1, ..., X, ...an), B ≡ (b1, ..., Z, ..., bm), které jsou
zcela souběžné. To se v programu může lehce stát, a často je těžké takovou chybu odhalit, zejména je-li
výpočet (a1, ..., X) krátký, zatímco (b1, ..., Z) dlouhý (časově náročný)`,`Producenti a konzumenti
Uvažme situaci, kdy účelem několika vláken je vytvářet mezivýsledky
určené k dalšímu zpracování (tato vlákna – producenty – označíme P1...Pn), a několik dalších vláken
tyto mezivýsledky dále zpracovává (tato nazveme konzumenty a označíme K1...Km).
Všechna vlákna Pi jsou souběžná jak vzájemně tak s vlákny Ki.
Tato souběžnost je důležitá a užitečná:
umožňuje nám práci distribuovat na různá procesorová jádra a tím celý proces značně urychlit. Protože
jsou ale všechna vlákna souběžná, můžou lehce nastat dvě problémové situace:
1. producenti mohou generovat výsledky rychleji, než je konzumenti dokáží zpracovávat – mezivýsledky
se budou hromadit a postupně zaberou veškerou vyhrazenou paměť, nebo se začnou ztrácet (protože je
producenti začnou přepisovat dříve, než jsou zpracovány),
2. konzumenti mohou zpracovávat výsledky rychleji, než je producenti dokáží vytvářet – bez synchronizace
by taková situace vedla k opakovanému zpracování stejného mezivýsledku, případně k pokusu o zpracování
nějaké nesmyslné informace (je-li mezivýsledek očekáván na adrese, kam ještě nebyl producentem
zapsán).

V těchto dvou situacích se tedy musí konzumenti a producenti synchronizovat – je-li mezivýsledků
nedostatek, upřednostníme práci producentů, naopak je-li jich přebytek, upřednostníme práci konzumentů.
V ideálním případě tak, aby existovala nějaká pevná mez na počet nezpracovaných mezivýsledků (a tedy i
na množství paměti potřebné pro jejich uložení).`,`Rozvětvení a setkán
Akce, které nejsou souběžné, nelze provádět paralelně. Máme-li tedy více výpočetních jader, než máme
vláken, nevyužíváme hardwarové zdroje efektivně. Relativně častým jevem je, že výpočet má dva (nebo
několik) bloků, které lze provést v libovolném pořadí, aniž by se změnil výsledek. V takovém případě
bychom chtěli výpočet rozvětvit tak, aby byl každý takový blok (běh) souběžný s těmi ostatními. Máme-li
procesorů málo, vykonají se v libovolném pořadí (to nám nevadí), ale máme-ji jich dostatek (nebo
přebytek), mohou se tyto běhy provést najednou (každý na jiném procesoru).
Tím ale vzniká nový problém – výpočet nemůže pokračovat, než skončí všechny takto vyčleněné bloky
– jinak bychom se dostali do situace „výpočetní závislost“ (a tím do známého terénu „příliš mnoho
souběžnosti“). Proto je potřeba, aby se běhy i setkaly.`],incorrect:[`Relace předcházení
Událost je jev, který nastane v čase (ne nutně pevně určeném nebo známém), který můžeme
pozorovat, a o kterém můžeme říct, že nastal před nebo po nějaké jiné události, případně že s ní
nastal souběžně. Relaci uspořádání, která tuto chronologii popisuje, budeme říkat předcházení (anglicky
„happens before“).
Takto definovaná relace určuje vztah „muselo se stát před“ neboli kauzální návaznost. Grafem předcházení
nazveme tranzitivní redukci této relace. Protože grafem uspořádání je cyklický orientovaný graf (angl.
DCG = directed cyclic graph), jeho tranzitivní redukce je určena jednoznačně (znáte nejspíš jako
Hasseův diagram).`,`Relace předcházení
Vrcholy grafu předcházení jsou události (něco se stalo), jeho hrany budeme nazývat akce (něco se děje).
Akce tedy vedou od jedné události k nějaké další, ale mohou je „přeskakovat“ (formálněji: existuje-li
mezi událostmi A a B cesta délky alespoň 2, může existovat hrana/akce která vede z A do B přímo).`,`Časový sled
Je-li nějaká relace předcházení souběžná, mluvíme o časovém sledu.
Připomenutí: Časovým sledem událostí rozumíme souběžná uspořádání událostí, tedy takové, že pro každou
dvojici A, B událostí platí:
A a B nastanou libovoně, tedy nezávisle na sobě
Časový sled si můžeme představit i jako přiřazení časového razítka každé události takové, že žádné dvě
události nenastanou ve stejné chvíli.`,`Předcházení je abstrakce, která skrývá vnitřní detaily procesů (dějů odehrávajících se v
čase), které se mohou stát v různém pořadí díky náhodným vlivům, a snažíme se jejich vnější chování
popsat pomocí této relace. Vnější chování nějakého systému závisí pouze na jeho relaci předcházení,
nikoliv už na tom, jak přesně budou v čase rozloženy konkrétní události.
Je-li takto zavedená abstrakce porušena, mluvíme o chybě atomicity. Jinými slovy, chyba atomicity nastává
kdykoliv vedou dva různé časové sledy, které jsou oba konzistentní s relací předcházení pro daný systém,
k různému vnějšímu chování.`,`Hybatel
Akce (které reprezentujeme hranami v grafu předcházení) jsou prováděny vždy nějakým
hybatelem (v našem kontextu obvykle vláknem nebo periferií). Hrany (akce) tedy můžeme tomuto hybateli
přisoudit (např. můžeme říct, že vlákno T má modré hrany a periferie P má žluté hrany). Zároveň hybatele
můžeme považovat za „peška“ který se v grafu předcházení pohybuje po hranách libovoné barvy.`,`Synchronizace
Akce jsou souběžné právě tehdy, když jsou souběžné libovolné dvě události, kterých
se tyto akce týkají. Událost můžou být souběžná sama se sebou, a také mohou být souběžné události spojené nějakou akcí.`,`Stavový prostor je orientovaný graf kde vrcholy jsou akce a hrany jsou stavy (ve stejném smyslu jako
v grafu předcházení). Pojem „stav“ je v tomto kontextu velmi abstraktní, nicméně můžeme si bez velké
újmy nadále představovat stav jako:
• hodnoty procesorových registrů,
• buněk paměti (jak operační, tak paměti a registrů periferií).`,`Běh
Orientovanou cestu ve stavovém prostoru označíme za běh. Je zde jasná korespondence mezi
během (posloupnost stavů propojených akcemi) a časovým sledem (posloupnost událostí propojených
akcemi). Sekvenci akcí můžeme chápat i jako běh ale nikoliv jako sled – v případě běhu stačí určit počáteční
stav (událost) a zbytek běhu je již určen akcemi jednoznačně.`,`Kritická sekce Uvažme běh R ≡ (r1, r2, ..., rn) nějakého vlákna (nebo jiného hybatele) T1asouběžný běh S ≡ (s1, ..., sn).
Říkáme, že S je kritickou sekcí vůči R, vede-li (r1, ..., S, ..., rn) k události „chyba“, a to přesto, že samotné běhy R ani S k chybě nevedou.
Proto se tomuto typu problému také říká chyba atomicity.`,`Čtenáři a písaři
Představme si situaci, kdy máme běhy R1, R2, … Rn a běhy W1, W2, …, Wm,
pro které platí:
1. ∀.i, j platí Wi není kritickou sekcí vůči Wj
2. ∀.i, j platí Ri je kritickou sekcí vůči Wj,
3. ∀.i, j platí Ri je kritickou sekcí vůči Rj
Takovou situaci nazýváme „čtenáři a písaři“ – máme tedy n čtenářů Ri a m písařů Wi.
Čtenáři si vzájemně nepřekáží – mohou číst zároveň v libovolném pořadí.
Písaři se chovají jinak: sdílená data nejen čtou, ale i modifikují – proto čtenář
 který by byl přerušen písařem, by mohl přečíst nekonzistentní data.
Podobně si překáží dva různí písaři – protože data jak čtou tak modifikují, může být výsledek opět nekonzistentní.`,`Souběžná datová závislost
je vztah mezi akcemi, který je nejlépe vidět ve stavovém prostoru:
je-li vstupem nějaké akce Z paměťová buňka nebo registr, do které naposled zapisovala akce X, říkáme,
že X má datovou závislost na Z.
Uvažme zároveň situaci, kdy máme dva běhy, A ≡ (a1, ..., X, ...an), B ≡ (b1, ..., Z, ..., bm), které jsou
zcela souběžné. To se v programu může lehce stát, a často je těžké takovou chybu odhalit, zejména je-li
výpočet (a1, ..., X) krátký, zatímco (b1, ..., Z) dlouhý (časově náročný)`,`Producenti a konzumenti
Uvažme situaci, kdy účelem několika vláken je vytvářet mezivýsledky
určené k dalšímu zpracování (tato vlákna – producenty – označíme P1...Pn), a několik dalších vláken
tyto mezivýsledky dále zpracovává (tato nazveme konzumenty a označíme K1...Km).
Všechna vlákna Pi jsou souběžná jak vzájemně tak s vlákny Ki.
Tato souběžnost je důležitá a užitečná:
umožňuje nám práci distribuovat na různá procesorová jádra a tím celý proces značně urychlit. Protože
jsou ale všechna vlákna souběžná, můžou lehce nastat dvě problémové situace:
1. producenti mohou generovat výsledky rychleji, než je konzumenti dokáží zpracovávat – mezivýsledky
se budou hromadit a postupně zaberou veškerou vyhrazenou paměť, nebo se začnou ztrácet (protože je
producenti začnou přepisovat dříve, než jsou zpracovány),
2. konzumenti mohou zpracovávat výsledky rychleji, než je producenti dokáží vytvářet – bez synchronizace
by taková situace vedla k opakovanému zpracování stejného mezivýsledku, případně k pokusu o zpracování
nějaké nesmyslné informace (je-li mezivýsledek očekáván na adrese, kam ještě nebyl producentem
zapsán).

V těchto dvou situacích se tedy musí konzumenti a producenti synchronizovat – je-li mezivýsledků
nedostatek, upřednostníme práci producentů, naopak je-li jich přebytek, upřednostníme práci konzumentů.
V ideálním případě tak, aby existovala nějaká dynamická mez, která se podle potřeb systému mění.`,`Rozvětvení a setkán
Akce, které nejsou souběžné, nelze provádět paralelně. Máme-li tedy více výpočetních jader, než máme
vláken, nevyužíváme hardwarové zdroje efektivně. Relativně častým jevem je, že výpočet má dva (nebo
několik) bloků, které lze provést v libovolném pořadí, aniž by se změnil výsledek. V takovém případě
bychom chtěli výpočet rozvětvit tak, aby byl každý takový blok (běh) souběžný s těmi ostatními. Máme-li
procesorů málo, vykonají se v libovolném pořadí (to nám nevadí), ale máme-ji jich dostatek (nebo
přebytek), mohou se tyto běhy provést najednou (každý na jiném procesoru).
Tím ale vzniká nový problém – výpočet nemůže pokračovat, než skončí alespoň některé takto vyčleněné bloky
– jinak bychom se dostali do situace „výpočetní závislost“ (a tím do známého terénu „příliš mnoho
souběžnosti“).`]},{section:6,name:"Synchronizace",correct:[`Synchronizační zařízení
synchronizační zařízení je (de facto) datová struktura – v programu může existovat v mnoha
nezávislých instancích. Mezi různými instancemi se žádná synchronizace neděje. Každé synchronizační
zařízení má nějaký stav, který musí být někde uložen: instanci synchronizačního zařízení tedy ztotožníme
s adresou, na které je uložen jeho stav`,`Vzájemné vyloučení (mutex) 
Zřejmě úplně nejjednodušším synchronizačním zařízením je mutex,
určený k ochraně kritické sekce. Aby byla kritická sekce ochráněna, musí být chráněná jak kritická sekce
samotná, tak i všechny běhy, vůči kterým je kritická, a to tím stejným mutexem.`,`Spinlock
je synchronizační smyčka bez interakce s plánovačem (komunikace s plánovačem je
potenciálně drahá operace – neplánujeme-li čekat dlouho, může být nevýhodné ji provést).
V moderních systémech se spinlock implementuje pomocí atomické instrukce, která umožní provést
operaci ld, úpravu hodnoty a st jako jediný krok, který je pro všechny procesory v systému pozorovatelný
pouze jako celek. Atomických operací existuje celá řada, my použijeme operaci cmpxchg (z angl. „compare
and exchange“), která má 3 operandy: adresu, očekávanou hodnotu a požadovanou hodnotu.`,`Spinlock (resp. aktivní čekání obecně) má ale jednu důležitou nevýhodu: soutěží-li o stejný zámek dvě
vlákna, která sdílí procesorové jádro, čekajícímu vláknu se nemůže podařit zámek získat, dokud nebude
vlastník zámku probuzen. Proto je použití spinlocku v uživatelských programech obvykle chybou (nelze
zaručit, že vlákna budou naplánována na různá procesorová jádra).`,`Uspávající mutex 
Operace lock je realizována jako služba operačního systému (systémové volání); jádro nejprve ověří, je-li zámek odemčen:
1. pokud ano, poznačí ho jako zamčený a vrátí kontrolu vláknu, které zámek vyžádalo,
2. v opačném případě zařadí vlákno do fronty, která danému mutexu náleží, a nechá plánovač probudit
nějaké jiné vlákno.
Odemčení zámku pak ověří, je-li nějaké další vlákno ve frontě, a pokud ano, mutex ihned zase zamkne a
předá ho prvnímu vláknu z této fronty`,`Rychlý mutex
rozdělení odpovědnosti za dvě části stavu
mezi uživatelské vlákno a operační systém. Rozhodnutí o tom, je-li zámek zamčený nebo nikoliv, vyřeší
vlákno ve vlastní režii (stejně, jako by se jednalo o spinlock – pomocí atomické instrukce). Systémové
volání se provede pouze v případě, kdy pokus o zamčení selže.
Systémová část stavu se jmenuje futex (z angl. „fast mutex“), a sestává pouze z fronty uspaných
vláken. Fronty jsou s jednotlivými uživatelskými mutexy svázány adresou (tzn. operační systém má
pomyslný slovník front, kde klíčem je adresa příslušného mutexu)`,` Read-Copy-Update
Princip fungování je jednoduchý: místo aby písař měnil datovou strukturu na místě, vytvoří její kopii
(skutečnou nebo pomyslnou resp. částečnou) a tuto kopii upraví – obě operace jsou bezpečné, protože
kopírování je vzhledem k původní datové struktuře forma čtení, a nová kopie je prozatím ve výlučném
vlastnictví písaře (jiná vlákna k ní nemají vůbec přístup). Jakmile je úprava hotová, přesměruje všechny
budoucí čtenáře na tuto novou verzi, obvykle tím, že upraví sdílený ukazatel. 
Starší kopie je možné uvolnit až ve chvíli, kdy je jisté, že k nim nepřistupuje žádný čtenář – protože
čtenáři jsou se zapisujícím písařem souběžní, potřebujeme další synchronizační mechanismus – častou
volbou je počítadlo odkazů, které čtenáři udržují; poslední čtenář pak již nepotřebnou starší verzi dat
uvolní.`,`Monitor
Monitor je jednoduchou, ale velmi užitečnou abstrakcí – uvažme datovou strukturu, která sestává z nějaké
datové reprezentace a operací nad ní. Realizace jednotlivé operace je často kritickou sekcí vůči ostatním
operacím (to platí zejména pro ty operace, které strukturu mění).
Organizujeme-li program tak, že jediný přístup přímo k datům takové struktury je skrze operace
definované v podprogramech, lze datové struktuře jako celku přidružit jeden mutex, který se na začátku
každé operace zamkne a na konci odemkne. Lze si zde představit dvě implementační strategie:
1. v ideálním případě zamykáni a odemykání v operacích řeší překladač (týká se některých OOP jazyků);
pak lze navíc v situaci, kdy jedna operace volá jinou operaci jako podprogram, zamykání přeskočit
(„staticky“ víme, že mutex je již zamčený),
2. v méně ideálním případě, kdy je „monitor“ pouze ručně udržovaný invariant, můžeme využít rekurzivního
mutexu (vnořené zamykání se tak vyřeší „dynamicky“ – za běhu).`,`Monitor nemůže zaručit, že program jako celek nebude obsahovat chyby synchronizace – není
těžké představit si invariant, který přesahuje hranice jedné datové struktury, a kterého dočasné
porušení je kritickou sekcí.
`,`Podmínková proměnná
Pro řešení problému souběžné datové závislosti lze použít synchronizační
zařízení, kterému se říká podmínková proměnná (angl. condition variable). Operace jsou jednoduché:
• wait – čekej – zablokuje volající vlákno až do chvíle, kdy nějaké jiné vlákno provede operaci signal,
• signal odblokuje vlákno (tzn. umožní mu pokračovat ve výpočtu) zablokované operací wait.`,`Semafor
Klasický semafor přímo neřeší žádný zajímavý problém (který by mutex nebo některá
jeho varianta neřešila lépe), nicméně ze dvou semaforů lze sestavit řešení problému producentů a
konzumentů.
Semafor lze také mírně upravit tak, aby problém producentů a konzumentů řešil přímo – stačí změnit
operaci post tak, aby při pokusu o překročení hodnoty n blokovala. Takovému semaforu bychom mohli říkat
třeba symetrický (díky nově získané symetrii operací wait a post). Klasické řešení problému producentů
a konzumentů pak není nic jiného, než kombinace dvou klasických, asymetrických semaforů do jednoho
symetrického.
Význam semaforu E je počet volných míst ve frontě mezivýsledků, zatímco význam semaforu F je počet
zabraných míst ve frontě mezivýsledků. Operace udržují invariant E + F = n.`,` Bariéra
Inverzní semafor – umožňuje pokračovat ve výpočtu, až když na bariéru čeká dostatek
vláken. Smyslem bariéry je řešit problém rozvětvení a setkání (zejména jeho druhou část – setkání
většího počtu vláken, které řeší nezávislé podproblémy nějakého většího výpočetního celku).
Bariéru lze implementovat například jako počítadlo + podmínkovou proměnnou.`],incorrect:[`Synchronizační zařízení
synchronizační zařízení je (de facto) datová struktura – v programu může existovat v mnoha
nezávislých instancích. Mezi různými instancemi  může probíhat synchronizace. Každé synchronizační
zařízení má nějaký stav, který musí být někde uložen: instanci synchronizačního zařízení tedy ztotožníme
s adresou, na které je uložen jeho stav`,`Vzájemné vyloučení (mutex) 
Zřejmě úplně nejjednodušším synchronizačním zařízením je mutex,
určený k ochraně kritické sekce. Aby byla kritická sekce ochráněna,stačí když  bude chráněná samotná kritická sekce,
 nic ostatního není potřeba, vychází z relace předcházení.`,`Spinlock
je synchronizační smyčka, která interaguje s plánovačem (komunikace s plánovačem je
potenciálně drahá operace – neplánujeme-li čekat dlouho, může být nevýhodné ji provést).
V moderních systémech se spinlock implementuje pomocí atomické instrukce, která umožní provést
operaci ld, úpravu hodnoty a st jako jediný krok, který je pro všechny procesory v systému pozorovatelný
pouze jako celek. Atomických operací existuje celá řada, my použijeme operaci cmpxchg (z angl. „compare
and exchange“), která má 3 operandy: adresu, očekávanou hodnotu a požadovanou hodnotu.`,`Spinlock (resp. aktivní čekání obecně) má ale jednu důležitou nevýhodu: soutěží-li o stejný zámek dvě
vlákna, která sdílí procesorové jádro, čekajícímu vláknu se nemůže podařit zámek získat, dokud nebude
vlastník zámku probuzen. Proto je použití spinlocku v uživatelských programech obvykle chybou (vlákna budou vždy naplánována na různá procesorová jádra).`,`Uspávající mutex 
Operace lock je realizována bez interakce s plánovačem; jádro nejprve ověří, je-li zámek odemčen:
1. pokud ano, poznačí ho jako zamčený a vrátí kontrolu vláknu, které zámek vyžádalo,
2. v opačném případě zařadí vlákno do fronty, která danému mutexu náleží, a nechá plánovač probudit
nějaké jiné vlákno.
Odemčení zámku pak ověří, je-li nějaké další vlákno ve frontě, a pokud ano, mutex ihned zase zamkne a
předá ho prvnímu vláknu z této fronty`,`Rychlý mutex
rozdělení odpovědnosti za dvě části stavu
mezi uživatelské vlákno a operační systém. Rozhodnutí o tom, je-li zámek zamčený nebo nikoliv, vyřeší
vlákno ve vlastní režii (stejně, jako by se jednalo o spinlock – pomocí atomické instrukce). Systémové
volání se provede pouze v případě, kdy pokus o zamčení selže.
Systémová část stavu se jmenuje futex (z angl. „fast mutex“), a sestává pouze z fronty uspaných
vláken. Fronty jsou mezi jednotlivými uživatelskými mutexy sdílené napříč celým systémem.`,`Read-Copy-Update
Princip fungování je jednoduchý: místo aby písař měnil datovou strukturu na místě, vytvoří její kopii
(skutečnou nebo pomyslnou resp. částečnou) a tuto kopii upraví – obě operace jsou bezpečné, protože
kopírování je vzhledem k původní datové struktuře forma čtení, a nová kopie je prozatím ve výlučném
vlastnictví písaře (jiná vlákna k ní nemají vůbec přístup). Jakmile je úprava hotová, přesměřujeme všechny aktuální i budoucí čtenáře na aktuální verzi.`,`Monitor
Monitor je jednoduchou, ale velmi užitečnou abstrakcí – uvažme datovou strukturu, která sestává z nějaké
datové reprezentace a operací nad ní. Realizace jednotlivé operace je často kritickou sekcí vůči ostatním
operacím (to platí zejména pro ty operace, které strukturu mění).
Organizujeme-li program tak, že jediný přístup přímo k datům takové struktury je skrze operace
definované v podprogramech, lze datové struktuře jako celku přidružit několik mutexů, které vybere podle potřeby na začátku
každé operace a daný mutex zamkne a na konc zasei odemkne. Lze si zde představit dvě implementační strategie:
1. v ideálním případě zamykáni a odemykání v operacích řeší překladač (týká se některých OOP jazyků);
pak lze navíc v situaci, kdy jedna operace volá jinou operaci jako podprogram, zamykání přeskočit
(„staticky“ víme, že mutex je již zamčený),
2. v méně ideálním případě, kdy je „monitor“ pouze ručně udržovaný invariant, můžeme využít rekurzivního
mutexu (vnořené zamykání se tak vyřeší „dynamicky“ – za běhu).`,"Monitor pomáhá zaručit, že program jako celek nebude obsahovat chyby synchronizace a chrání tak celou datovou strukturu a operace nad ní.",`Podmínková proměnná
Pro řešení problému čtenářů a písařů lze použít synchronizační
zařízení, kterému se říká podmínková proměnná (angl. condition variable). Operace jsou jednoduché:
• wait – čekej – zablokuje volající vlákno až do chvíle, kdy nějaké jiné vlákno provede operaci signal,
• signal odblokuje vlákno (tzn. umožní mu pokračovat ve výpočtu) zablokované operací wait.`,`Semafor
Klasický semafor přímo neřeší žádný zajímavý problém (který by mutex nebo některá
jeho varianta neřešila lépe), nicméně ze dvou semaforů lze sestavit řešení problému producentů a
konzumentů.
Semafor lze také mírně upravit tak, aby problém producentů a konzumentů řešil přímo – stačí změnit
operaci post tak, aby při pokusu o překročení hodnoty n blokovala. Takovému semaforu bychom mohli říkat
třeba symetrický (díky nově získané symetrii operací wait a post). Klasické řešení problému producentů
a konzumentů pak není nic jiného, než kombinace dvou klasických, asymetrických semaforů do jednoho
symetrického.
Význam semaforu E je počet volných míst ve frontě mezivýsledků, zatímco význam semaforu F je počet
zabraných míst ve frontě mezivýsledků. Operace udržují invariant E * F = n.`,` Bariéra
Inverzní semafor – umožňuje pokračovat ve výpočtu, až když na bariéru čeká dostatek
vláken. Smyslem bariéry je řešit problém rozvětvení většího 
počtu vláken, které řeší nezávislé podproblémy nějakého většího výpočetního celku).
Bariéru lze implementovat například jako počítadlo + spinlock.`]},{section:7,name:"Komunikace, uváznutí",correct:[`Komunikace a Synchronizace
Každá komunikace je zároveň formou synchronizace: každé čtení
nějaké informace musí být předcházeno odpovídajícím zápisem. Nelze dost dobře obdržet zprávu, která
dosud nebyla odeslána. Proto je každé komunikační zařízení také zařízením synchronizačním. Opačný vztah
ale neplatí: komunikace přidává možnost předat nějakou informaci.`,`Datové struktury pro komunikaci
Ke komunikaci lze použít celkem libovolnou datovou strukturu, je-li chráněna
mutexem nebo jiným vhodným synchronizačním zařízením (např. je realizována jako monitor).
Problém, který zde vzniká, je soutěž (angl. contention) o příslušný zámek. Takové kombinované
komunikační zařízení si lze představit jako klasickou poštovní schránku – vkládá-li právě pošťák psaní
do schránky, nemůžete si z ní dost dobře ve stejnou chvíli vyzvedávat nějaké jiné – jak přesně datová
struktura funguje vnitřně z tohoto pohledu není důležité.`,`Roura
Specializace fronty, která pracuje s bajty. Vyznačuje se zejména efektivními dávkovými
operacemi – zápisem resp. čtením většího počtu položek (bajtů) najednou. Často je poskytována operačním
systémem. Prakticky vždy implementovaná jako omezená – existuje nějaký maximální objem dat, který lze
do roury zapsat, než musí další zápis vyčkat na čtení. Stejně jako omezená fronta má tedy synchronizační
chování stejné jako symetrický semafor.`,`Alternativou ke sdílené paměti je předávání zpráv – má dvě výhody:
1. je bezpečnější na použití – méně problémů s hazardy souběhu,
2. lze použít i mezi různými počítači (po síti),
a dvě nevýhody:
1. méně pohodlné, protože nelze odkazovat do jiných datových struktur – všechna relevantní data je
potřeba „přibalit“ do samotné zprávy,
2. méně efektivní, jednak kvůli samotné konstrukci zpráv, jednak kvůli režii s kopírováním a předáváním
zprávy.`,`Zpráva 
Z pohledu systému pro předávání zpráv je obvykle obsah zprávy neprůhledný (jsou to pouze
bajty), důležitá jsou připojená metadata: zejména adresát. Způsob adresace je zároveň hlavní rozdíl 
mezi předáváním zpráv a frontami – mezi pevnou dvojicí komunikujících vláken je jinak předávání zpráv
ekvivalentní dvojici komunikačních front`,`Základní opreace
Je-li maximální počet nedoručených zpráv, které je systém ochoten uložit, nulový, mluvíme o tzv.
„setkání“ (rendezvous) – odesílající a přijímající vlákno se musí „sejít“ aby si mohly zprávu předat.
Synchronizační aspekt komunikace je zde obzvláště výrazný – dokonce mnohem výraznější, než je obvyklé
u synchronizačních zařízení.`,`Zprostředkovatel
Úkolem zprostředkovatele je zprávu od odesílatele přebrat a doručit ji adresátovi. Předáni zprávy může
probíhat ve 3 režimech:
• Je-li operace odeslání synchronní a systém doručení spolehlivý, za zprávu je již dále odpovědný
zprostředkovatel – klient může věc považovat za vyřízenou.
• Je-li operace asynchronní, klient musí paměť se zprávou zachovat až do doby, než zprostředkovatel
potvrdí, že ji převzal.
• Je-li doručení zpráv nespolehlivé, a klient potřebuje zajištěné doručení, musí zprávu zachovat až do
doby, než mu ji příjemce potvrdí (opět odesláním zprávy).
Příjem zprávy obvykle funguje v jednom ze dvou režimů:
1. Synchronní, kdy se příjemce dotáže na další zprávu (případně na ni vyčká, není-li právě žádná
k dispozici), tuto zpracuje a poté se zeptá na další.
2. Asynchronní – klient zpracovává větší počet zpráv souběžně, a zpracováni příchozí zprávy začne na
výzvu zprostředkovatele. Lze realizovat buď pomocí klasických vláken, nebo tzv. fibrů.`,`Existuje typ operačních systémů, kde je předávání zpráv základním mechanismem meziprocesové komunikace.
Tento návrh silně koreluje s mikrojádrovou architekturou. V takovém systému
jsou služby operačního systému z velké části realizovány „běžnými“ procesy, a proto je komunikace mezi
procesy v takových systémech velmi důležitá. Zprostředkovatelem je v takových systémech často samotné
mikrojádro.`,`Hardwarové zdroje nejpřirozenějším typem zdroje je hardware: jak výpočetní (procesor, paměť)
tak periferie. V první části kurzu jsme se zabývali virtualizací, která nám umožňuje předstírat, že
zdroje vlastníme ve více instancích, než jich fyzicky existuje. To je sice velmi užitečná a úspěšná
taktika, ale není bez limitů.
Virtualizaci zdroje lze uplatnit jen v situacích, kdy každý uživatel daného zdroje využívá jen část jeho
skutečné kapacity – část obrazovky (okno), část procesorového jádra (vlákno), část operační paměti
(proces), část šířky přenosového pásma (síťové spojení) atp.`,`Rezervace
 Alternativou je rezervace, kterou využijeme v situacích, kdy virtualizaci použít nelze:
• neumožňuje to povaha zdroje (např. pásková jednotka nebo optická zapisovací mechanika) nebo
• nečekané selhání zdroje je nepřípustné (např. by došlo k ohrožení zdraví, života nebo majetku).
Rezervace a virtualizace není vzájemně výlučná – daný zdroj může být virtualizován, ale zároveň může
systém poskytovat možnost rezervovat zaručenou kapacitu – v takovém případě je rezervovaný zdroj
(dočasně) nepřístupný pro systém virtualizace. Operační systémy například běžně poskytují možnost
rezervovat pro daný proces nějaké množství fyzické paměti. Takto rezervovanou fyzickou paměť pak
systém nebude používat pro stránky jiných procesů, ani nebude stránky vlastníka z takto rezervované
paměti přesouvat do trvalého úložiště.`,`Rezervace sestává ze dvou operací:
1. samotná rezervace, která od systému vyžádá nějaký zdroj (resp. nějaký počet jednotek zdroje), pro
výlučné použití daným programem (procesem, vláknem, atp.), – po úspěšném provedení rezervace je
zdroj ve vlastnictví příslušného programu,
2. uvolnění zdroje kdy vlastník zdroje oznámí systému, že již zdroj nebude využívat, a tento může být
vrácen „do oběhu“ (může být předán jinému programu, procesu, vláknu, …).`,`Komunikace
Protože komunikace je zároveň synchronizací, jedná se (možná ne zcela intuitivně)
také o abstraktní zdroj. Novým aspektem je zde skutečnost, že rezervaci a uvolnění neprovádí nutně
tentýž aktér – předání zprávy (resp. obecně informace) může zároveň předat vlastnictví tohoto typu
„zdroje“.
Tento jev je vázán k problému producentů a konzumentů (který, jak jsme zmiňovali výše, s komunikací úzce
souvisí): vytvoření a (zejména) uložení mezivýsledku je formou rezervace – počet mezivýsledků, které
jsme si ochotni pamatovat, je omezené, a jedná se tedy o konečný zdroj, který musí být producentovi
přidělen. Takto zablokovaná instance se ale uvolní tím, že konzument mezivýsledek použije.`,`Odnímatelné zdroje
Implicitně považujeme zdroje za neodnímatelné, ve smyslu, že jediný způsob,
jak může dojít k uvolnění zdroje, je dobrovolné vrácení vlastníkem. U řady zdrojů by mělo odebrání
pravděpodobně fatální následky minimálně pro dotčený program, a někdy také pro dotčený zdroj (3D
tiskárna, optická zapisovací mechanika, fotografická tiskárna, atp.). Uvážíme-li abstraktní zdroje,
násilné odebrání např. zmiňovaného mutex-u jistě nemůže mít pozitivní dopad na další fungování vlákna,
resp. programu jako celku.
Jiná je situace u zdrojů virtualizovaných, kde odebrání fyzického prostředku obvykle nepředstavuje
zásadní problém – plánovač vláken zcela běžně odebírá procesor běžícímu vláknu bez jeho souhlasu,
správce virtuální paměti může stránku přestěhovat z operační paměti do externí, atp. Na dotčený proces
(vlákno) to má jistě dopad, ale důsledky obvykle nejsou zdaleka tak závažné, jako v případě zdrojů
neodnímatelných.`,`Podmínky uváznutí - Uváznutí může nastat, jsou-li splněny všechny 4 následující podmínky – přitom
požadovat umožnění každé z nich je samo o sobě přirozené a smysluplné
1. Vzájemné vyloučení
2. čekající vlastník
3. neodnímatelnost
4. kruhové čekání
Tyto podmínky nejsou postačující na to aby systém mohl uváznout.`,`Podmínky uváznutí - Uváznutí může nastat, jsou-li splněny všechny 4 následující podmínky – přitom
požadovat umožnění každé z nich je samo o sobě přirozené a smysluplné
1. Vzájemné vyloučení
2. čekající vlastník
3. neodnímatelnost
4. kruhové čekání
Tyto podmínky nejsou postačující na to aby systém mohl uváznout.`,`Detekce uváznutí
Jednou možností jak uváznutí detekovat je použít dynamickou variantu grafu
závislostí zdrojů, který jsme použili k definici kruhového čekání. V tomto případě obsahuje graf dva
různé typy uzlů: vlákna, nebo jiné potenciální vlastníky a zdroje`,`Zotavení z uváznutí 
Účastní-li se cyklického čekání alespoň jeden odnímatelný zdroj, může
k uváznutí sice dojít, ale na rozdíl od standardní situace se lze z tohoto typu uváznutí relativně lehce 
zotavit (zejména se lze zotavit bez násilného ukončování vláken). Dočasným odebráním odnímatelného
zdroje se totiž cyklus čekajících vláken přeruší, a systém může pokračovat.`,`Vyhýbání uváznutí
Jinou možností jak se s uváznutím vypořádat je technika vyhýbání (angl.
avoidance). Klíčovým prvkem je zamítnout některé požadavky na rezervaci, i když je příslušný zdroj
dostupný, může-li taková rezervace vést k pozdějšímu uváznutí. Stavy, ze kterých může vždy alespoň
jedno vlákno vyváznout a úspěšně skončit (resp. uvolnit zdroje) označíme jako bezpečné.
Asi nejznámějším algoritmem pro vyhýbání uváznutí je tzv. bankéřův algoritmus, navržený E. Dijkstrou.`,`Zamezení předrezervací Myšlenka předrezervace je jednoduchá – nesmíme připustit, aby vlákno,
které nějaký zdroj již vlastní, čekalo na nějaký zdroj (je lehce vidět, že systém pak nemůže uváznout).
Rezervace proto připustíme pouze v situaci, kdy žádající vlákno žádné zdroje nevlastní – aby byl systém
prakticky použitelný, musíme ovšem povolit rezervaci několika zdrojů najednou (dávkově).
Potřebuje-li tedy vlákno využít více zdrojů, musí je vyžádat všechny jedinou atomickou akcí (uvolňovat
je ovšem může postupně). Je-li potřeba rezervovat nějaký zdroj v situaci, kdy už dané vlákno nějaký
jiný zdroj vlastní, musí nejprve všechny zdroje uvolnit a opět je rezervovat společně s tím novým.`,`Zamezení virtualizací 
Virtualizací jsme se podrobně zabývali v prvních 4 kapitolách – zdroje,
které jsou virtualizované, vůbec nepoužívají systém výlučné rezervace, nesplňují tedy podmínku vzá-
jemného vyloučení a nemohou přímo způsobit uváznutí. Mezi zdroje, které lze virtualizovat, patří
samozřejmě paměť, procesor a pevné úložiště (kapitoly 1–3) a některé periferie – terminál (obrazovka,
tiskárna, atp.) nebo síťová rozhraní (kapitola 4).`,`Zamezení uspořádáním
Zbývá nám podmínka kruhového čekání – tomu lze zamezit například tím,
že se na zdrojích ustaví globální lineární uspořádání, které musí každé vlákno při rezervacích dodržet:
rezervovat lze pouze zdroj, který je v uspořádání větší než dosud největší zdroj vláknu přisouzený.
V takovém systému je statický graf závislostí zdrojů acyklický, k uváznutí tak nemůže dojít.
Podobně jako v případě předrezervace lze řešit i situace, kdy potřebujeme globální pořadí porušit –
vlákno se musí nejprve vzdát některých zdrojů a pak je znovu rezervovat ve správném pořadí.
Tento přístup je poměrně praktický na úrovni jednotlivého programu, nebo jiného uzavřeného systému,
nicméně pro operační systém jako celek se nehodí`],incorrect:[`Komunikace a Synchronizace
Každá synchronizace je zároveň formou komunikace: každé čtení
nějaké informace musí být předcházeno odpovídajícím zápisem. Nelze dost dobře obdržet zprávu, která
dosud nebyla odeslána. Proto je každé synchronizační zařízení také zařízením komunikačním. Opačný vztah
ale neplatí.`,`Datové struktury pro komunikaci
Ke komunikaci lze použít celkem libovolnou datovou strukturu,nesmí být ale chráněna žádným synchronizačním zařízením.
Problém, který zde vzniká, je soutěž (angl. contention) o příslušný zámek. Takové kombinované
komunikační zařízení si lze představit jako klasickou poštovní schránku – vkládá-li právě pošťák psaní
do schránky, nemůžete si z ní dost dobře ve stejnou chvíli vyzvedávat nějaké jiné – jak přesně datová
struktura funguje vnitřně z tohoto pohledu není důležité.`,`Roura
Specializace fronty, která pracuje s bajty. Vyznačuje se zejména efektivními dávkovými
operacemi – zápisem resp. čtením většího počtu položek (bajtů) najednou. Často je poskytována operačním
systémem. Prakticky neomezená –  neexistuje maximální objem dat, který je roura schopna pojmout.`,`Alternativou ke sdílené paměti je předávání zpráv – má dvě výhody:
1. efektivnější
2. lze použít i mezi různými počítači (po síti),
a dvě nevýhody:
1. méně pohodlné, protože nelze odkazovat do jiných datových struktur – všechna relevantní data je
potřeba „přibalit“ do samotné zprávy,
2. je méně bezpečné na použití – více problémů s hazardy souběhu,`,`Zpráva 
Z pohledu systému pro předávání zpráv je obvykle obsah zprávy neprůhledný (jsou to pouze
bajty), důležitá jsou připojená metadata: zejména adresát. Způsob adresace je zároveň hlavní rozdíl 
mezi předáváním zpráv a frontami – mezi pevnou dvojicí komunikujících vláken je jinak předávání zpráv
ekvivalentní bitmapě.`,`Základní opreace
Je-li maximální počet nedoručených zpráv, v daný moment roven nule, mluvíme o tzv.
„setkání“ (rendezvous) – odesílající a přijímající vlákno se setkaly aby si mohly zprávu předat.
Synchronizační aspekt komunikace je zde obzvláště výrazný – dokonce mnohem výraznější, než je obvyklé
u komunikační zařízení.`,`Zprostředkovatel
Úkolem zprostředkovatele je zprávu od odesílatele přebrat a doručit ji adresátovi. Předáni zprávy může
probíhat ve 3 režimech:
• Je-li operace odeslání synchronní a systém doručení spolehlivý, za zprávu je již dále odpovědný
zprostředkovatel – klient může věc považovat za vyřízenou.
• Je-li operace asynchronní, klient musí paměť se zprávou zachovat až do doby, než zprostředkovatel
potvrdí, že ji převzal.
• Je-li doručení zpráv nespolehlivé, a klient potřebuje zajištěné doručení, musí zprávu zachovat až do
doby, než mu ji příjemce potvrdí (opět odesláním zprávy).
Příjem zprávy obvykle funguje v jednom ze dvou režimů:
1. Synchronní, kdy se příjemce dotáže na další zprávu (případně na ni vyčká, není-li právě žádná
k dispozici), tuto zpracuje a poté se zeptá na další.
2. Asynchronní – klient zpracovává větší počet zpráv souběžně, a zpracováni příchozí zprávy začne na
výzvu zprostředkovatele. Lze realizovat buď pomocí klasických vláken, nebo tzv. fibrů.`,`Existuje typ operačních systémů, kde je předávání zpráv základním mechanismem meziprocesové komunikace.
Tento návrh silně koreluje s makrojádrovou architekturou. V takovém systému
jsou služby operačního systému z velké části realizovány „běžnými“ procesy, a proto je komunikace mezi
procesy v takových systémech velmi důležitá. Zprostředkovatelem je v takových systémech často samotné
makrojádro.`,`Hardwarové zdroje nejpřirozenějším typem zdroje je hardware: jak výpočetní (procesor, paměť)
tak periferie. V první části kurzu jsme se zabývali virtualizací, která nám umožňuje předstírat, že
zdroje vlastníme ve více instancích, než jich fyzicky existuje. To je sice velmi užitečná a úspěšná
taktika, ale není bez limitů.
Virtualizaci zdroje lze uplatnit jen v situacích, kdy uživatel využívá zdroje jako celek.`,`Rezervace
 Alternativou je rezervace, kterou využijeme v situacích, kdy virtualizaci použít nelze:
• neumožňuje to povaha zdroje (např. pásková jednotka nebo optická zapisovací mechanika) nebo
• nečekané selhání zdroje je nepřípustné (např. by došlo k ohrožení zdraví, života nebo majetku).
Rezervace a virtualizace je vzájemně výlučná – daný zdroj může být virtualizován, ale zároveň nemůže
systém poskytovat možnost rezervovat zaručenou kapacitu – v takovém případě by byl rezervovaný zdroj
(dočasně) nepřístupný pro celý systém. Operační systémy například běžně poskytují možnost
rezervovat pro daný proces nějaké množství fyzické paměti. Takto rezervovanou fyzickou paměť pak
systém nebude používat pro stránky jiných procesů, ani nebude stránky vlastníka z takto rezervované
paměti přesouvat do trvalého úložiště.`,`Rezervace sestává ze dvou operací:
1. samotná rezervace, která od systému vyžádá nějaký zdroj (resp. nějaký počet jednotek zdroje), pro
výlučné použití daným programem (procesem, vláknem, atp.), – po úspěšném provedení rezervace je
zdroj ve vlastnictví příslušného programu,
2.odebrání zdroje, kdy systém odebere zdroj vlastníkovy, aby tento mohl být
vrácen „do oběhu“ (může být předán jinému programu, procesu, vláknu, …).`,`Komunikace
Protože komunikace je zároveň synchronizací, jedná se (možná ne zcela intuitivně)
také o abstraktní zdroj. Novým aspektem je zde skutečnost, že rezervaci a uvolnění musí provést stejný aktér – předání zprávy (resp. obecně informace) může zároveň předat vlastnictví tohoto typu
„zdroje“.
Tento jev je vázán k problému producentů a konzumentů (který, jak jsme zmiňovali výše, s komunikací úzce
souvisí): vytvoření a (zejména) uložení mezivýsledku je formou rezervace – počet mezivýsledků, které
jsme si ochotni pamatovat, je omezené, a jedná se tedy o konečný zdroj, který musí být producentovi
přidělen. Takto zablokovaná instance se ale uvolní tím, že konzument mezivýsledek použije.`,`Odnímatelné zdroje
Implicitně považujeme zdroje za neodnímatelné, ve smyslu, že jediný způsob,
jak může dojít k uvolnění zdroje, je dobrovolné vrácení vlastníkem. U řady zdrojů by mělo odebrání
pravděpodobně fatální následky minimálně pro dotčený program, a někdy také pro dotčený zdroj (3D
tiskárna, optická zapisovací mechanika, fotografická tiskárna, atp.). Uvážíme-li abstraktní zdroje,
násilné odebrání např. zmiňovaného mutex-u jistě nemůže mít pozitivní dopad na další fungování vlákna,
resp. programu jako celku.
Situace u zdrojů virtualizovaných, je obdobná.`,`Podmínky uváznutí - Uváznutí může nastat, jsou-li splněny všechny 4 následující podmínky – přitom
požadovat umožnění každé z nich je samo o sobě přirozené a smysluplné
1. Vzájemné vyloučení
2. čekající vlastník
3. neodnímatelnost
4. kruhové čekání
Tyto podmínky jsou postačující na to aby systém mohl uváznout.`,`Podmínky uváznutí - Uváznutí může nastat, je li splněna alespoň jedna z následující podmínek
1. Vzájemné vyloučení
2. čekající vlastník
3. neodnímatelnost
4. kruhové čekání
Jakákoliv z těchto podmínek je postačující aby systém mohl uváznout.`,`Detekce uváznutí
Jednou možností jak uváznutí detekovat je použít statickou variantu grafu
závislostí zdrojů, který jsme použili k definici globálního uspořádání. V tomto případě obsahuje graf dva
různé typy uzlů: vlákna, nebo jiné potenciální vlastníky a zdroje`,`Zotavení z uváznutí 
Účastní-li se cyklického čekání alespoň jeden odnímatelný zdroj, může
k uváznutí sice dojít, ale na rozdíl od standardní situace se lze z tohoto typu uváznutí relativně lehce 
zotavit a to násilným ukončením vlákna.`,`Vyhýbání uváznutí
Jinou možností jak se s uváznutím vypořádat je technika vyhýbání (angl.
avoidance). Klíčovým prvkem je zamítnout některé požadavky na rezervaci, i když je příslušný zdroj
dostupný, může-li taková rezervace vést k pozdějšímu uváznutí. Stavy, ze kterých může vždy alespoň
jedno vlákno vyváznout a úspěšně skončit (resp. uvolnit zdroje) označíme jako bezpečné.
Asi nejznámějším algoritmem pro vyhýbání uváznutí je tzv. makleřův algoritmus, navržený E. Dijkstrou.`,`Zamezení předrezervací Myšlenka předrezervace je jednoduchá – nesmíme připustit, aby vlákno,
které nějaký zdroj již vlastní, čekalo na nějaký zdroj (je lehce vidět, že systém pak nemůže uváznout).
Rezervace proto připustíme pouze v situaci, kdy žádající vlákno vlastní nějaké zdroje – aby byl systém
prakticky použitelný, musíme ovšem povolit rezervaci několika zdrojů najednou (dávkově).
Potřebuje-li tedy vlákno využít více zdrojů, musí je vyžádat všechny jedinou atomickou akcí (uvolňovat
je ovšem může postupně). Je-li potřeba rezervovat nějaký zdroj v situaci, kdy už dané vlákno nějaký
jiný zdroj vlastní, musí nejprve všechny zdroje uvolnit a opět je rezervovat společně s tím novým.`,`Zamezení virtualizací 
Virtualizací jsme se podrobně zabývali v prvních 4 kapitolách – zdroje,
které jsou virtualizované, používají systém výlučné rezervace, splňují tedy podmínku vzá-
jemného vyloučení a nemohou přímo způsobit uváznutí. Mezi zdroje, které lze virtualizovat, patří
samozřejmě paměť, procesor a pevné úložiště (kapitoly 1–3) a některé periferie – terminál (obrazovka,
tiskárna, atp.) nebo síťová rozhraní (kapitola 4).`,`Zamezení uspořádáním
Zbývá nám podmínka kruhového čekání – tomu lze zamezit například tím,
že se na zdrojích ustaví globální lineární uspořádání, které musí každé vlákno při rezervacích dodržet:
rezervovat lze pouze zdroj, který je v uspořádání menší než dosud největší zdroj vláknu přisouzený.
V takovém systému je statický graf závislostí zdrojů acyklický, k uváznutí tak nemůže dojít.
Podobně jako v případě předrezervace lze řešit i situace, kdy potřebujeme globální pořadí porušit –
vlákno se musí nejprve vzdát některých zdrojů a pak je znovu rezervovat ve správném pořadí.
Tento přístup je poměrně praktický na úrovni jednotlivého programu, nebo jiného uzavřeného systému,
nicméně pro operační systém jako celek se nehodí`]},{section:8,name:"Přerušení a periferie",correct:[`Přerušení je mechanismus, který umožňuje synchronizovat periferii a software –
v abstraktní rovině lze tedy o přerušení uvažovat jako o synchronizačním zařízení.
– přerušení je asymetrické v tom smyslu, že ho může vyvolat pouze periferie, nikoliv operační systém
nebo software obecně. Máme tedy zařízení, které je vždy aktivováno periferií – operační systém je
vždy pasivním účastníkem. Až na tyto rozdíly se přerušení podobá na podmínkovou proměnnou – slouží
k signalizaci nějaké události.`,`Operační systém je samozřejmě program, který musí být vykonáván procesorem – proto
krom periferie a operačního systému musí do hry vstoupit i procesor.
Zejména se může stát, že ve chvíli, kdy přerušení nastane (je periferií vyvoláno), procesor nějaký
program právě vykonává. Navíc je často důležité, aby byla reakce na přerušení dostatečně rychlá – velká
prodleva obsluhy může mít řadu důsledků, od uživatelského nepohodlí až ke ztrátě dat.
Aby se prodleva minimalizovala, přerušení je realizováno preemptivně – cokoliv procesor v danou chvíli
prováděl je pozastaveno, aktuální stav vlákna (hodnoty registrů) je uložen do paměti a je spuštěna
obsluha přerušení.`,`Instance přerušení
Obsluha přerušení je realizována podprogramem, kterého adresa je uvedena ve speciální
tabulce obsluhy přerušení. Chápeme-li přerušení jako synchronizační zařízení (podobné podmínkové
proměnné), je přirozené, že může existovat ve vícero instancích. Protože je ale realizováno hardwarově
na relativně nízké úrovni, těchto instancí je pevný počet (často do 256). Tabulka obsluhy přerušení
má pak pro každou instanci jednu položku, která určí který podprogram je daným přerušením aktivován.
Různé periferie pak typicky používají různé instance přerušení (instance jsou identifikovány číslem).`,`Obslužný podprogram přerušení je (až na speciální prolog a epilog) stejný jako
libovolný jiný – může být třeba zapsaný v jazyce C, a zejména může volat další podprogramy. Proto musí
mít k dispozici jak registry (zabezpečeno uložením stavu procesoru před jeho aktivací), tak zásobník.
Protože na zásobníku, který byl ve chvíli kdy k přerušení došlo, nemusí být volné místo, je obvyklé, že
dojde také k přepnutí zásobníku. Konečně procesor se přepne do režimu jádra (privilegovaného režimu)
– obsluha přerušení má tedy stejný privilegovaný přístup k výpočetním zdrojům jako jakákoliv jiná
součást jádra.`,`Obsluha přerušení
se nápadně podobá na aktivaci vlákna. Zároveň má ale vlastnosti aktivace podprogramu,
protože na rozdíl od vlákna se při ukončení obsluhy stav procesoru neukládá, a v obsluze tedy po jejím
ukončení nelze pokračovat. Můžeme tak obsluhu přerušení chápat jako vlákno s velmi krátkým životem.`,`Obsluha přerušení musí řešit 3 synchronizační scénáře:
1. synchronizace se zbytkem systému, který běží paralelně na jiných procesorových jádrech (včetně
případné obsluhy přerušení tam probíhající) – zde je v nějakém smyslu největší volnost, obvykle lze
použít spinlocky, případně některé nezamykající komunikační zařízení,
2. synchronizace se zbytkem systému, který běžel na stejném procesorovém jádře a byl obsluhou přerušen
– zde spinlock nepřichází v úvahu, protože přerušený podprogram nemůže být spuštěn před ukončením
obsluhy,
3. synchronizace s obsluhou souběžného přerušení vyvolané na stejném procesorovém jádře – spinlock
opět nepřichází v úvahu (ze stejného důvodu), pomůže zde ale speciální jednoúčelové synchronizační
zařízení – zákaz přerušení.
Je-li v platnosti zákaz daného přerušení, obsluha případného příchozího přerušení je odložena až do
chvíle, kdy je přerušení opět povoleno. Jedná se tak o formu vzájemného vyloučení specifickou pro
obslužné podprogramy.`,`Vzpomeňme, že aktivace procesu je relativně drahá operace: musí se změnit mapování paměti.
Proto se při aktivaci obsluhy přerušení proces nepřepíná: běží v adresním prostoru, který byl zrovna
aktivní. To mimo jiné znamená, že struktury, které obsluha využívá, musí být dostupné ve všech virtuálních
adresních prostorech, a navíc musí být dostupné na stejných adresách. Obsluha přerušení tak vytvoří
pomyslné vlákno v procesu, který je právě aktivní.`,`Struktura obsluhy
1. při vstupu do obsluhy přerušení se zakážou další přerušení (může vykonat přímo procesor jako součást
aktivace obsluhy) –
∘ minimálně toho typu, které bylo právě aktivováno, mají-li přerušení priority tak také všechna
přerušení nižších priorit, a v některých systémech úplně všechna přerušení,
∘ tím jsou ochráněny libovolné kritické sekce obsluhy přerušení vůči sobě samé, a také je tím
omezen počet aktivačních záznamů na zásobníku (jinak by hrozilo, že příliš mnoho rychle příchozích
přerušení zásobník vyčerpá),
2. obsluha vykoná minimální nutnou akci, která uvede systém do provozuschopného stavu:
∘ např. vyprázdní mezipaměti, které by jinak přetekly, a provede další akce, které nelze odložit,
∘ minimálně část plánovače je tohoto charakteru (je aktivován obsluhou přerušení časovače – více
později),
∘ libovolné datové struktury, které zde využívá, a které využívá i jiná část jádra, musí být buď
použitelné zcela bez zamykání (např. některé komunikační zařízení probrané v předchozí kapitole,
které nepoužívá zámky), nebo musí být na straně zbytku jádra chráněny zákazem přerušení,
3. naplánuje zbývající akce (obsluha druhé úrovně) na pozdější vykonání – tento krok vyžaduje komunikaci
se zbytkem jádra (někde musí informaci o potřebné návazné akci převzít jiná část jádra, která je
s obsluhou přerušení jinak souběžná).`,`Notifikace
Nejzákladnější formou přerušení je notifikace – upozornění na nějakou obecnou událost.
Tento typ přerušení je obvykle relativně nezávazný v tom smyslu, že zdržení nebo i úplný výpadek obsluhy
systém ani zpracovávaná data nijak neohrozí. `,`DMA
Zařízení s větší šířkou pásma obvykle pro přenos dat používají DMA, tzn. režim, kdy periferie
přesouvá data do operační paměti souběžně s běžným provozem zbytku systému. Tyto přenosy je ale
nutné synchronizovat s operačním systémem (resp. s ovladačem zařízení, který je součástí operačního
systému).
Směrem k periferii je synchronizace realizována zápisem do registru, opačným směrem ale podobný
mechanismus použít nelze – periferie místo toho signalizuje dokončení přenosu přerušením.
`,`Časovač - mainupalce s frontami vláken
Tyto operace musí být:
1. chráněny proti zásahům jiných procesorových jader (obvykle spinlockem, alternativně by mohl být
celý plánovač postaven na komunikačních zařízeních bez zámků; uspání zde nepřichází v úvahu),
2. chráněny proti přerušení (zákazem) a tedy musí být zároveň
3. efektivní (konstantní nebo nejvýše logaritmické v počtu vláken),
4. synchronizace v bodech 1 a 2 musí být velmi důsledně koordinovaná: plánovač nesmí zamknout spinlock,
aniž by byla zároveň zakázána přerušení (jinak by mohlo dojít k uváznutí), ale zároveň nesmí na
spinlock příliš dlouho čekat (protože musí být při čekání zakázaná přerušení, tzn. jedná se o časově
kritickou operaci).
`],incorrect:[`Přerušení je mechanismus, který umožňuje synchronizovat periferii a software –
v abstraktní rovině lze tedy o přerušení uvažovat jako o synchronizačním zařízení.
– přerušení je symetrické v tom smyslu, že ho může vyvolat jak periferie tak i operační systém.
 Máme tedy zařízení, které je vždy aktivováno periferií nebo operačním systémem a ten druhý je
vždy pasivním účastníkem. Až na tyto rozdíly se přerušení podobá na podmínkovou proměnnou – slouží
k signalizaci nějaké události.`,`Operační systém je samozřejmě program, který musí být vykonáván procesorem – proto
krom periferie a operačního systému musí do hry vstoupit i procesor.
Zejména se může stát, že ve chvíli, kdy přerušení nastane (je periferií vyvoláno), procesor nějaký
program právě vykonává. Navíc je často důležité, aby operační systém daný program nepřerušil násilím,
proto je přerušení realizováno postemptivně – cokoliv procesor v danou chvíli prováděl je dokončeno a
až poté se spustí obsluha přerušení.`,`Instance přerušení
Obsluha přerušení je realizována podprogramem, kterého adresa je uvedena ve speciální
registru. Chápeme-li přerušení jako synchronizační zařízení (podobné podmínkové
proměnné), je přirozené, že může existovat ve vícero instancích. Protože je ale realizováno hardwarově
na relativně nízké úrovni, těchto instancí je pevný počet (často do 256).
Podprogram má pak pro každou instanci speciální funkci, tzv. řadič přerušení,
který určí který podprogram je daným přerušením aktivován.
Různé periferie pak typicky používají různé instance přerušení (instance jsou identifikovány číslem).`,`Obslužný podprogram přerušení je (až na speciální prolog a epilog) stejný jako
libovolný jiný až na jednu vyjímku – může být třeba zapsaný v jazyce C, ale nemůže volat další podprogramy, protože jádro je jen jedno.
Proto musí mít k dispozici jak registry (zabezpečeno uložením stavu procesoru před jeho aktivací), tak zásobník.
Protože na zásobníku, který byl ve chvíli kdy k přerušení došlo, nemusí být volné místo, je obvyklé, že
dojde také k přepnutí zásobníku. Konečně procesor se přepne do režimu jádra (privilegovaného režimu)
– obsluha přerušení má tedy stejný privilegovaný přístup k výpočetním zdrojům jako jakákoliv jiná
součást jádra.`,`Obsluha přerušení
se nápadně podobá na aktivaci vlákna. Zároveň má ale vlastnosti aktivace podprogramu,
protože může být aktivována, uložena a případně obnovena v budoucnu. Můžeme tak obsluhu přerušení chápat jako speciální typ vlákna.`,`Obsluha přerušení musí řešit 3 synchronizační scénáře:
1. synchronizace s obsluhou souběžného přerušení vyvolané na stejném procesorovém jádře – zde je v nějakém smyslu největší volnost, obvykle lze
použít spinlocky, případně některé nezamykající komunikační zařízení,
2. synchronizace se zbytkem systému, který běžel na stejném procesorovém jádře a byl obsluhou přerušen
– zde spinlock nepřichází v úvahu, protože přerušený podprogram nemůže být spuštěn před ukončením
obsluhy,
3.  synchronizace se zbytkem systému, který běží paralelně na jiných procesorových jádrech (včetně
případné obsluhy přerušení tam probíhající) – spinlock
opět nepřichází v úvahu (ze stejného důvodu), pomůže zde ale speciální jednoúčelové synchronizační
zařízení – zákaz přerušení.
Je-li v platnosti zákaz daného přerušení, obsluha případného příchozího přerušení je odložena až do
chvíle, kdy je přerušení opět povoleno. Jedná se tak o formu vzájemného vyloučení specifickou pro
obslužné podprogramy.`,`Vzpomeňme, že aktivace procesu je relativně drahá operace: musí se změnit mapování paměti.
Proto se při aktivaci obsluhy přerušení proces nepřepíná: běží v adresním prostoru, který byl zrovna
aktivní. To mimo jiné znamená, že struktury, které obsluha využívá, musí být nějakým způsobem dostupné pro všechny procesory.
Obsluha přerušení tak využívá speciální procesor přímo určený na tuto činnost.`,`Struktura obsluhy
1. při vstupu do obsluhy přerušení se zakážou další přerušení (může vykonat přímo procesor jako součást
aktivace obsluhy) –
∘ minimálně toho typu, které bylo právě aktivováno, mají-li přerušení priority tak také všechna
přerušení nižších priorit, a v některých systémech úplně všechna přerušení,
∘ tím jsou ochráněny libovolné kritické sekce obsluhy přerušení vůči sobě samé, a také je tím
omezen počet aktivačních záznamů na zásobníku (jinak by hrozilo, že příliš mnoho rychle příchozích
přerušení zásobník vyčerpá),
2. obsluha vykoná minimální nutnou akci, která uvede systém do provozuschopného stavu:
∘ např. vyprázdní mezipaměti, které by jinak přetekly, a provede další akce, které nelze odložit,
∘ minimálně část plánovače je tohoto charakteru (je aktivován obsluhou přerušení časovače – více
později),
∘ libovolné datové struktury, které zde využívá, a které využívá i jiná část jádra, musí být 
zamykatelné (spinlockem nebo jiným synchronizačním zařízením) nebo musí být v části jádra, která není chráněny zákazem přerušení,
3. naplánuje zbývající akce (obsluha druhé úrovně) na pozdější vykonání – tento krok vyžaduje komunikaci
se zbytkem jádra (někde musí informaci o potřebné návazné akci převzít jiná část jádra, která je
s obsluhou přerušení jinak souběžná).`,`Notifikace
Nejzákladnější formou přerušení je notifikace – upozornění na nějakou obecnou událost.
Tento typ přerušení je extrémně spolehlivý a nedovoluje chyby, protože zdržení nebo i úplný výpadek obsluhy může
systém nebo data ohrozit. `,`DMA
Zařízení s větší šířkou pásma obvykle pro přenos dat používají DMA, tzn. režim, kdy periferie
přesouvá data do operační paměti souběžně s běžným provozem zbytku systému. Tyto přenosy je ale
nutné synchronizovat s operačním systémem (resp. s ovladačem zařízení, který je součástí operačního
systému).
Směrem k periferii je synchronizace realizována přerušením, opačným směrem ale podobný
mechanismus použít nelze – periferie místo toho zapisuje přímo do registrů procesoru.
`,`Časovač - mainupalce s frontami vláken
Tyto operace musí být:
1. chráněny proti zásahům jiných procesorových jader (obvykle spinlockem, alternativně by mohl být
celý plánovač postaven na komunikačních zařízeních bez zámků; uspání zde nepřichází v úvahu),
2. chráněny proti přerušení (zákazem) a tedy musí být zároveň
3. efektivní (konstantní nebo nejvýše logaritmické v počtu vláken),
4. synchronizace v bodech 1 a 2 musí být velmi důsledně koordinovaná: plánovač musí zamknout spinlock,
a zároveň musí být platný zakáz přerušení (jinak by mohlo dojít k uváznutí), ale zároveň nesmí na
spinlock příliš dlouho čekat (protože musí být při čekání zakázaná přerušení, tzn. jedná se o časově
kritickou operaci).
`]}],Oo=[{uuid:"e42328b0-abcd-4859-b969-112b81be8d32",title:"Část 1: Virtualizace paměti",statements:[{correct:"Virtuální adresní prostor umožňuje izolaci procesů a ochranu paměti.",incorrect:"Virtuální adresní prostor vždy odpovídá fyzickému adresnímu prostoru.",uuid:"e42328b0-abcd-4859-b969-112b81be8d31"},{correct:"Překlad adres mezi virtuálním a fyzickým prostorem je řízen jednotkou správy paměti (MMU).",incorrect:"Překlad adres mezi virtuálním a fyzickým prostorem je realizován operačním systémem pomocí softwarových tabulek.",uuid:"9d678bdb-54a0-4e02-bc05-5806c2864e67"},{correct:"Stránkování umožňuje přidělit více paměti, než kolik je fyzicky dostupné.",incorrect:"Stránkování zajišťuje, že proces nikdy nepřekročí svou přidělenou fyzickou paměť.",uuid:"c3328f73-5eaf-4d64-a641-bc7374c5e9c3"},{correct:"Při překladu virtuální adresy se využívají stránkové tabulky uložené v operační paměti.",incorrect:"Virtuální adresy jsou přímo interpretovány jako fyzické adresy, takže stránkové tabulky nejsou nutné.",uuid:"cfae8517-f6c6-4017-9866-436fb313b857"},{correct:"Každý proces má obvykle svůj vlastní virtuální adresní prostor.",incorrect:"Všechny procesy v operačním systému sdílejí stejný virtuální adresní prostor.",uuid:"2643f5be-3231-4572-ac40-75bdd96cd38b"},{correct:"Výpadek stránky nastane, pokud proces přistupuje k neplatné nebo odložené stránce.",incorrect:"Výpadek stránky nastane pouze při pokusu o přístup k chráněné oblasti operačního systému.",uuid:"6e1a2e33-d950-4679-aa84-51ccd692eb1a"},{correct:"Při přepnutí procesu se změní aktivní stránková tabulka uložená v procesoru.",incorrect:"Při přepnutí procesu zůstává stránková tabulka stejná a sdílená mezi procesy.",uuid:"e1561d3b-90cb-474a-bad4-74d945cd615e"},{correct:"Externí stránkování umožňuje odkládání neaktivních stránek na disk.",incorrect:"Externí stránkování omezuje procesy na používání pouze fyzické paměti RAM.",uuid:"ec0dd4c9-4765-4eff-8665-e4fc6f78eded"},{correct:"Copy-on-write umožňuje sdílení stránek mezi procesy, dokud nedojde k zápisu.",incorrect:"Copy-on-write znamená, že každý proces vždy obdrží svou unikátní kopii paměti.",uuid:"4fe52475-7933-4e82-831b-879234ccf059"},{correct:"Virtuální adresní prostor může obsahovat stránky, které nejsou namapovány na fyzickou paměť.",incorrect:"Každá virtuální adresa musí mít odpovídající fyzickou paměťovou buňku.",uuid:"a0d3074e-7bb1-4ffa-afe6-dcda74ea49db"},{correct:"Stránkové tabulky mohou být vícestupňové pro efektivní správu velkých adresních prostorů.",incorrect:"Stránkové tabulky jsou vždy jednorozměrné a obsahují záznamy pro každou virtuální adresu.",uuid:"aae03174-bb16-4e1f-8dc1-19bb280b7f52"},{correct:"Virtuální paměť umožňuje bezpečné sdílení kódu mezi procesy.",incorrect:"Virtuální paměť vždy izoluje kód mezi procesy, takže sdílení není možné.",uuid:"dc45aa1f-ee46-4a59-8159-18bd525e2855"},{correct:"Procesor používá TLB (Translation Lookaside Buffer) k urychlení překladu adres.",incorrect:"Procesor vždy provádí úplný překlad adres pomocí stránkových tabulek v paměti.",uuid:"66bb670c-cfe0-4bcc-9d85-70bc313d2dd9"},{correct:"Při mapování souborů do paměti se jejich obsah zpřístupní jako běžná paměť.",incorrect:"Mapování souborů do paměti znamená jejich kopírování do vyhrazené paměti RAM.",uuid:"d2c70d50-8282-4340-8e6c-13b617076ba0"},{correct:"Líné načítání umožňuje načítat části programu až v okamžiku potřeby.",incorrect:"Líné načítání znamená, že celý program je okamžitě nahrán do paměti RAM.",uuid:"bd28cfda-f2b6-4e23-a435-dfdc0b9f755d"},{correct:"Každý proces má omezený přístup k fyzické paměti, definovaný stránkovými tabulkami.",incorrect:"Každý proces může přistupovat k libovolné části fyzické paměti bez omezení.",uuid:"8106c5a9-e088-4a80-81a4-340e3d8e0233"},{correct:"Výpadek stránky může být vyřešen buď načtením stránky z disku, nebo ukončením procesu.",incorrect:"Výpadek stránky vždy způsobí okamžité ukončení procesu.",uuid:"3b13884f-51da-4bc5-81fb-df5b234eae19"},{correct:"Moderní operační systémy umožňují sdílení paměti mezi procesy pomocí mapovaných souborů.",incorrect:"Moderní operační systémy nepodporují sdílení paměti mezi procesy kvůli bezpečnostním rizikům.",uuid:"e1136c05-a361-4a25-8d43-4e29f707bfa6"},{correct:"Stránka může být namapována na více virtuálních adres v různých procesech.",incorrect:"Každá stránka paměti může být přiřazena pouze jedné virtuální adrese.",uuid:"e90f22d4-0b4c-4ad8-827b-8e93097cc61a"},{correct:"Změna stránkové tabulky může způsobit zneplatnění TLB, což zpomaluje výkon.",incorrect:"Změna stránkové tabulky nemá žádný vliv na výkon systému.",uuid:"de41fb95-921b-4371-8ad9-c79a5733e6e5"},{correct:"Virtuální adresa musí být vždy přeložena hardwarovou jednotkou správy paměti na fyzickou adresu.",incorrect:"Virtuální adresa může být přímo využita jako platná fyzická adresa bez jakéhokoli překladu.",uuid:"5fa3e78c-6aaf-444c-b949-d3e06ab3c9e0"},{correct:"Proces s více vlákny sdílí stejný virtuální adresní prostor pro všechna svá vlákna.",incorrect:"Proces s více vlákny má pro každé vlákno zcela oddělený virtuální adresní prostor.",uuid:"abe699fb-248d-4941-95f8-b51dac2e98d1"},{correct:"Stránka velikosti 4 KiB vyžaduje při dvouúrovňovém překladu čtení dvou záznamů stránkových tabulek.",incorrect:"Stránka velikosti 4 KiB potřebuje při dvouúrovňovém překladu pouze jediný záznam stránkové tabulky.",uuid:"cd92eee4-854b-457d-82a5-dd2a984ca589"},{correct:"Jednotka správy paměti využívá TLB k urychlení opakovaných překladů virtuálních adres.",incorrect:"Jednotka správy paměti zpracovává každý překlad adresy vždy bez využití jakékoliv vyrovnávací paměti.",uuid:"e9085dbc-981e-406d-97ff-df59037e27e7"},{correct:"Externí stránkování umožňuje operačnímu systému přesunout nevyužívané stránky paměti do pomalejšího úložiště.",incorrect:"Externí stránkování vyžaduje, aby všechny stránky procesu zůstávaly trvale v rychlé operační paměti.",uuid:"b4d10c16-6b78-4b9f-89eb-d57a6b4113c9"},{correct:"Mechanismus copy on write zabraňuje okamžitému duplikování dat při vzniku nového procesu.",incorrect:"Mechanismus copy on write ihned kopíruje všechny stránky procesu nezávisle na požadavcích zápisu.",uuid:"fc7038a1-3697-48c1-944d-92d6c73a8a6f"},{correct:"Proces může mít více vláken, která společně využívají kód i globální datové struktury.",incorrect:"Proces se skládá z mnoha vláken, ale každé vlákno používá zcela jiný kód a data.",uuid:"740824b2-0d97-4b4a-b9e4-c6fe042a4d02"},{correct:"Fyzické adresy ve starších systémech x86 mohou odkazovat nejen na RAM, ale i na periferní zařízení.",incorrect:"Fyzické adresy v systémech x86 jsou vždy mapovány pouze na operační paměť, nikoli na periferní zařízení.",uuid:"daef6362-f7f6-44d4-9476-083a2991598b"},{correct:"Stránky pro kód běžně sdílejí více procesů, pokud jsou označeny jako pouze pro čtení.",incorrect:"Stránky pro kód jsou vždy privátní a nemohou být nikdy sdíleny mezi odlišnými procesy.",uuid:"2e2b565e-632d-482c-9d99-95f058e7c233"},{correct:"Víceúrovňové stránkové tabulky šetří paměť označením nevyužívaných segmentů jako nepřítomné bez alokace dalšího prostoru.",incorrect:"Víceúrovňové stránkové tabulky pokaždé alokují všechny nižší úrovně tabulek i pro nevyužité virtuální adresy.",uuid:"ca6e8cab-28a3-407b-82ce-2e69b229440b"},{correct:"Změna registru ukazujícího na tabulku první úrovně je klíčová při přepínání mezi procesy.",incorrect:"Při přepínání procesů zůstává vždy stejný registr ukazující na tabulku první úrovně.",uuid:"56da73d3-0ace-40c4-9754-b521ed3b1e5a"},{correct:"Mapování dvou virtuálních adres na stejný rámec umožňuje vzájemnou komunikaci procesů prostřednictvím sdílené paměti.",incorrect:"Mapování dvou virtuálních adres na stejný rámec znemožňuje procesům jakoukoli vzájemnou komunikaci.",uuid:"1df981c2-d9e2-4187-98c9-810d07cd8335"},{correct:"Stránka označená příznakem pouze pro čtení může být následně kopírována při pokusu o zápis.",incorrect:"Stránka označená příznakem pouze pro čtení vždy brání zápisu bez možnosti pozdějšího překopírování dat.",uuid:"3e2eb134-9a06-45bd-9cea-bf486e046d2a"},{correct:"Zneplatnění TLB při přepnutí procesu dočasně zpomaluje překlad adres, dokud se neobnoví potřebné záznamy.",incorrect:"Zneplatnění TLB nikdy neovlivňuje výkon překladů adres, protože se okamžitě obnoví všechny potřebné položky.",uuid:"9162bcbc-dbb5-4194-a3b3-3276bb919fd4"},{correct:"Líné načítání při startu programu načítá stránky z disku až teprve při jejich prvním použití.",incorrect:"Líné načítání vždy předem načte celý spustitelný soubor do operační paměti bez ohledu na potřebu.",uuid:"3bfcfe1d-968d-4379-96bd-da30b5b01157"},{correct:"Přístup k paměti pomocí instrukcí ld a st lze rozložit na sekvenci jednoduchých čtení a zápisů.",incorrect:"Instrukce ld a st nelze nikdy nahradit sekvencí elementárních operací čtení a zápisu registrů.",uuid:"df1628db-d585-471f-8e74-c0f25e5a06cd"},{correct:"Větší datové struktury leží v paměti na sousedních adresách, pokud nezasahují do neplatného prostoru.",incorrect:"Větší datové struktury se běžně ukládají roztříštěně napříč nesouvisejícími oblastmi virtuální paměti.",uuid:"ce998f62-d772-4e77-a915-5eba83468ee9"},{correct:"Některé stránky v paměti procesu mohou reprezentovat paměť periferních zařízení, místo klasické RAM.",incorrect:"Stránky v paměti procesu jsou vždy mapovány výhradně do oblastí klasické RAM a nikde jinde.",uuid:"ee2014ee-c292-4b00-97e6-dd4c0833ea29"},{correct:"Virtualizace paměti dovoluje spustit několik procesů se stejnými virtuálními adresami, ale odlišnými fyzickými umístěními.",incorrect:"Virtualizace paměti předepisuje, že žádné dva procesy nemohou sdílet stejné číselné hodnoty virtuálních adres.",uuid:"47445754-da05-4893-9cf1-0c78bbfcc020"},{correct:"Při mapování datového souboru do paměti se obsah stránek načítá z disku až při jejich použití.",incorrect:"Mapování souboru do paměti vždy vyžaduje jednorázové zkopírování veškerého obsahu do virtuálního adresního prostoru.",uuid:"dccc7063-1ed4-4008-a16e-c2d6715c6d88"}]},{uuid:"e42328b0-abcd-4859-b969-112b81be8d33",title:"Část 2: Virtualizace procesoru",statements:[{correct:"Virtualizace procesoru umožňuje více vláken sdílet jeden fyzický procesor bez ztráty iluze samostatného běhu.",incorrect:"Virtualizace procesoru vylučuje současný běh více vláken a vyžaduje oddělené procesory pro každé vlákno.",uuid:"6ec2a08c-f79f-484f-b477-cea5fa3380b7"},{correct:"Instrukce řízení toku určují, kam se posune programový čítač, což řídí posloupnost vykonávaných příkazů.",incorrect:"Instrukce řízení toku mění velikost paměti programu a nemají vliv na pořadí prováděných příkazů.",uuid:"e44e311a-2c7c-414d-81da-23c0e6abdf6d"},{correct:"Registr programového čítače obsahuje virtuální adresu aktuálně vykonávané instrukce a není přístupný běžnými aritmetickými příkazy.",incorrect:"Registr programového čítače uchovává vždy fyzickou adresu a lze do něj zapisovat běžnými instrukcemi add.",uuid:"c1367c22-2eab-4f6d-bb89-08aa0863b088"},{correct:"Aritmetický registr je pojmenován přímo v instrukci, zatímco paměťovou adresu lze vypočítat dynamicky.",incorrect:"Aritmetický registr se indexuje podobně jako paměťová buňka a není pevně pojmenován v instrukci.",uuid:"92dc90fb-ff7e-4c59-85e5-9af2b78dddbc"},{correct:"Instrukce definujeme jako elementární příkazy, které nelze dělit na menší strojově proveditelné části.",incorrect:"Instrukce lze svévolně rozkládat na menší úseky, které procesor vykonává nezávisle na kódování.",uuid:"cf3b3c41-b96c-42ca-acbb-4d5a81905986"},{correct:"Rodina instrukcí add zahrnuje varianty s různými zdrojovými registry a rozdílnými cíli pro výsledek operace.",incorrect:"Všechny instrukce add používají vždy stejný zdrojový registr a vždy ukládají výsledek jen do rv.",uuid:"0aa1fcd1-b2ca-4fc8-8c22-28f965e4db5e"},{correct:"Efekt instrukce spočívá ve změně stavu procesoru a případně paměti, což posouvá výpočet o krok dál.",incorrect:"Efekt libovolné instrukce nikdy nezasahuje do stavu procesoru ani nemůže ovlivnit obsah paměti.",uuid:"09cc6202-9ec8-4024-b30d-e19b04964f1f"},{correct:"Program se většinou provádí lineárně od nižších k vyšším adresám, pokud jej nepřeruší instrukce skoku.",incorrect:"Program se vždy provádí striktně vzestupně bez jakékoliv možnosti návratu k dřívějším instrukcím.",uuid:"18148afd-1ea4-44a7-8c33-67a3d435afd4"},{correct:"Zásobník slouží k izolaci lokálních dat podprogramu a k uložení stavu pro návrat do volajícího kódu.",incorrect:"Zásobník obsahuje globální proměnné a nesouvisí s uchováváním návratové adresy podprogramu.",uuid:"68730ce7-76d9-45e6-b6ca-c4bb116a8270"},{correct:"Aktivace podprogramu obvykle posune ukazatel zásobníku a uloží registr pro návrat do vyššího rámce.",incorrect:"Aktivace podprogramu nezmění ukazatel zásobníku a nikdy neukládá návratovou adresu ani žádné registry.",uuid:"5e4acccc-6f08-4f4c-b26e-5a6e801b6ac8"},{correct:"Každý aktivační záznam na zásobníku odpovídá právě jedné běžící instanci podprogramu včetně jeho lokálních proměnných.",incorrect:"Aktivační záznamy na zásobníku nejsou spojeny s podprogramy, takže jeden záznam může pokrývat víc funkcí zároveň.",uuid:"3fada798-bbcb-4571-b08b-a83b474cc9bf"},{correct:"Stav procesoru tvoří aritmetické registry, programový čítač a ukazatel zásobníku, které se mění vykonáváním instrukcí.",incorrect:"Stav procesoru zahrnuje pouze obsah operační paměti a nezávisí na hodnotách registrů nebo čítače instrukcí.",uuid:"2b22d36f-36eb-4239-acbb-a58c6a66d6d9"},{correct:"Pokud do adresního prostoru zasahují externí aktéři, výpočet už není deterministicky řízen jen počátečním stavem a kódem.",incorrect:"Adresní prostor programu nemůže nikdy měnit nic zvenčí, proto je průběh vlákna vždy plně předvídatelný.",uuid:"135db0b0-d689-4417-bb3b-92f47efc1c36"},{correct:"Externí událost, jako zápis do sdílené paměti, může změnit průběh vlákna čekajícího v synchronizační smyčce.",incorrect:"Vlákno nikdy neovlivní událost zapsaná jiným procesem do sdílené paměti, takže synchronizace není nutná.",uuid:"4ff186bc-36b2-4fe4-9dbd-8d459c9d4d4a"},{correct:"Vlákno je posloupnost stavů, kterou vyvolá činnost jediného procesoru řízeného jedním programem v rámci adresního prostoru.",incorrect:"Vlákno může být řízeno libovolným počtem programů současně a sdílí vždy víc fyzických procesorů najednou.",uuid:"4ae0aa65-9365-4da4-ad65-7ea7dd037272"},{correct:"Logický procesor má stav definovaný hodnotami registrů a vykonává instrukce, které tento stav mění.",incorrect:"Logický procesor neobsahuje žádné registry a nemůže samostatně provádět instrukce bez součinnosti jiného vlákna.",uuid:"c4837bfa-21cf-4fc3-8074-72b148ab6935"},{correct:"K přepnutí vlákna je nutné uložit aktuální hodnoty registrů a později je obnovit v novém vlákně.",incorrect:"Přepnutí vlákna nevyžaduje zachování registrů, protože nový stav vzniká vždy z náhodných hodnot paměti.",uuid:"7adad147-a1d8-431c-ba40-bdbe6f3371b8"},{correct:"Obnovení programového čítače při přepnutí vláken je nejproblematičtější, protože vede k okamžité ztrátě kontroly operačního systému.",incorrect:"Obnovení programového čítače při přepnutí vláken je nejjednodušší krok, protože jej lze měnit běžným příkazem add.",uuid:"81a163d3-2eaa-45d7-b9fc-66a036b7a867"},{correct:"Plánovač rozhoduje, které vlákno dostane procesor, a může aktivní vlákno kdykoliv preemptivně přerušit.",incorrect:"Plánovač nemá pravomoc přerušit běžící vlákno, protože veškeré přepnutí se děje vždy s jeho souhlasem.",uuid:"fd85a5f6-0b7c-4411-b640-9485944afc49"},{correct:"Preemptivní plánovač využívá hardwarový časovač, jenž pravidelným přerušením umožňuje systému odebírat procesor aktivnímu vláknu.",incorrect:"Preemptivní plánovač nepoužívá časovač a spolehne se výhradně na dobrovolné uvolnění procesoru běžícím vláknem.",uuid:"469d27d6-2d3f-4eef-83f1-39710d2bca86"},{correct:"Plánovač se snaží vybalancovat propustnost a latenci, aby se vlákna rychle střídala a zároveň nezdržovala přepínáním.",incorrect:"Maximalizace propustnosti vyžaduje extrémně časté střídání vláken, které zcela eliminuje odezvu interaktivních úloh.",uuid:"1024fb93-94f3-4b47-8eae-6d1e275bb98f"},{correct:"Vlákno v stavu čekání na událost se probudí, jakmile nastane externí podmínka, o kterou žádalo.",incorrect:"Vlákno označené jako čekající na událost lze vzbudit libovolnou instrukcí add prováděnou v jiném vlákně.",uuid:"7a934e58-5339-4b83-bacd-1b1bc5661c13"},{correct:"Vlákno čekající na procesor je připraveno k běhu, ale dosud mu nebyl znovu přidělen žádný fyzický procesor.",incorrect:"Vlákno čekající na procesor je vždy nutně zablokováno kvůli nedostupným datům a nemůže pokračovat ve výpočtu.",uuid:"54c18aeb-dd23-45a5-b7db-e778acd95303"},{correct:"Fronty úloh slouží k řazení vláken čekajících na přidělení procesoru podle priority nebo zásady FIFO.",incorrect:"Fronty úloh nelze využít k plánování vláken, protože všechny procesory vždy přijímají libovolné vlákno přímo.",uuid:"24e9dd50-0a1b-427d-b2a9-217ac5a541f3"},{correct:"Lokální fronty ke konkrétním procesorům mohou snižovat migrace vláken, ale znesnadňují rovnoměrné vytížení všech CPU.",incorrect:"Použití jediného globálního frontu zcela eliminuje migraci vláken a zaručuje každému procesoru stejnou zátěž.",uuid:"fa00031d-df4c-4597-a070-fb05348b8814"},{correct:"Afinita vláken k určitému procesoru zlepšuje výkon díky menšímu přesunu cache, ale může snížit využití zdrojů.",incorrect:"Afinita vláken k jednomu procesoru neovlivňuje práci cache a nezakazuje jejich přesun mezi různými CPU.",uuid:"9939a47e-9e2a-4d27-b45b-928d5d49c0c4"},{correct:"Kompromis mezi afinitou a rozložením zátěže řeší plánovače, které kradou práci z cizích front při nevyužitém procesoru.",incorrect:"Plánovače obvykle ignorují afinitu vláken a nedokáží přesunout úlohy z přeplněného frontu na procesor bez zátěže.",uuid:"32244408-37c0-4770-a8af-c9fc1e5a077b"},{correct:"Prioritní plánování umožňuje interaktivním vláknům předbíhat ostatní, aby získala nižší latenci při reakcích na uživatele.",incorrect:"Prioritní plánování nutně zvyšuje latenci interaktivních vláken a upřednostňuje vždy výpočetně nejnáročnější úlohy.",uuid:"465a8494-b167-4378-8b5c-00a387b3fbf0"},{correct:"Dynamická úprava priority zabraňuje hladovění vláken s nízkou prioritou, protože časem získají vyšší preferenci.",incorrect:"Dynamická úprava priority je zbytečná, protože vlákna s nízkou prioritou mohou být trvale odsunuta bez důsledků.",uuid:"a89fda37-e810-4786-b1a1-2b23d705dde9"},{correct:"Férové plánování se snaží každému vláknu přidělit stejnou výpočetní dobu, což vede k vyváženému sdílení procesoru.",incorrect:"Férové plánování vždy upřednostňuje vlákna s nejdelší historií běhu a snižuje prioritu nově spuštěným úlohám.",uuid:"b2be1f12-2bb9-4d79-930c-0b1147523108"},{correct:"Inverzní hodnota dosud spotřebovaného času může určovat prioritu vlákna v systému férového plánování.",incorrect:"Férové plánování ignoruje dosud spotřebovaný čas, takže vlákna s dlouhým během mají vždy nejvyšší prioritu.",uuid:"2883455f-6fae-4234-a000-5cecaf6e6128"},{correct:"Plánovací kvantum omezuje, jak dlouho může vlákno nepřetržitě běžet, čímž zabraňuje blokaci ostatních úloh.",incorrect:"Plánovací kvantum nesouvisí s dobou běhu vlákna a nijak neovlivňuje přepínání mezi různými procesy.",uuid:"12bff9d4-8358-4276-9680-162d9967de67"},{correct:"V moderních preemptivních systémech vlákno nebývá odstavováno dobrovolně, ale je přerušeno časovačem nebo jinou událostí.",incorrect:"V preemptivních systémech se vlákno vždy vypíná samo, protože procesor neumí běžící vlákno přerušit.",uuid:"73d983c7-10f2-4bf5-89ba-a059e31dcf32"},{correct:"Pokud vlákno čeká na vstup z periférie, operační systém jej uspí a probudí, jakmile dorazí požadovaná data.",incorrect:"Vlákno čekající na periférii nesmí být uspáno a musí neustále aktivně zjišťovat dostupnost dat v paměti.",uuid:"a91c4fea-8aa7-4717-94e1-6a9bec59927a"},{correct:"Při soutěži o vzácný zdroj je probuzeno jen první vlákno z čekací fronty, aby nedošlo k opětovnému blokování.",incorrect:"Při uvolnění vzácného zdroje se probouzejí současně všechna čekající vlákna, čímž se rychleji vyřeší konflikt.",uuid:"ecc82b0d-1330-4783-be2f-879c060b64b0"},{correct:"Krátké plánovací kvantum zlepšuje reakční dobu interaktivních aplikací, ale může snižovat celkovou propustnost procesoru.",incorrect:"Krátké plánovací kvantum maximalizuje propustnost výpočetních úloh a neomezuje vůbec odezvu interaktivních programů.",uuid:"d934ad18-16d5-4e76-8d2f-703a81fc0296"},{correct:"Synchronizace umožňuje koordinovat sdílení společných dat mezi více vlákny, čímž zabraňuje konfliktům a nekonzistentním stavům.",incorrect:"Synchronizace slouží výhradně k zvyšování výkonu a nebrání konfliktům při manipulaci se sdílenými proměnnými.",uuid:"403dc206-9d39-49f1-b649-f0c644cca02b"},{correct:"Podmíněné skoky používají stavový příznak nebo registr ke změně adresy v programovém čítači a ovlivňují tok programu.",incorrect:"Podmíněné skoky nelze provádět na základě žádných registrů ani stavových příznaků, takže vždy pokračují sekvenčně.",uuid:"39a29259-1081-471c-9ada-727957ea4399"},{correct:"Podprogram může mít rekurzivní volání, která vyžadují opakované vytváření nových aktivačních záznamů na zásobníku.",incorrect:"Podprogram s rekurzí používá vždy pouze jeden aktivační záznam, protože další volání nepřepisují stav zásobníku.",uuid:"a586beb5-9961-4caa-b5ab-f89a1d189a6d"},{correct:"Více vláken v jednom procesu může sdílet adresní prostor, ale mají oddělené zásobníky a stav procesoru.",incorrect:"Vlákna uvnitř stejného procesu musejí používat jediný společný zásobník i identické registry pro sčítání.",uuid:"86ab3f8b-0211-46b9-b799-3f0f5998cd63"}]}];function Uj(){return z.jsxs(z.Fragment,{children:[z.jsxs("p",{className:"font-light mb-4 text-sm ",children:["Tato aplikace slouží na procvičení znalostí z předmětu PB152.",z.jsx("br",{})," Akékoliv chyby, připomínky, nápady na vylepšení, nebo návrhy na nové otázky můžete nahlásit na"," ",z.jsxs("a",{href:"https://discord.gg/ztabDQ4jNv",className:"underline hover:text-blue-500",target:"_blank",children:["Discord",z.jsx(jo,{className:"w-3 h-3 inline self-center"})]})]}),z.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[1fr_auto_1fr] gap-4",children:[z.jsxs("div",{className:"flex flex-col gap-1",children:[z.jsx("h2",{className:"text-xl",children:"Zápočet"}),z.jsx(po,{to:"/credit",children:z.jsx(Cn,{className:"w-full",children:"Všechny části"})}),Oo.map((e,n)=>z.jsx(po,{to:`/credit/${e.uuid}`,children:z.jsx(Cn,{variant:"outline",className:"w-full",children:e.title},n)},n))]}),z.jsx("div",{className:"h-[0.1rem] md:h-full w-full md:w-[0.1rem] bg-border rounded-full"}),z.jsxs("div",{className:"flex flex-col gap-1",children:[z.jsx("h2",{className:"text-xl",children:"Zkouška"}),z.jsx(po,{to:"/exam",children:z.jsx(Cn,{className:"w-full",children:"Všechny části"})}),Dr.map((e,n)=>z.jsx(po,{to:`/exam/${e.section}`,children:z.jsxs(Cn,{variant:"outline",className:"w-full",children:["Část ",e.section,": ",e.name]},n)},n))]})]})]})}function Bj({uuid:e}){const n=Oo.find(t=>t.uuid===e);return n?[n,null]:[null,new Error("Section not found")]}function Wj(){return[Oo,null]}function Kj({uuid:e}){const n=Oo.map(t=>t.statements).flat().find(t=>t.uuid===e);return n?[n,null]:[null,new Error("Statement not found")]}function Hj(){return[Oo.map(n=>n.statements).flat(),null]}function Zj({count:e=5,sections:n}){const o=Oo.filter(a=>n?n.includes(a.uuid):!0).map(a=>a.statements).flat();return o.length<e?[null,new Error("Not enough statements")]:[o.sort(()=>Math.random()-.5).slice(0,e),null]}const ml={getSingleSection:Bj,getAllSections:Wj,getSingleStatement:Kj,getAllStatements:Hj,getRandomStatements:Zj};function ht(){return ht=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)({}).hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ht.apply(null,arguments)}function Jj(e,n){typeof e=="function"?e(n):e!=null&&(e.current=n)}function Pm(...e){return n=>e.forEach(t=>Jj(t,n))}function Cm(...e){return c.useCallback(Pm(...e),e)}function Qj(e,n=[]){let t=[];function o(a,i){const s=c.createContext(i),l=t.length;t=[...t,i];function u(p){const{scope:v,children:j,...b}=p,f=(v==null?void 0:v[e][l])||s,w=c.useMemo(()=>b,Object.values(b));return c.createElement(f.Provider,{value:w},j)}function d(p,v){const j=(v==null?void 0:v[e][l])||s,b=c.useContext(j);if(b)return b;if(i!==void 0)return i;throw new Error(`\`${p}\` must be used within \`${a}\``)}return u.displayName=a+"Provider",[u,d]}const r=()=>{const a=t.map(i=>c.createContext(i));return function(s){const l=(s==null?void 0:s[e])||a;return c.useMemo(()=>({[`__scope${e}`]:{...s,[e]:l}}),[s,l])}};return r.scopeName=e,[o,Gj(r,...n)]}function Gj(...e){const n=e[0];if(e.length===1)return n;const t=()=>{const o=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(a){const i=o.reduce((s,{useScope:l,scopeName:u})=>{const p=l(a)[`__scope${u}`];return{...s,...p}},{});return c.useMemo(()=>({[`__scope${n.scopeName}`]:i}),[i])}};return t.scopeName=n.scopeName,t}function bd(e,n,{checkForDefaultPrevented:t=!0}={}){return function(r){if(e==null||e(r),t===!1||!r.defaultPrevented)return n==null?void 0:n(r)}}function Rm(e){const n=c.useRef(e);return c.useEffect(()=>{n.current=e}),c.useMemo(()=>(...t)=>{var o;return(o=n.current)===null||o===void 0?void 0:o.call(n,...t)},[])}function Xj({prop:e,defaultProp:n,onChange:t=()=>{}}){const[o,r]=Yj({defaultProp:n,onChange:t}),a=e!==void 0,i=a?e:o,s=Rm(t),l=c.useCallback(u=>{if(a){const p=typeof u=="function"?u(e):u;p!==e&&s(p)}else r(u)},[a,e,r,s]);return[i,l]}function Yj({defaultProp:e,onChange:n}){const t=c.useState(e),[o]=t,r=c.useRef(o),a=Rm(n);return c.useEffect(()=>{r.current!==o&&(a(o),r.current=o)},[o,r,a]),t}function qj(e){const n=c.useRef({value:e,previous:e});return c.useMemo(()=>(n.current.value!==e&&(n.current.previous=n.current.value,n.current.value=e),n.current.previous),[e])}const kl=globalThis!=null&&globalThis.document?c.useLayoutEffect:()=>{};function eb(e){const[n,t]=c.useState(void 0);return kl(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});const o=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const a=r[0];let i,s;if("borderBoxSize"in a){const l=a.borderBoxSize,u=Array.isArray(l)?l[0]:l;i=u.inlineSize,s=u.blockSize}else i=e.offsetWidth,s=e.offsetHeight;t({width:i,height:s})});return o.observe(e,{box:"border-box"}),()=>o.unobserve(e)}else t(void 0)},[e]),n}function nb(e,n){return c.useReducer((t,o)=>{const r=n[t][o];return r??t},e)}const Nm=e=>{const{present:n,children:t}=e,o=tb(n),r=typeof t=="function"?t({present:o.isPresent}):c.Children.only(t),a=Cm(o.ref,r.ref);return typeof t=="function"||o.isPresent?c.cloneElement(r,{ref:a}):null};Nm.displayName="Presence";function tb(e){const[n,t]=c.useState(),o=c.useRef({}),r=c.useRef(e),a=c.useRef("none"),i=e?"mounted":"unmounted",[s,l]=nb(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return c.useEffect(()=>{const u=pa(o.current);a.current=s==="mounted"?u:"none"},[s]),kl(()=>{const u=o.current,d=r.current;if(d!==e){const v=a.current,j=pa(u);e?l("MOUNT"):j==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&v!==j?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,l]),kl(()=>{if(n){const u=p=>{const j=pa(o.current).includes(p.animationName);p.target===n&&j&&Vr.flushSync(()=>l("ANIMATION_END"))},d=p=>{p.target===n&&(a.current=pa(o.current))};return n.addEventListener("animationstart",d),n.addEventListener("animationcancel",u),n.addEventListener("animationend",u),()=>{n.removeEventListener("animationstart",d),n.removeEventListener("animationcancel",u),n.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[n,l]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:c.useCallback(u=>{u&&(o.current=getComputedStyle(u)),t(u)},[])}}function pa(e){return(e==null?void 0:e.animationName)||"none"}const Tm=c.forwardRef((e,n)=>{const{children:t,...o}=e,r=c.Children.toArray(t),a=r.find(rb);if(a){const i=a.props.children,s=r.map(l=>l===a?c.Children.count(i)>1?c.Children.only(null):c.isValidElement(i)?i.props.children:null:l);return c.createElement(fl,ht({},o,{ref:n}),c.isValidElement(i)?c.cloneElement(i,void 0,s):null)}return c.createElement(fl,ht({},o,{ref:n}),t)});Tm.displayName="Slot";const fl=c.forwardRef((e,n)=>{const{children:t,...o}=e;return c.isValidElement(t)?c.cloneElement(t,{...ab(o,t.props),ref:n?Pm(n,t.ref):t.ref}):c.Children.count(t)>1?c.Children.only(null):null});fl.displayName="SlotClone";const ob=({children:e})=>c.createElement(c.Fragment,null,e);function rb(e){return c.isValidElement(e)&&e.type===ob}function ab(e,n){const t={...n};for(const o in n){const r=e[o],a=n[o];/^on[A-Z]/.test(o)?r&&a?t[o]=(...s)=>{a(...s),r(...s)}:r&&(t[o]=r):o==="style"?t[o]={...r,...a}:o==="className"&&(t[o]=[r,a].filter(Boolean).join(" "))}return{...e,...t}}const ib=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Mm=ib.reduce((e,n)=>{const t=c.forwardRef((o,r)=>{const{asChild:a,...i}=o,s=a?Tm:n;return c.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),c.createElement(s,ht({},i,{ref:r}))});return t.displayName=`Primitive.${n}`,{...e,[n]:t}},{}),_m="Checkbox",[sb,k0]=Qj(_m),[lb,ub]=sb(_m),cb=c.forwardRef((e,n)=>{const{__scopeCheckbox:t,name:o,checked:r,defaultChecked:a,required:i,disabled:s,value:l="on",onCheckedChange:u,...d}=e,[p,v]=c.useState(null),j=Cm(n,h=>v(h)),b=c.useRef(!1),f=p?!!p.closest("form"):!0,[w=!1,k]=Xj({prop:r,defaultProp:a,onChange:u}),m=c.useRef(w);return c.useEffect(()=>{const h=p==null?void 0:p.form;if(h){const x=()=>k(m.current);return h.addEventListener("reset",x),()=>h.removeEventListener("reset",x)}},[p,k]),c.createElement(lb,{scope:t,state:w,disabled:s},c.createElement(Mm.button,ht({type:"button",role:"checkbox","aria-checked":Tt(w)?"mixed":w,"aria-required":i,"data-state":Om(w),"data-disabled":s?"":void 0,disabled:s,value:l},d,{ref:j,onKeyDown:bd(e.onKeyDown,h=>{h.key==="Enter"&&h.preventDefault()}),onClick:bd(e.onClick,h=>{k(x=>Tt(x)?!0:!x),f&&(b.current=h.isPropagationStopped(),b.current||h.stopPropagation())})})),f&&c.createElement(vb,{control:p,bubbles:!b.current,name:o,value:l,checked:w,required:i,disabled:s,style:{transform:"translateX(-100%)"}}))}),db="CheckboxIndicator",pb=c.forwardRef((e,n)=>{const{__scopeCheckbox:t,forceMount:o,...r}=e,a=ub(db,t);return c.createElement(Nm,{present:o||Tt(a.state)||a.state===!0},c.createElement(Mm.span,ht({"data-state":Om(a.state),"data-disabled":a.disabled?"":void 0},r,{ref:n,style:{pointerEvents:"none",...e.style}})))}),vb=e=>{const{control:n,checked:t,bubbles:o=!0,...r}=e,a=c.useRef(null),i=qj(t),s=eb(n);return c.useEffect(()=>{const l=a.current,u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"checked").set;if(i!==t&&p){const v=new Event("click",{bubbles:o});l.indeterminate=Tt(t),p.call(l,Tt(t)?!1:t),l.dispatchEvent(v)}},[i,t,o]),c.createElement("input",ht({type:"checkbox","aria-hidden":!0,defaultChecked:Tt(t)?!1:t},r,{tabIndex:-1,ref:a,style:{...e.style,...s,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function Tt(e){return e==="indeterminate"}function Om(e){return Tt(e)?"indeterminate":e?"checked":"unchecked"}const Dm=cb,mb=pb,wu=c.forwardRef(({className:e,...n},t)=>z.jsx(Dm,{ref:t,className:Tn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...n,children:z.jsx(mb,{className:Tn("flex items-center justify-center text-current"),children:z.jsx(mu,{className:"h-4 w-4"})})}));wu.displayName=Dm.displayName;function mr(e,n,{checkForDefaultPrevented:t=!0}={}){return function(r){if(e==null||e(r),t===!1||!r.defaultPrevented)return n==null?void 0:n(r)}}function gd(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function kb(...e){return n=>{let t=!1;const o=e.map(r=>{const a=gd(r,n);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let r=0;r<o.length;r++){const a=o[r];typeof a=="function"?a():gd(e[r],null)}}}}function xi(...e){return c.useCallback(kb(...e),e)}function fb(e,n){const t=c.createContext(n),o=a=>{const{children:i,...s}=a,l=c.useMemo(()=>s,Object.values(s));return z.jsx(t.Provider,{value:l,children:i})};o.displayName=e+"Provider";function r(a){const i=c.useContext(t);if(i)return i;if(n!==void 0)return n;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[o,r]}function hb(e,n=[]){let t=[];function o(a,i){const s=c.createContext(i),l=t.length;t=[...t,i];const u=p=>{var k;const{scope:v,children:j,...b}=p,f=((k=v==null?void 0:v[e])==null?void 0:k[l])||s,w=c.useMemo(()=>b,Object.values(b));return z.jsx(f.Provider,{value:w,children:j})};u.displayName=a+"Provider";function d(p,v){var f;const j=((f=v==null?void 0:v[e])==null?void 0:f[l])||s,b=c.useContext(j);if(b)return b;if(i!==void 0)return i;throw new Error(`\`${p}\` must be used within \`${a}\``)}return[u,d]}const r=()=>{const a=t.map(i=>c.createContext(i));return function(s){const l=(s==null?void 0:s[e])||a;return c.useMemo(()=>({[`__scope${e}`]:{...s,[e]:l}}),[s,l])}};return r.scopeName=e,[o,yb(r,...n)]}function yb(...e){const n=e[0];if(e.length===1)return n;const t=()=>{const o=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(a){const i=o.reduce((s,{useScope:l,scopeName:u})=>{const p=l(a)[`__scope${u}`];return{...s,...p}},{});return c.useMemo(()=>({[`__scope${n.scopeName}`]:i}),[i])}};return t.scopeName=n.scopeName,t}var zb=globalThis!=null&&globalThis.document?c.useLayoutEffect:()=>{},jb=Yd.useId||(()=>{}),bb=0;function is(e){const[n,t]=c.useState(jb());return zb(()=>{e||t(o=>o??String(bb++))},[e]),e||(n?`radix-${n}`:"")}function Lm(e){const n=c.useRef(e);return c.useEffect(()=>{n.current=e}),c.useMemo(()=>(...t)=>{var o;return(o=n.current)==null?void 0:o.call(n,...t)},[])}function gb({prop:e,defaultProp:n,onChange:t=()=>{}}){const[o,r]=wb({defaultProp:n,onChange:t}),a=e!==void 0,i=a?e:o,s=Lm(t),l=c.useCallback(u=>{if(a){const p=typeof u=="function"?u(e):u;p!==e&&s(p)}else r(u)},[a,e,r,s]);return[i,l]}function wb({defaultProp:e,onChange:n}){const t=c.useState(e),[o]=t,r=c.useRef(o),a=Lm(n);return c.useEffect(()=>{r.current!==o&&(a(o),r.current=o)},[o,r,a]),t}function ss(e,n,{checkForDefaultPrevented:t=!0}={}){return function(r){if(e==null||e(r),t===!1||!r.defaultPrevented)return n==null?void 0:n(r)}}var xb=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Am=xb.reduce((e,n)=>{const t=c.forwardRef((o,r)=>{const{asChild:a,...i}=o,s=a?Ut:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),z.jsx(s,{...i,ref:r})});return t.displayName=`Primitive.${n}`,{...e,[n]:t}},{});function Sb(e,n){e&&Vr.flushSync(()=>e.dispatchEvent(n))}function wd(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function Eb(...e){return n=>{let t=!1;const o=e.map(r=>{const a=wd(r,n);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let r=0;r<o.length;r++){const a=o[r];typeof a=="function"?a():wd(e[r],null)}}}}function Im(...e){return c.useCallback(Eb(...e),e)}function Fm(e){const n=c.useRef(e);return c.useEffect(()=>{n.current=e}),c.useMemo(()=>(...t)=>{var o;return(o=n.current)==null?void 0:o.call(n,...t)},[])}function Pb(e){const n=c.useRef(e);return c.useEffect(()=>{n.current=e}),c.useMemo(()=>(...t)=>{var o;return(o=n.current)==null?void 0:o.call(n,...t)},[])}function Cb(e,n=globalThis==null?void 0:globalThis.document){const t=Pb(e);c.useEffect(()=>{const o=r=>{r.key==="Escape"&&t(r)};return n.addEventListener("keydown",o,{capture:!0}),()=>n.removeEventListener("keydown",o,{capture:!0})},[t,n])}var Rb="DismissableLayer",hl="dismissableLayer.update",Nb="dismissableLayer.pointerDownOutside",Tb="dismissableLayer.focusOutside",xd,$m=c.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Vm=c.forwardRef((e,n)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:o,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:i,onDismiss:s,...l}=e,u=c.useContext($m),[d,p]=c.useState(null),v=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,j]=c.useState({}),b=Im(n,y=>p(y)),f=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),k=f.indexOf(w),m=d?f.indexOf(d):-1,h=u.layersWithOutsidePointerEventsDisabled.size>0,x=m>=k,P=Ob(y=>{const R=y.target,L=[...u.branches].some(_=>_.contains(R));!x||L||(r==null||r(y),i==null||i(y),y.defaultPrevented||s==null||s())},v),M=Db(y=>{const R=y.target;[...u.branches].some(_=>_.contains(R))||(a==null||a(y),i==null||i(y),y.defaultPrevented||s==null||s())},v);return Cb(y=>{m===u.layers.size-1&&(o==null||o(y),!y.defaultPrevented&&s&&(y.preventDefault(),s()))},v),c.useEffect(()=>{if(d)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(xd=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Sd(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=xd)}},[d,v,t,u]),c.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Sd())},[d,u]),c.useEffect(()=>{const y=()=>j({});return document.addEventListener(hl,y),()=>document.removeEventListener(hl,y)},[]),z.jsx(Am.div,{...l,ref:b,style:{pointerEvents:h?x?"auto":"none":void 0,...e.style},onFocusCapture:ss(e.onFocusCapture,M.onFocusCapture),onBlurCapture:ss(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:ss(e.onPointerDownCapture,P.onPointerDownCapture)})});Vm.displayName=Rb;var Mb="DismissableLayerBranch",_b=c.forwardRef((e,n)=>{const t=c.useContext($m),o=c.useRef(null),r=Im(n,o);return c.useEffect(()=>{const a=o.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),z.jsx(Am.div,{...e,ref:r})});_b.displayName=Mb;function Ob(e,n=globalThis==null?void 0:globalThis.document){const t=Fm(e),o=c.useRef(!1),r=c.useRef(()=>{});return c.useEffect(()=>{const a=s=>{if(s.target&&!o.current){let l=function(){Um(Nb,t,u,{discrete:!0})};const u={originalEvent:s};s.pointerType==="touch"?(n.removeEventListener("click",r.current),r.current=l,n.addEventListener("click",r.current,{once:!0})):l()}else n.removeEventListener("click",r.current);o.current=!1},i=window.setTimeout(()=>{n.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),n.removeEventListener("pointerdown",a),n.removeEventListener("click",r.current)}},[n,t]),{onPointerDownCapture:()=>o.current=!0}}function Db(e,n=globalThis==null?void 0:globalThis.document){const t=Fm(e),o=c.useRef(!1);return c.useEffect(()=>{const r=a=>{a.target&&!o.current&&Um(Tb,t,{originalEvent:a},{discrete:!1})};return n.addEventListener("focusin",r),()=>n.removeEventListener("focusin",r)},[n,t]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function Sd(){const e=new CustomEvent(hl);document.dispatchEvent(e)}function Um(e,n,t,{discrete:o}){const r=t.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:t});n&&r.addEventListener(e,n,{once:!0}),o?Sb(r,a):r.dispatchEvent(a)}function Ed(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function Lb(...e){return n=>{let t=!1;const o=e.map(r=>{const a=Ed(r,n);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let r=0;r<o.length;r++){const a=o[r];typeof a=="function"?a():Ed(e[r],null)}}}}function Ab(...e){return c.useCallback(Lb(...e),e)}var Ib=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Fb=Ib.reduce((e,n)=>{const t=c.forwardRef((o,r)=>{const{asChild:a,...i}=o,s=a?Ut:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),z.jsx(s,{...i,ref:r})});return t.displayName=`Primitive.${n}`,{...e,[n]:t}},{});function Pd(e){const n=c.useRef(e);return c.useEffect(()=>{n.current=e}),c.useMemo(()=>(...t)=>{var o;return(o=n.current)==null?void 0:o.call(n,...t)},[])}var ls="focusScope.autoFocusOnMount",us="focusScope.autoFocusOnUnmount",Cd={bubbles:!1,cancelable:!0},$b="FocusScope",Bm=c.forwardRef((e,n)=>{const{loop:t=!1,trapped:o=!1,onMountAutoFocus:r,onUnmountAutoFocus:a,...i}=e,[s,l]=c.useState(null),u=Pd(r),d=Pd(a),p=c.useRef(null),v=Ab(n,f=>l(f)),j=c.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;c.useEffect(()=>{if(o){let f=function(h){if(j.paused||!s)return;const x=h.target;s.contains(x)?p.current=x:qn(p.current,{select:!0})},w=function(h){if(j.paused||!s)return;const x=h.relatedTarget;x!==null&&(s.contains(x)||qn(p.current,{select:!0}))},k=function(h){if(document.activeElement===document.body)for(const P of h)P.removedNodes.length>0&&qn(s)};document.addEventListener("focusin",f),document.addEventListener("focusout",w);const m=new MutationObserver(k);return s&&m.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",w),m.disconnect()}}},[o,s,j.paused]),c.useEffect(()=>{if(s){Nd.add(j);const f=document.activeElement;if(!s.contains(f)){const k=new CustomEvent(ls,Cd);s.addEventListener(ls,u),s.dispatchEvent(k),k.defaultPrevented||(Vb(Hb(Wm(s)),{select:!0}),document.activeElement===f&&qn(s))}return()=>{s.removeEventListener(ls,u),setTimeout(()=>{const k=new CustomEvent(us,Cd);s.addEventListener(us,d),s.dispatchEvent(k),k.defaultPrevented||qn(f??document.body,{select:!0}),s.removeEventListener(us,d),Nd.remove(j)},0)}}},[s,u,d,j]);const b=c.useCallback(f=>{if(!t&&!o||j.paused)return;const w=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,k=document.activeElement;if(w&&k){const m=f.currentTarget,[h,x]=Ub(m);h&&x?!f.shiftKey&&k===x?(f.preventDefault(),t&&qn(h,{select:!0})):f.shiftKey&&k===h&&(f.preventDefault(),t&&qn(x,{select:!0})):k===m&&f.preventDefault()}},[t,o,j.paused]);return z.jsx(Fb.div,{tabIndex:-1,...i,ref:v,onKeyDown:b})});Bm.displayName=$b;function Vb(e,{select:n=!1}={}){const t=document.activeElement;for(const o of e)if(qn(o,{select:n}),document.activeElement!==t)return}function Ub(e){const n=Wm(e),t=Rd(n,e),o=Rd(n.reverse(),e);return[t,o]}function Wm(e){const n=[],t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const r=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||r?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)n.push(t.currentNode);return n}function Rd(e,n){for(const t of e)if(!Bb(t,{upTo:n}))return t}function Bb(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Wb(e){return e instanceof HTMLInputElement&&"select"in e}function qn(e,{select:n=!1}={}){if(e&&e.focus){const t=document.activeElement;e.focus({preventScroll:!0}),e!==t&&Wb(e)&&n&&e.select()}}var Nd=Kb();function Kb(){let e=[];return{add(n){const t=e[0];n!==t&&(t==null||t.pause()),e=Td(e,n),e.unshift(n)},remove(n){var t;e=Td(e,n),(t=e[0])==null||t.resume()}}}function Td(e,n){const t=[...e],o=t.indexOf(n);return o!==-1&&t.splice(o,1),t}function Hb(e){return e.filter(n=>n.tagName!=="A")}var Zb=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Jb=Zb.reduce((e,n)=>{const t=c.forwardRef((o,r)=>{const{asChild:a,...i}=o,s=a?Ut:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),z.jsx(s,{...i,ref:r})});return t.displayName=`Primitive.${n}`,{...e,[n]:t}},{}),Qb=globalThis!=null&&globalThis.document?c.useLayoutEffect:()=>{},Gb="Portal",Km=c.forwardRef((e,n)=>{var s;const{container:t,...o}=e,[r,a]=c.useState(!1);Qb(()=>a(!0),[]);const i=t||r&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return i?nm.createPortal(z.jsx(Jb.div,{...o,ref:n}),i):null});Km.displayName=Gb;var Md=globalThis!=null&&globalThis.document?c.useLayoutEffect:()=>{};function Xb(e,n){return c.useReducer((t,o)=>n[t][o]??t,e)}var Si=e=>{const{present:n,children:t}=e,o=Yb(n),r=typeof t=="function"?t({present:o.isPresent}):c.Children.only(t),a=xi(o.ref,qb(r));return typeof t=="function"||o.isPresent?c.cloneElement(r,{ref:a}):null};Si.displayName="Presence";function Yb(e){const[n,t]=c.useState(),o=c.useRef({}),r=c.useRef(e),a=c.useRef("none"),i=e?"mounted":"unmounted",[s,l]=Xb(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return c.useEffect(()=>{const u=va(o.current);a.current=s==="mounted"?u:"none"},[s]),Md(()=>{const u=o.current,d=r.current;if(d!==e){const v=a.current,j=va(u);e?l("MOUNT"):j==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&v!==j?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,l]),Md(()=>{if(n){let u;const d=n.ownerDocument.defaultView??window,p=j=>{const f=va(o.current).includes(j.animationName);if(j.target===n&&f&&(l("ANIMATION_END"),!r.current)){const w=n.style.animationFillMode;n.style.animationFillMode="forwards",u=d.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=w)})}},v=j=>{j.target===n&&(a.current=va(o.current))};return n.addEventListener("animationstart",v),n.addEventListener("animationcancel",p),n.addEventListener("animationend",p),()=>{d.clearTimeout(u),n.removeEventListener("animationstart",v),n.removeEventListener("animationcancel",p),n.removeEventListener("animationend",p)}}else l("ANIMATION_END")},[n,l]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:c.useCallback(u=>{u&&(o.current=getComputedStyle(u)),t(u)},[])}}function va(e){return(e==null?void 0:e.animationName)||"none"}function qb(e){var o,r;let n=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,t=n&&"isReactWarning"in n&&n.isReactWarning;return t?e.ref:(n=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,t=n&&"isReactWarning"in n&&n.isReactWarning,t?e.props.ref:e.props.ref||e.ref)}var eg=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Br=eg.reduce((e,n)=>{const t=c.forwardRef((o,r)=>{const{asChild:a,...i}=o,s=a?Ut:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),z.jsx(s,{...i,ref:r})});return t.displayName=`Primitive.${n}`,{...e,[n]:t}},{}),cs=0;function ng(){c.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??_d()),document.body.insertAdjacentElement("beforeend",e[1]??_d()),cs++,()=>{cs===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),cs--}},[])}function _d(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Pn=function(){return Pn=Object.assign||function(n){for(var t,o=1,r=arguments.length;o<r;o++){t=arguments[o];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},Pn.apply(this,arguments)};function Hm(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]]);return t}function tg(e,n,t){if(t||arguments.length===2)for(var o=0,r=n.length,a;o<r;o++)(a||!(o in n))&&(a||(a=Array.prototype.slice.call(n,0,o)),a[o]=n[o]);return e.concat(a||Array.prototype.slice.call(n))}var Na="right-scroll-bar-position",Ta="width-before-scroll-bar",og="with-scroll-bars-hidden",rg="--removed-body-scroll-bar-size";function ds(e,n){return typeof e=="function"?e(n):e&&(e.current=n),e}function ag(e,n){var t=c.useState(function(){return{value:e,callback:n,facade:{get current(){return t.value},set current(o){var r=t.value;r!==o&&(t.value=o,t.callback(o,r))}}}})[0];return t.callback=n,t.facade}var ig=typeof window<"u"?c.useLayoutEffect:c.useEffect,Od=new WeakMap;function sg(e,n){var t=ag(null,function(o){return e.forEach(function(r){return ds(r,o)})});return ig(function(){var o=Od.get(t);if(o){var r=new Set(o),a=new Set(e),i=t.current;r.forEach(function(s){a.has(s)||ds(s,null)}),a.forEach(function(s){r.has(s)||ds(s,i)})}Od.set(t,e)},[e]),t}function lg(e){return e}function ug(e,n){n===void 0&&(n=lg);var t=[],o=!1,r={read:function(){if(o)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:e},useMedium:function(a){var i=n(a,o);return t.push(i),function(){t=t.filter(function(s){return s!==i})}},assignSyncMedium:function(a){for(o=!0;t.length;){var i=t;t=[],i.forEach(a)}t={push:function(s){return a(s)},filter:function(){return t}}},assignMedium:function(a){o=!0;var i=[];if(t.length){var s=t;t=[],s.forEach(a),i=t}var l=function(){var d=i;i=[],d.forEach(a)},u=function(){return Promise.resolve().then(l)};u(),t={push:function(d){i.push(d),u()},filter:function(d){return i=i.filter(d),t}}}};return r}function cg(e){e===void 0&&(e={});var n=ug(null);return n.options=Pn({async:!0,ssr:!1},e),n}var Zm=function(e){var n=e.sideCar,t=Hm(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=n.read();if(!o)throw new Error("Sidecar medium not found");return c.createElement(o,Pn({},t))};Zm.isSideCarExport=!0;function dg(e,n){return e.useMedium(n),Zm}var Jm=cg(),ps=function(){},Ei=c.forwardRef(function(e,n){var t=c.useRef(null),o=c.useState({onScrollCapture:ps,onWheelCapture:ps,onTouchMoveCapture:ps}),r=o[0],a=o[1],i=e.forwardProps,s=e.children,l=e.className,u=e.removeScrollBar,d=e.enabled,p=e.shards,v=e.sideCar,j=e.noIsolation,b=e.inert,f=e.allowPinchZoom,w=e.as,k=w===void 0?"div":w,m=e.gapMode,h=Hm(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),x=v,P=sg([t,n]),M=Pn(Pn({},h),r);return c.createElement(c.Fragment,null,d&&c.createElement(x,{sideCar:Jm,removeScrollBar:u,shards:p,noIsolation:j,inert:b,setCallbacks:a,allowPinchZoom:!!f,lockRef:t,gapMode:m}),i?c.cloneElement(c.Children.only(s),Pn(Pn({},M),{ref:P})):c.createElement(k,Pn({},M,{className:l,ref:P}),s))});Ei.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ei.classNames={fullWidth:Ta,zeroRight:Na};var pg=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function vg(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var n=pg();return n&&e.setAttribute("nonce",n),e}function mg(e,n){e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}function kg(e){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(e)}var fg=function(){var e=0,n=null;return{add:function(t){e==0&&(n=vg())&&(mg(n,t),kg(n)),e++},remove:function(){e--,!e&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},hg=function(){var e=fg();return function(n,t){c.useEffect(function(){return e.add(n),function(){e.remove()}},[n&&t])}},Qm=function(){var e=hg(),n=function(t){var o=t.styles,r=t.dynamic;return e(o,r),null};return n},yg={left:0,top:0,right:0,gap:0},vs=function(e){return parseInt(e||"",10)||0},zg=function(e){var n=window.getComputedStyle(document.body),t=n[e==="padding"?"paddingLeft":"marginLeft"],o=n[e==="padding"?"paddingTop":"marginTop"],r=n[e==="padding"?"paddingRight":"marginRight"];return[vs(t),vs(o),vs(r)]},jg=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return yg;var n=zg(e),t=document.documentElement.clientWidth,o=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,o-t+n[2]-n[0])}},bg=Qm(),bo="data-scroll-locked",gg=function(e,n,t,o){var r=e.left,a=e.top,i=e.right,s=e.gap;return t===void 0&&(t="margin"),`
  .`.concat(og,` {
   overflow: hidden `).concat(o,`;
   padding-right: `).concat(s,"px ").concat(o,`;
  }
  body[`).concat(bo,`] {
    overflow: hidden `).concat(o,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(o,";"),t==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(o,`;
    `),t==="padding"&&"padding-right: ".concat(s,"px ").concat(o,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Na,` {
    right: `).concat(s,"px ").concat(o,`;
  }
  
  .`).concat(Ta,` {
    margin-right: `).concat(s,"px ").concat(o,`;
  }
  
  .`).concat(Na," .").concat(Na,` {
    right: 0 `).concat(o,`;
  }
  
  .`).concat(Ta," .").concat(Ta,` {
    margin-right: 0 `).concat(o,`;
  }
  
  body[`).concat(bo,`] {
    `).concat(rg,": ").concat(s,`px;
  }
`)},Dd=function(){var e=parseInt(document.body.getAttribute(bo)||"0",10);return isFinite(e)?e:0},wg=function(){c.useEffect(function(){return document.body.setAttribute(bo,(Dd()+1).toString()),function(){var e=Dd()-1;e<=0?document.body.removeAttribute(bo):document.body.setAttribute(bo,e.toString())}},[])},xg=function(e){var n=e.noRelative,t=e.noImportant,o=e.gapMode,r=o===void 0?"margin":o;wg();var a=c.useMemo(function(){return jg(r)},[r]);return c.createElement(bg,{styles:gg(a,!n,r,t?"":"!important")})},yl=!1;if(typeof window<"u")try{var ma=Object.defineProperty({},"passive",{get:function(){return yl=!0,!0}});window.addEventListener("test",ma,ma),window.removeEventListener("test",ma,ma)}catch{yl=!1}var Qt=yl?{passive:!1}:!1,Sg=function(e){return e.tagName==="TEXTAREA"},Gm=function(e,n){if(!(e instanceof Element))return!1;var t=window.getComputedStyle(e);return t[n]!=="hidden"&&!(t.overflowY===t.overflowX&&!Sg(e)&&t[n]==="visible")},Eg=function(e){return Gm(e,"overflowY")},Pg=function(e){return Gm(e,"overflowX")},Ld=function(e,n){var t=n.ownerDocument,o=n;do{typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&(o=o.host);var r=Xm(e,o);if(r){var a=Ym(e,o),i=a[1],s=a[2];if(i>s)return!0}o=o.parentNode}while(o&&o!==t.body);return!1},Cg=function(e){var n=e.scrollTop,t=e.scrollHeight,o=e.clientHeight;return[n,t,o]},Rg=function(e){var n=e.scrollLeft,t=e.scrollWidth,o=e.clientWidth;return[n,t,o]},Xm=function(e,n){return e==="v"?Eg(n):Pg(n)},Ym=function(e,n){return e==="v"?Cg(n):Rg(n)},Ng=function(e,n){return e==="h"&&n==="rtl"?-1:1},Tg=function(e,n,t,o,r){var a=Ng(e,window.getComputedStyle(n).direction),i=a*o,s=t.target,l=n.contains(s),u=!1,d=i>0,p=0,v=0;do{var j=Ym(e,s),b=j[0],f=j[1],w=j[2],k=f-w-a*b;(b||k)&&Xm(e,s)&&(p+=k,v+=b),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!l&&s!==document.body||l&&(n.contains(s)||n===s));return(d&&(Math.abs(p)<1||!r)||!d&&(Math.abs(v)<1||!r))&&(u=!0),u},ka=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ad=function(e){return[e.deltaX,e.deltaY]},Id=function(e){return e&&"current"in e?e.current:e},Mg=function(e,n){return e[0]===n[0]&&e[1]===n[1]},_g=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Og=0,Gt=[];function Dg(e){var n=c.useRef([]),t=c.useRef([0,0]),o=c.useRef(),r=c.useState(Og++)[0],a=c.useState(Qm)[0],i=c.useRef(e);c.useEffect(function(){i.current=e},[e]),c.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var f=tg([e.lockRef.current],(e.shards||[]).map(Id),!0).filter(Boolean);return f.forEach(function(w){return w.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),f.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var s=c.useCallback(function(f,w){if("touches"in f&&f.touches.length===2||f.type==="wheel"&&f.ctrlKey)return!i.current.allowPinchZoom;var k=ka(f),m=t.current,h="deltaX"in f?f.deltaX:m[0]-k[0],x="deltaY"in f?f.deltaY:m[1]-k[1],P,M=f.target,y=Math.abs(h)>Math.abs(x)?"h":"v";if("touches"in f&&y==="h"&&M.type==="range")return!1;var R=Ld(y,M);if(!R)return!0;if(R?P=y:(P=y==="v"?"h":"v",R=Ld(y,M)),!R)return!1;if(!o.current&&"changedTouches"in f&&(h||x)&&(o.current=P),!P)return!0;var L=o.current||P;return Tg(L,w,f,L==="h"?h:x,!0)},[]),l=c.useCallback(function(f){var w=f;if(!(!Gt.length||Gt[Gt.length-1]!==a)){var k="deltaY"in w?Ad(w):ka(w),m=n.current.filter(function(P){return P.name===w.type&&(P.target===w.target||w.target===P.shadowParent)&&Mg(P.delta,k)})[0];if(m&&m.should){w.cancelable&&w.preventDefault();return}if(!m){var h=(i.current.shards||[]).map(Id).filter(Boolean).filter(function(P){return P.contains(w.target)}),x=h.length>0?s(w,h[0]):!i.current.noIsolation;x&&w.cancelable&&w.preventDefault()}}},[]),u=c.useCallback(function(f,w,k,m){var h={name:f,delta:w,target:k,should:m,shadowParent:Lg(k)};n.current.push(h),setTimeout(function(){n.current=n.current.filter(function(x){return x!==h})},1)},[]),d=c.useCallback(function(f){t.current=ka(f),o.current=void 0},[]),p=c.useCallback(function(f){u(f.type,Ad(f),f.target,s(f,e.lockRef.current))},[]),v=c.useCallback(function(f){u(f.type,ka(f),f.target,s(f,e.lockRef.current))},[]);c.useEffect(function(){return Gt.push(a),e.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:v}),document.addEventListener("wheel",l,Qt),document.addEventListener("touchmove",l,Qt),document.addEventListener("touchstart",d,Qt),function(){Gt=Gt.filter(function(f){return f!==a}),document.removeEventListener("wheel",l,Qt),document.removeEventListener("touchmove",l,Qt),document.removeEventListener("touchstart",d,Qt)}},[]);var j=e.removeScrollBar,b=e.inert;return c.createElement(c.Fragment,null,b?c.createElement(a,{styles:_g(r)}):null,j?c.createElement(xg,{gapMode:e.gapMode}):null)}function Lg(e){for(var n=null;e!==null;)e instanceof ShadowRoot&&(n=e.host,e=e.host),e=e.parentNode;return n}const Ag=dg(Jm,Dg);var qm=c.forwardRef(function(e,n){return c.createElement(Ei,Pn({},e,{ref:n,sideCar:Ag}))});qm.classNames=Ei.classNames;var Ig=function(e){if(typeof document>"u")return null;var n=Array.isArray(e)?e[0]:e;return n.ownerDocument.body},Xt=new WeakMap,fa=new WeakMap,ha={},ms=0,ek=function(e){return e&&(e.host||ek(e.parentNode))},Fg=function(e,n){return n.map(function(t){if(e.contains(t))return t;var o=ek(t);return o&&e.contains(o)?o:(console.error("aria-hidden",t,"in not contained inside",e,". Doing nothing"),null)}).filter(function(t){return!!t})},$g=function(e,n,t,o){var r=Fg(n,Array.isArray(e)?e:[e]);ha[t]||(ha[t]=new WeakMap);var a=ha[t],i=[],s=new Set,l=new Set(r),u=function(p){!p||s.has(p)||(s.add(p),u(p.parentNode))};r.forEach(u);var d=function(p){!p||l.has(p)||Array.prototype.forEach.call(p.children,function(v){if(s.has(v))d(v);else try{var j=v.getAttribute(o),b=j!==null&&j!=="false",f=(Xt.get(v)||0)+1,w=(a.get(v)||0)+1;Xt.set(v,f),a.set(v,w),i.push(v),f===1&&b&&fa.set(v,!0),w===1&&v.setAttribute(t,"true"),b||v.setAttribute(o,"true")}catch(k){console.error("aria-hidden: cannot operate on ",v,k)}})};return d(n),s.clear(),ms++,function(){i.forEach(function(p){var v=Xt.get(p)-1,j=a.get(p)-1;Xt.set(p,v),a.set(p,j),v||(fa.has(p)||p.removeAttribute(o),fa.delete(p)),j||p.removeAttribute(t)}),ms--,ms||(Xt=new WeakMap,Xt=new WeakMap,fa=new WeakMap,ha={})}},Vg=function(e,n,t){t===void 0&&(t="data-aria-hidden");var o=Array.from(Array.isArray(e)?e:[e]),r=Ig(e);return r?(o.push.apply(o,Array.from(r.querySelectorAll("[aria-live]"))),$g(o,r,t,"aria-hidden")):function(){return null}},xu="Dialog",[nk,f0]=hb(xu),[Ug,gn]=nk(xu),tk=e=>{const{__scopeDialog:n,children:t,open:o,defaultOpen:r,onOpenChange:a,modal:i=!0}=e,s=c.useRef(null),l=c.useRef(null),[u=!1,d]=gb({prop:o,defaultProp:r,onChange:a});return z.jsx(Ug,{scope:n,triggerRef:s,contentRef:l,contentId:is(),titleId:is(),descriptionId:is(),open:u,onOpenChange:d,onOpenToggle:c.useCallback(()=>d(p=>!p),[d]),modal:i,children:t})};tk.displayName=xu;var ok="DialogTrigger",rk=c.forwardRef((e,n)=>{const{__scopeDialog:t,...o}=e,r=gn(ok,t),a=xi(n,r.triggerRef);return z.jsx(Br.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":Pu(r.open),...o,ref:a,onClick:mr(e.onClick,r.onOpenToggle)})});rk.displayName=ok;var Su="DialogPortal",[Bg,ak]=nk(Su,{forceMount:void 0}),ik=e=>{const{__scopeDialog:n,forceMount:t,children:o,container:r}=e,a=gn(Su,n);return z.jsx(Bg,{scope:n,forceMount:t,children:c.Children.map(o,i=>z.jsx(Si,{present:t||a.open,children:z.jsx(Km,{asChild:!0,container:r,children:i})}))})};ik.displayName=Su;var ri="DialogOverlay",sk=c.forwardRef((e,n)=>{const t=ak(ri,e.__scopeDialog),{forceMount:o=t.forceMount,...r}=e,a=gn(ri,e.__scopeDialog);return a.modal?z.jsx(Si,{present:o||a.open,children:z.jsx(Wg,{...r,ref:n})}):null});sk.displayName=ri;var Wg=c.forwardRef((e,n)=>{const{__scopeDialog:t,...o}=e,r=gn(ri,t);return z.jsx(qm,{as:Ut,allowPinchZoom:!0,shards:[r.contentRef],children:z.jsx(Br.div,{"data-state":Pu(r.open),...o,ref:n,style:{pointerEvents:"auto",...o.style}})})}),Ft="DialogContent",lk=c.forwardRef((e,n)=>{const t=ak(Ft,e.__scopeDialog),{forceMount:o=t.forceMount,...r}=e,a=gn(Ft,e.__scopeDialog);return z.jsx(Si,{present:o||a.open,children:a.modal?z.jsx(Kg,{...r,ref:n}):z.jsx(Hg,{...r,ref:n})})});lk.displayName=Ft;var Kg=c.forwardRef((e,n)=>{const t=gn(Ft,e.__scopeDialog),o=c.useRef(null),r=xi(n,t.contentRef,o);return c.useEffect(()=>{const a=o.current;if(a)return Vg(a)},[]),z.jsx(uk,{...e,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:mr(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=t.triggerRef.current)==null||i.focus()}),onPointerDownOutside:mr(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,s=i.button===0&&i.ctrlKey===!0;(i.button===2||s)&&a.preventDefault()}),onFocusOutside:mr(e.onFocusOutside,a=>a.preventDefault())})}),Hg=c.forwardRef((e,n)=>{const t=gn(Ft,e.__scopeDialog),o=c.useRef(!1),r=c.useRef(!1);return z.jsx(uk,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,s;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(o.current||(s=t.triggerRef.current)==null||s.focus(),a.preventDefault()),o.current=!1,r.current=!1},onInteractOutside:a=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,a),a.defaultPrevented||(o.current=!0,a.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const i=a.target;((u=t.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&r.current&&a.preventDefault()}})}),uk=c.forwardRef((e,n)=>{const{__scopeDialog:t,trapFocus:o,onOpenAutoFocus:r,onCloseAutoFocus:a,...i}=e,s=gn(Ft,t),l=c.useRef(null),u=xi(n,l);return ng(),z.jsxs(z.Fragment,{children:[z.jsx(Bm,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:r,onUnmountAutoFocus:a,children:z.jsx(Vm,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":Pu(s.open),...i,ref:u,onDismiss:()=>s.onOpenChange(!1)})}),z.jsxs(z.Fragment,{children:[z.jsx(Zg,{titleId:s.titleId}),z.jsx(Qg,{contentRef:l,descriptionId:s.descriptionId})]})]})}),Eu="DialogTitle",ck=c.forwardRef((e,n)=>{const{__scopeDialog:t,...o}=e,r=gn(Eu,t);return z.jsx(Br.h2,{id:r.titleId,...o,ref:n})});ck.displayName=Eu;var dk="DialogDescription",pk=c.forwardRef((e,n)=>{const{__scopeDialog:t,...o}=e,r=gn(dk,t);return z.jsx(Br.p,{id:r.descriptionId,...o,ref:n})});pk.displayName=dk;var vk="DialogClose",mk=c.forwardRef((e,n)=>{const{__scopeDialog:t,...o}=e,r=gn(vk,t);return z.jsx(Br.button,{type:"button",...o,ref:n,onClick:mr(e.onClick,()=>r.onOpenChange(!1))})});mk.displayName=vk;function Pu(e){return e?"open":"closed"}var kk="DialogTitleWarning",[h0,fk]=fb(kk,{contentName:Ft,titleName:Eu,docsSlug:"dialog"}),Zg=({titleId:e})=>{const n=fk(kk),t=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return c.useEffect(()=>{e&&(document.getElementById(e)||console.error(t))},[t,e]),null},Jg="DialogDescriptionWarning",Qg=({contentRef:e,descriptionId:n})=>{const o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${fk(Jg).contentName}}.`;return c.useEffect(()=>{var a;const r=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");n&&r&&(document.getElementById(n)||console.warn(o))},[o,e,n]),null},Gg=tk,Xg=rk,Yg=ik,hk=sk,yk=lk,zk=ck,jk=pk,qg=mk;const e0=Gg,n0=Xg,t0=Yg,bk=c.forwardRef(({className:e,...n},t)=>z.jsx(hk,{ref:t,className:Tn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...n}));bk.displayName=hk.displayName;const gk=c.forwardRef(({className:e,children:n,...t},o)=>z.jsxs(t0,{children:[z.jsx(bk,{}),z.jsxs(yk,{ref:o,className:Tn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[n,z.jsxs(qg,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[z.jsx(ku,{className:"h-4 w-4"}),z.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));gk.displayName=yk.displayName;const wk=({className:e,...n})=>z.jsx("div",{className:Tn("flex flex-col space-y-1.5 text-center sm:text-left",e),...n});wk.displayName="DialogHeader";const xk=c.forwardRef(({className:e,...n},t)=>z.jsx(zk,{ref:t,className:Tn("text-lg font-semibold leading-none tracking-tight",e),...n}));xk.displayName=zk.displayName;const Sk=c.forwardRef(({className:e,...n},t)=>z.jsx(jk,{ref:t,className:Tn("text-sm text-muted-foreground",e),...n}));Sk.displayName=jk.displayName;function Ek({title:e,correct:n,incorrect:t,refresh:o}){const[r,a]=c.useState(!1),[i,s]=c.useState(new Array(n.length+t.length).fill(!1)),l=c.useMemo(()=>(s(new Array(n.length+t.length).fill(!1)),ez([...n,...t])),[n,t]);return z.jsxs("div",{className:"flex flex-col gap-4",children:[z.jsxs("div",{children:[z.jsx("h2",{className:"text-2xl",children:e}),z.jsxs("p",{className:"font-medium text-sm",children:["Zaškrtněte správné výroky(",n.length,")"]})]}),z.jsx("div",{children:l.map((u,d)=>z.jsx(o0,{statement:u,type:n.find(p=>p.uuid==u.uuid)?"correct":"incorrect",submited:r,checked:i[d],onChange:p=>{const v=[...i];v[d]=p,s(v)}},nz(u.uuid)))}),z.jsx(Cn,{className:"w-full",onClick:()=>{r?(a(!1),o()):a(!0)},children:r?"Další otázka":"Odeslat"}),z.jsx("div",{className:"w-full flex justify-end",children:z.jsx(r0,{})})]})}function o0({statement:e,type:n,submited:t,checked:o,onChange:r}){const[a,i]=c.useState(n=="correct");return z.jsxs("div",{className:Tn(["p-2 flex gap-2 items-center",t&&(n=="correct"?"bg-green-200":"bg-red-200"),t?"cursor-default":"cursor-pointer",t?n=="correct"?"hover:bg-green-300":"hover:bg-red-300":"hover:bg-gray-200"]),onClick:()=>{t||r(!o)},children:[z.jsx(wu,{id:e.uuid,name:n,disabled:t,checked:o}),z.jsxs("div",{className:"flex-1",children:[z.jsx("p",{children:a?e.correct:e.incorrect}),t&&n=="incorrect"&&z.jsxs("div",{className:"flex items-center pt-2 gap-2 select-none",children:[z.jsx("p",{onMouseDown:()=>i(s=>!s),className:"font-bold underline italic cursor-pointer",children:a?"zobrazit nesprávnou":"zobrazit správnou"}),z.jsx("p",{className:"text-gray-600",children:a?"(Zobrazuje se správna odpověď)":"(Zobrazuje se nesprávna odpověď)"})]})]}),t&&o&&(n=="correct"?z.jsx("span",{children:z.jsx(mu,{className:"w-10 h-10"})}):z.jsx("span",{children:z.jsx(ku,{className:"w-10 h-10"})}))]})}function r0(){return z.jsxs(e0,{children:[z.jsx(n0,{asChild:!0,children:z.jsx(Cn,{variant:"outline",children:"Nahlásit chybu"})}),z.jsx(gk,{children:z.jsxs(wk,{children:[z.jsx(xk,{children:"Vyberte si jak nahlásit chybu"}),z.jsxs(Sk,{children:["Nahlášení chyby můžete provést buď přes Discord nebo přes Github.",z.jsx("br",{}),z.jsx("br",{}),"Pokud chcete nahlásit chybu přes Discord, pripojte se na náš server a napište nám (",z.jsxs("a",{href:"https://discord.gg/ztabDQ4jNv",className:"underline text-foreground hover:text-blue-500",target:"_blank",children:["link pro připojení",z.jsx(jo,{className:"w-3 h-3 inline self-center"})]}),").",z.jsx("br",{}),z.jsx("br",{}),"Pokud chcete nahlásit chybu přes Github, vytvořte issue(",z.jsxs("a",{href:"https://github.com/tomz197/os-drill/issues/new",className:"underline text-foreground hover:text-blue-500",target:"_blank",children:["link pro vytoření issue",z.jsx(jo,{className:"w-3 h-3 inline self-center"})]}),")."]})]})})]})}function a0(){const{sectionUUID:e}=wm(),[n,t]=c.useState(null),[o,r]=c.useState([]),[a,i]=c.useState([]);c.useEffect(()=>{if(!e){console.error("Section not found"),it("/");return}const[l,u]=ml.getSingleSection({uuid:e});if(u){console.error("Section not found"),it("/");return}t(l)},[e]);const s=c.useCallback(()=>{if(!e){console.error("Section or name not found"),it("/");return}const[l,u]=ml.getRandomStatements({count:5,sections:[e]});if(u){console.error("Statements not found"),it("/");return}r(l.slice(0,2)),i(l.slice(2,5))},[n]);return c.useEffect(()=>{s()},[s]),!o||!a||!n?null:z.jsx(Ek,{title:n==null?void 0:n.title,correct:o,incorrect:a,refresh:s})}function i0(){const[e,n]=c.useState([]),[t,o]=c.useState([]),r=c.useCallback(()=>{const[a,i]=ml.getRandomStatements({count:5});if(i){console.error("Statements not found"),it("/");return}n(a.slice(0,2)),o(a.slice(2,5))},[]);return c.useEffect(()=>{r()},[r]),!e||!t?null:z.jsx(Ek,{title:"Všechny části",correct:e,incorrect:t,refresh:r})}function Pk({facts:e,resetQuestion:n}){const[t,o]=c.useState([]),[r,a]=c.useState(!1);function i(){o([]),a(!1),n()}return z.jsxs(z.Fragment,{children:[e.map((s,l)=>z.jsxs("div",{className:Tn(["p-2 flex gap-2 items-center",l!==0&&" border-t ",r&&(s.isCorrect?"bg-green-200":"bg-red-200"),r?"cursor-default":"cursor-pointer",r?s.isCorrect?"hover:bg-green-300":"hover:bg-red-300":"hover:bg-gray-200"]),onClick:()=>{r||(t.includes(s)?o(u=>u.filter(d=>d.fact!==s.fact)):o(u=>[...u,s]))},children:[z.jsx(wu,{id:l+"-formCheckbox",name:"checkbox",className:"pointer-events-none",checked:t.includes(s),disabled:r}),z.jsx("div",{className:"flex-1",children:z.jsx(s0,{fact:s.fact,correct:s.correct,isSubmitted:r})}),r&&t.includes(s)&&(s.isCorrect?z.jsx("span",{className:"text-green-500",children:z.jsx(mu,{className:"w-10 h-10"})}):z.jsx("span",{className:"text-red-500",children:z.jsx(ku,{className:"w-10 h-10"})}))]},l)),z.jsx(Cn,{className:"w-full mt-4",onClick:()=>{if(r){i();return}a(!0)},children:r?"Další otázka":"Odeslat"})]})}function s0({fact:e,correct:n,isSubmitted:t}){const[o,r]=c.useState(!1);return z.jsxs(z.Fragment,{children:[z.jsx("p",{children:o?n:e}),t&&n&&z.jsxs("div",{className:"flex items-center pt-2 gap-2 select-none",children:[z.jsx("p",{onMouseDown:()=>r(!o),className:"font-bold underline italic cursor-pointer",children:o?"zobrazit nesprávnou":"zobrazit správnou"}),z.jsx("p",{className:"text-gray-600",children:o?"(Zobrazuje se správna odpověď)":"(Zobrazuje se nesprávna odpověď)"})]})]})}function l0({section:e,name:n}){switch(!0){case!e:return Dr.find(t=>t.name===n)??null;case!n:return Dr.find(t=>t.section===e)??null;default:return null}}function u0(){return{section:-1,name:"All parts",correct:Dr.flatMap(e=>e.correct),incorrect:Dr.flatMap(e=>e.incorrect)}}function c0(e){if(e.correct.length!==e.incorrect.length)throw new Error("Correct and incorrect arrays must have the same length");const n=e.correct.length,t=new Array(5).fill(()=>Math.floor(Math.random()*n)),o=2,r=3,a=[];for(let i=0;i<o;i++){const s=t[i]();a.push({fact:e.correct[s],isCorrect:!0,correct:null})}for(let i=0;i<r;i++){const s=t[i+o]();a.push({fact:e.incorrect[s],isCorrect:!1,correct:e.correct[s]})}for(let i=a.length-1;i>0;i--){const s=Math.floor(Math.random()*(i+1)),l=a[i];a[i]=a[s],a[s]=l}return a}const kr={getDrillSingle:l0,getDrillMany:u0,getCorrectIncorrect:c0};function d0(){var r;const{section:e}=wm(),[n,t]=c.useState(null),o=c.useCallback(()=>{if(!e){console.error("Section or name not found"),it("/");return}const a=kr.getDrillSingle({section:parseInt(e)});if(!a){console.error("Drill not found"),it("/");return}t(kr.getCorrectIncorrect(a))},[e]);return c.useEffect(()=>{o()},[o]),n?z.jsxs(z.Fragment,{children:[z.jsxs("h2",{className:"text-xl",children:["Část: ",e,":"," ",e?((r=kr.getDrillSingle({section:parseInt(e)}))==null?void 0:r.name)??"":""]}),z.jsx("div",{children:z.jsx(Pk,{facts:n,resetQuestion:o})})]}):null}function p0(){const[e,n]=c.useState(null),t=c.useCallback(()=>{const o=kr.getDrillMany();if(!o)return console.error("Drill not found"),it("/"),null;n(kr.getCorrectIncorrect(o))},[]);return c.useEffect(()=>{t()},[t]),e?z.jsxs(z.Fragment,{children:[z.jsx("h2",{className:"text-xl",children:"Všechny části"}),z.jsx("div",{children:z.jsx(Pk,{facts:e,resetQuestion:t})})]}):null}function v0(){return z.jsxs("div",{className:"max-w-prose w-full mx-auto",children:[z.jsx("h1",{className:"text-xl font-semibold text-center",children:"O nás"}),z.jsx("div",{className:"h-[0.1rem] w-full bg-border rounded-full my-4"}),z.jsxs("div",{className:"grid gap-2",children:[z.jsxs("p",{className:"inline",children:["Táto aplikácia bola vytvorená"," ",z.jsxs("a",{href:"https://zifcak.dev",target:"_blank",className:"underline hover:text-blue-500",children:["Tomášom Žifčákom",z.jsx(jo,{className:"w-3 h-3 inline self-center"})]})," ","pretože neexistoval žiadny spôsob ako si preveriť svoje znalosti z predmetu PB152(Operačné systémy) v zkúškovej/zápočtovej forme."]}),z.jsxs("p",{children:["Kód tejto aplikácie je otvorený a dostupný na"," ",z.jsxs("a",{href:"https://github.com/tomz197/os-drill",className:"underline hover:text-blue-500",target:"_blank",children:["Githube",z.jsx(jo,{className:"w-3 h-3 inline self-center"})]}),"."]}),z.jsxs("p",{children:["V prípade akýchkoľvek problémov, nápadov na vylepšenie alebo akýchkoľvek otázok napíš na"," ",z.jsxs("a",{href:"https://discord.gg/ztabDQ4jNv",className:"underline hover:text-blue-500",target:"_blank",children:["Discord",z.jsx(jo,{className:"w-3 h-3 inline self-center"})]})," ","alebo vytvor issue, pull request alebo diskusiu na Githube."]}),z.jsx("p",{className:"font-semibold",children:"Každá pomoc je vítaná!"})]})]})}const m0=Pj([{path:"/",element:z.jsx(Vj,{}),children:[{path:"",element:z.jsx(Uj,{})},{path:"about",element:z.jsx(v0,{})},{path:"exam/:section",element:z.jsx(d0,{})},{path:"exam",element:z.jsx(p0,{})},{path:"credit",element:z.jsx(i0,{})},{path:"credit/:sectionUUID",element:z.jsx(a0,{})}]}],{basename:"/"});ks.createRoot(document.getElementById("root")).render(z.jsx(Xd.StrictMode,{children:z.jsx(Lj,{router:m0})}));
